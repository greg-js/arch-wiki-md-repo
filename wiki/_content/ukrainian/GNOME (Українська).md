**GNOME 3** - Оточення робочого столу, графічний інтерфейс користувача, який прийшов на заміну GNOME 2

GNOME 3 - Проект започаткований GNOME Project що б створити з нуля абсолютно нове, сучасне робоче оточення, розроблене з урахуванням потреб сучасних користувачів застосовуючи нові технології. В Gnome 3:

*   Нове оформлення і шрифт
*   Вбудовані (Інтегровані) IM
*   Більш стабільна система сповіщення.
*   ... І інші нові можливості, такі як, покращений Nautilus, Тайтловий WM

Детально на сайті [GNOME 3](http://www.gnome3.org/)

## Contents

*   [1 Вступ](#.D0.92.D1.81.D1.82.D1.83.D0.BF)
*   [2 Оновлення з поточного Gnome 2.32](#.D0.9E.D0.BD.D0.BE.D0.B2.D0.BB.D0.B5.D0.BD.D0.BD.D1.8F_.D0.B7_.D0.BF.D0.BE.D1.82.D0.BE.D1.87.D0.BD.D0.BE.D0.B3.D0.BE_Gnome_2.32)
*   [3 Нове встановлення](#.D0.9D.D0.BE.D0.B2.D0.B5_.D0.B2.D1.81.D1.82.D0.B0.D0.BD.D0.BE.D0.B2.D0.BB.D0.B5.D0.BD.D0.BD.D1.8F)
*   [4 Запуск GNOME](#.D0.97.D0.B0.D0.BF.D1.83.D1.81.D0.BA_GNOME)
*   [5 Використання оболонки](#.D0.92.D0.B8.D0.BA.D0.BE.D1.80.D0.B8.D1.81.D1.82.D0.B0.D0.BD.D0.BD.D1.8F_.D0.BE.D0.B1.D0.BE.D0.BB.D0.BE.D0.BD.D0.BA.D0.B8)
    *   [5.1 Гарячі клавіші](#.D0.93.D0.B0.D1.80.D1.8F.D1.87.D1.96_.D0.BA.D0.BB.D0.B0.D0.B2.D1.96.D1.88.D1.96)
*   [6 Тонке налаштування](#.D0.A2.D0.BE.D0.BD.D0.BA.D0.B5_.D0.BD.D0.B0.D0.BB.D0.B0.D1.88.D1.82.D1.83.D0.B2.D0.B0.D0.BD.D0.BD.D1.8F)
    *   [6.1 Використання gnome-tweak-tool](#.D0.92.D0.B8.D0.BA.D0.BE.D1.80.D0.B8.D1.81.D1.82.D0.B0.D0.BD.D0.BD.D1.8F_gnome-tweak-tool)
    *   [6.2 Керування прихованими налаштуваннями](#.D0.9A.D0.B5.D1.80.D1.83.D0.B2.D0.B0.D0.BD.D0.BD.D1.8F_.D0.BF.D1.80.D0.B8.D1.85.D0.BE.D0.B2.D0.B0.D0.BD.D0.B8.D0.BC.D0.B8_.D0.BD.D0.B0.D0.BB.D0.B0.D1.88.D1.82.D1.83.D0.B2.D0.B0.D0.BD.D0.BD.D1.8F.D0.BC.D0.B8)
    *   [6.3 Вимкнення звуку](#.D0.92.D0.B8.D0.BC.D0.BA.D0.BD.D0.B5.D0.BD.D0.BD.D1.8F_.D0.B7.D0.B2.D1.83.D0.BA.D1.83)
    *   [6.4 Налаштування гарячих клавіш](#.D0.9D.D0.B0.D0.BB.D0.B0.D1.88.D1.82.D1.83.D0.B2.D0.B0.D0.BD.D0.BD.D1.8F_.D0.B3.D0.B0.D1.80.D1.8F.D1.87.D0.B8.D1.85_.D0.BA.D0.BB.D0.B0.D0.B2.D1.96.D1.88)
    *   [6.5 Вимкнення з меню статусу](#.D0.92.D0.B8.D0.BC.D0.BA.D0.BD.D0.B5.D0.BD.D0.BD.D1.8F_.D0.B7_.D0.BC.D0.B5.D0.BD.D1.8E_.D1.81.D1.82.D0.B0.D1.82.D1.83.D1.81.D1.83)
    *   [6.6 Ввімкнення вбудованого IM](#.D0.92.D0.B2.D1.96.D0.BC.D0.BA.D0.BD.D0.B5.D0.BD.D0.BD.D1.8F_.D0.B2.D0.B1.D1.83.D0.B4.D0.BE.D0.B2.D0.B0.D0.BD.D0.BE.D0.B3.D0.BE_IM)
    *   [6.7 Керування автозапуском в GNOME 3](#.D0.9A.D0.B5.D1.80.D1.83.D0.B2.D0.B0.D0.BD.D0.BD.D1.8F_.D0.B0.D0.B2.D1.82.D0.BE.D0.B7.D0.B0.D0.BF.D1.83.D1.81.D0.BA.D0.BE.D0.BC_.D0.B2_GNOME_3)
    *   [6.8 Видалення піктограми універсального доступу](#.D0.92.D0.B8.D0.B4.D0.B0.D0.BB.D0.B5.D0.BD.D0.BD.D1.8F_.D0.BF.D1.96.D0.BA.D1.82.D0.BE.D0.B3.D1.80.D0.B0.D0.BC.D0.B8_.D1.83.D0.BD.D1.96.D0.B2.D0.B5.D1.80.D1.81.D0.B0.D0.BB.D1.8C.D0.BD.D0.BE.D0.B3.D0.BE_.D0.B4.D0.BE.D1.81.D1.82.D1.83.D0.BF.D1.83)
    *   [6.9 Видалення піктограми Bluetooth](#.D0.92.D0.B8.D0.B4.D0.B0.D0.BB.D0.B5.D0.BD.D0.BD.D1.8F_.D0.BF.D1.96.D0.BA.D1.82.D0.BE.D0.B3.D1.80.D0.B0.D0.BC.D0.B8_Bluetooth)
    *   [6.10 Налаштування рядка адреси в Nautilus](#.D0.9D.D0.B0.D0.BB.D0.B0.D1.88.D1.82.D1.83.D0.B2.D0.B0.D0.BD.D0.BD.D1.8F_.D1.80.D1.8F.D0.B4.D0.BA.D0.B0_.D0.B0.D0.B4.D1.80.D0.B5.D1.81.D0.B8_.D0.B2_Nautilus)
    *   [6.11 Встановлення шпалер через gsettings](#.D0.92.D1.81.D1.82.D0.B0.D0.BD.D0.BE.D0.B2.D0.BB.D0.B5.D0.BD.D0.BD.D1.8F_.D1.88.D0.BF.D0.B0.D0.BB.D0.B5.D1.80_.D1.87.D0.B5.D1.80.D0.B5.D0.B7_gsettings)
    *   [6.12 Встановлення емулятора терміналу за замовчуванням, термінальною командою](#.D0.92.D1.81.D1.82.D0.B0.D0.BD.D0.BE.D0.B2.D0.BB.D0.B5.D0.BD.D0.BD.D1.8F_.D0.B5.D0.BC.D1.83.D0.BB.D1.8F.D1.82.D0.BE.D1.80.D0.B0_.D1.82.D0.B5.D1.80.D0.BC.D1.96.D0.BD.D0.B0.D0.BB.D1.83_.D0.B7.D0.B0_.D0.B7.D0.B0.D0.BC.D0.BE.D0.B2.D1.87.D1.83.D0.B2.D0.B0.D0.BD.D0.BD.D1.8F.D0.BC.2C_.D1.82.D0.B5.D1.80.D0.BC.D1.96.D0.BD.D0.B0.D0.BB.D1.8C.D0.BD.D0.BE.D1.8E_.D0.BA.D0.BE.D0.BC.D0.B0.D0.BD.D0.B4.D0.BE.D1.8E)
    *   [6.13 Видалення каталогів з секції "Комп'ютер " у бічній панелі Nautilus](#.D0.92.D0.B8.D0.B4.D0.B0.D0.BB.D0.B5.D0.BD.D0.BD.D1.8F_.D0.BA.D0.B0.D1.82.D0.B0.D0.BB.D0.BE.D0.B3.D1.96.D0.B2_.D0.B7_.D1.81.D0.B5.D0.BA.D1.86.D1.96.D1.97_.22.D0.9A.D0.BE.D0.BC.D0.BF.27.D1.8E.D1.82.D0.B5.D1.80_.22_.D1.83_.D0.B1.D1.96.D1.87.D0.BD.D1.96.D0.B9_.D0.BF.D0.B0.D0.BD.D0.B5.D0.BB.D1.96_Nautilus)
*   [7 Вирішення проблем](#.D0.92.D0.B8.D1.80.D1.96.D1.88.D0.B5.D0.BD.D0.BD.D1.8F_.D0.BF.D1.80.D0.BE.D0.B1.D0.BB.D0.B5.D0.BC)
    *   [7.1 Програми GTK2 + не стартують](#.D0.9F.D1.80.D0.BE.D0.B3.D1.80.D0.B0.D0.BC.D0.B8_GTK2_.2B_.D0.BD.D0.B5_.D1.81.D1.82.D0.B0.D1.80.D1.82.D1.83.D1.8E.D1.82.D1.8C)
    *   [7.2 Немає звукових подій для Empathy та інших програм](#.D0.9D.D0.B5.D0.BC.D0.B0.D1.94_.D0.B7.D0.B2.D1.83.D0.BA.D0.BE.D0.B2.D0.B8.D1.85_.D0.BF.D0.BE.D0.B4.D1.96.D0.B9_.D0.B4.D0.BB.D1.8F_Empathy_.D1.82.D0.B0_.D1.96.D0.BD.D1.88.D0.B8.D1.85_.D0.BF.D1.80.D0.BE.D0.B3.D1.80.D0.B0.D0.BC)
*   [8 Налагодження Gnome 3](#.D0.9D.D0.B0.D0.BB.D0.B0.D0.B3.D0.BE.D0.B4.D0.B6.D0.B5.D0.BD.D0.BD.D1.8F_Gnome_3)
    *   [8.1 Налагоджувальна консоль Gnome 3](#.D0.9D.D0.B0.D0.BB.D0.B0.D0.B3.D0.BE.D0.B4.D0.B6.D1.83.D0.B2.D0.B0.D0.BB.D1.8C.D0.BD.D0.B0_.D0.BA.D0.BE.D0.BD.D1.81.D0.BE.D0.BB.D1.8C_Gnome_3)
    *   [8.2 Інші команди налагодження](#.D0.86.D0.BD.D1.88.D1.96_.D0.BA.D0.BE.D0.BC.D0.B0.D0.BD.D0.B4.D0.B8_.D0.BD.D0.B0.D0.BB.D0.B0.D0.B3.D0.BE.D0.B4.D0.B6.D0.B5.D0.BD.D0.BD.D1.8F)

## Вступ

GNOME 3 має два режима **Gnome-Shell** (Новий, стандартний) і **Failback** - Дуже схожий на Gnome 2.x. Після запуску gnome-session автоматично перевірить можливість запуску **Gnome-Shell** Залежно від можливостей вашої відеокарти

**Warning:** На відміну від Gnome 2.x Gnome 3 вимагає **pulse-audio**

**Warning:** Оновлення бажано проводити з іншого WM, або з термінального режиму. В іншому випадку оновлення з під Gnome може привести до падіння Gnome WM

## Оновлення з поточного Gnome 2.32

```
# pacman -Syu

```

```
# pacman -S gnome-shell

```

## Нове встановлення

```
# pacman -Syu gnome

```

Додаткові програми та засоби:

```
# pacman -Syu gnome-extra

```

## Запуск GNOME

Для кращої інтеграції з системою рекомендується використовувати менеджер сеансів **GDM**

```
# pacman -S gdm

```

Щоб gdm став вашим способом авторизації за замовчуванням, змініть файл `/etc/inittab`, або ж пропишіть демона "gdm" в секцію DAEMONS файлу `/etc/[rc.conf](/index.php/Rc.conf_(%D0%A3%D0%BA%D1%80%D0%B0%D1%97%D0%BD%D1%81%D1%8C%D0%BA%D0%B0) "Rc.conf (Українська)")`. Обидва способи описані в [цієї статті](/index.php/Display_Manager_(%D0%A3%D0%BA%D1%80%D0%B0%D1%97%D0%BD%D1%81%D1%8C%D0%BA%D0%B0) "Display Manager (Українська)")

Або якщо ви віддаєте перевагу запускати X з консолі, додасте наступний рядок в файл `~/.xinitrc`

exec gnome-session

Тепер GNOME буде стартувати після наступної команди

```
$ startx

```

## Використання оболонки

### Гарячі клавіші

*   Клавіша **Windows** або **Alt+F1**: Перемикання між режимами **Огляд** і **Рабоча стільниця**
*   **Alt**+**F2**: Діалог запуску команд.
*   **Alt**+**Tab**: Діалог перемикання вікно подальші натиснення **Alt**-**Tab** будуть гортати відкриті вікна в прямому порядку **Alt**+**Shift**+**Tab** - у зворотному.

*   **Alt**+**Клавіша над Tab**: Перемикання між вікнами одного і того ж додатка.

*   **Ctrl**+**Alt**+**Tab**: Діалог перемикання універсального доступу
*   **Ctrl**+**Shift**+**Alt**+**R**: Запуск і завершення запису знімків екрану
*   **Ctrl**+**Alt**+**Up**/**Down arrow**: Перемикання між робочими просторами
*   **Ctrl**+**Alt**+**Shift**+**Up**/**Down arrow**: Перенести додаток в інший робочий простір

Докладнішу інформацію можна знайти [https://live.gnome.org/GnomeShell/CheatSheet](https://live.gnome.org/GnomeShell/CheatSheet)

## Тонке налаштування

### Використання gnome-tweak-tool

Для тонкого налаштування теми, шрифтів, кнопок у заголовку вікна, і т.д. можна скористатись додатком gnome-tweak-tool

Для встановлення gnome-tweak-tool:

```
# pacman -S gnome-tweak-tool 

```

Хороша інструкція по налаштуванню: [Customizing GNOME 3 Shell](http://www.localizator.pp.ua/2011/03/customizing-gnome-3-shell.html)

### Керування прихованими налаштуваннями

GNOME 3 - Має безліч прихованих налаштувань які можна змінити використовуючи **dconf-editor** або **gconf-editor**

### Вимкнення звуку

```
$ GSETTINGS_BACKEND=dconf gsettings set org.gnome.desktop.sound event-sounds false

```

### Налаштування гарячих клавіш

В **gconf-editor** ввімкнути org.gnome.desktop.interface "can-change-accels".

Приклад налаштування гарячої клавіші **delete** Запустіть Nautilus, виберіть будь-який файл або директорію, потім натисніть "Властивості" у контекстному меню, і тримаєте над пунктом "Перемістити в кошик" не відпускаючи, натисніть **delete** . Тепер гаряча клавіша повинна змінитися з "crtl+delete" на "delete"

### Вимкнення з меню статусу

В даний момент, Пункт **Вимкнення живлення** схований в меню статусу у верхньому правому куті. Якщо ви хочете завершити роботу з допомогою меню статусу, то потрібно натиснути клавішу **Alt** після виклику меню, тоді пункт **Режим очікування** буде автоматично замінено на пункт **Вимкнення живлення...** поки ви тримаєте клавішу **Alt**

### Ввімкнення вбудованого IM

**Empathy** - двигун, IM, потрібного GNOME 3 можна встановити:

```
#pacman -S telepathy 

```

### Керування автозапуском в GNOME 3

Налаштувати програми, які будуть запускатися під час запуску GNOME 3 можна за допомогою програми **gnome-session-properties**

### Видалення піктограми універсального доступу

По-перше приберіть сервіс з автозапуску [GNOME 3 (Українська)#Керування автозапуском в GNOME 3](/index.php/GNOME_3_(%D0%A3%D0%BA%D1%80%D0%B0%D1%97%D0%BD%D1%81%D1%8C%D0%BA%D0%B0)#.D0.9A.D0.B5.D1.80.D1.83.D0.B2.D0.B0.D0.BD.D0.BD.D1.8F_.D0.B0.D0.B2.D1.82.D0.BE.D0.B7.D0.B0.D0.BF.D1.83.D1.81.D0.BA.D0.BE.D0.BC_.D0.B2_GNOME_3 "GNOME 3 (Українська)")

Потім створіть теку **noa11y.icon@panel.ui** в **$HOME/.local/share/gnome-shell/extensions**. У цій папці створіть два файли. Перший назвіть **extension.js** і внесіть в нього наступне:

```

const Panel = imports.ui.panel;

 function main() {
 	Panel.STANDARD_TRAY_ICON_SHELL_IMPLEMENTATION['a11y'] = '';
 }

```

Другий назвіть **metadata.json** і внесіть в нього наступне:

```

{
 	"shell-version": ["3.0.1"],
 	"uuid": "noa11y.icon@panel.ui",
 	"name": "na11y",
 	"description": "Turn off the ally icon in the panel"
 }

```

Тепер перезавантажте Gnome-shell (натисніть **ALT+F2**, введіть **r** та натисніть **Enter**) І піктограма зникне . Якщо додаток перестане працювати поправте номер версії в мета-файлі відповідно до тієї версії Gnome-shell яка встановлена у вас.

### Видалення піктограми Bluetooth

По-перше приберіть сервіс з автозапуску [GNOME 3 (Українська)#Керування автозапуском в GNOME 3](/index.php/GNOME_3_(%D0%A3%D0%BA%D1%80%D0%B0%D1%97%D0%BD%D1%81%D1%8C%D0%BA%D0%B0)#.D0.9A.D0.B5.D1.80.D1.83.D0.B2.D0.B0.D0.BD.D0.BD.D1.8F_.D0.B0.D0.B2.D1.82.D0.BE.D0.B7.D0.B0.D0.BF.D1.83.D1.81.D0.BA.D0.BE.D0.BC_.D0.B2_GNOME_3 "GNOME 3 (Українська)")

Потім створіть теку **nobluetooth.icon@panel.ui** в **$HOME/.local/share/gnome-shell/extensions**. У цій папці створіть два файли. Перший назвіть **extension.js** і внесіть в нього наступне:

```

const Panel = imports.ui.panel;

 function main() {
 	Panel.STANDARD_TRAY_ICON_SHELL_IMPLEMENTATION['bluetooth'] = '';
 }

```

Другий назвіть **metadata.json** і внесіть в нього наступне:

```

{
 	"shell-version": ["3.0.1"],
 	"uuid": "nobluetooth.icon@panel.ui",
 	"name": "nbluetooth",
 	"description": "Turn off the bluetooth icon in the panel"
 }

```

Тепер перезавантажте Gnome-shell (натисніть **ALT+F2**, введіть **r** та натисніть **Enter**) І піктограма зникне . Якщо додаток перестане працювати поправте номер версії в мета-файлі відповідно до тієї версії Gnome-shell яка встановлена у вас.

### Налаштування рядка адреси в Nautilus

Для того що б ввести шлях вручну необхідно натиснути Ctrl+L. Для того що б зробити дане відображення за замовчуванням, можна скористатися gsettings.

```
gsettings set org.gnome.nautilus.preferences always-use-location-entry true

```

### Встановлення шпалер через gsettings

Приклад встановлення для /usr/share/backgrounds/gnome/SundownDunes.jpg

```
$ GSETTINGS_BACKEND=dconf gsettings get org.gnome.desktop.background picture-uri
$ GSETTINGS_BACKEND=dconf gsettings set org.gnome.desktop.background picture-uri "file:///usr/share/backgrounds/gnome/SundownDunes.jpg"

```

### Встановлення емулятора терміналу за замовчуванням, термінальною командою

`gsettings`, замінює `gconftool-2` в Gnome 3, і може використовуватися і для ручного завдання програми емулятора терміналу за замовчуванням.

Приклад для [urxvt](/index.php/Rxvt-unicode "Rxvt-unicode"):

```
gsettings set org.gnome.desktop.default-applications.terminal exec urxvtc
gsettings set org.gnome.desktop.default-applications.terminal exec-arg "'-e'"

```

### Видалення каталогів з секції "Комп'ютер " у бічній панелі Nautilus

Показані каталоги визначаються в `~/.config/user-dirs.dirs` і можуть бути змінені будь-яким редактором. Запуск `xdg-user-dirs-update` поверне все на свої місця, що може бути попереджено встановленням прав доступу до файлу в режим тільки для читання.

## Вирішення проблем

### Програми GTK2 + не стартують

Це зазвичай відбувається коли встановлено **oxygen-gtk**. Тема конфліктує з GNOME 3 та налаштуваннями GTK3, в даному випадку повідомлення про помилку має виглядати схоже на:

```
 (firefox-bin:14345): GLib-GObject-WARNING **: invalid (NULL) pointer instance

(firefox-bin:14345): GLib-GObject-CRITICAL **: g_signal_connect_data: assertion `G_TYPE_CHECK_INSTANCE (instance)' failed

(firefox-bin:14345): Gdk-CRITICAL **: IA__gdk_screen_get_default_colormap: assertion `GDK_IS_SCREEN (screen)' failed

(firefox-bin:14345): Gdk-CRITICAL **: IA__gdk_colormap_get_visual: assertion `GDK_IS_COLORMAP (colormap)' failed

(firefox-bin:14345): Gdk-CRITICAL **: IA__gdk_screen_get_default_colormap: assertion `GDK_IS_SCREEN (screen)' failed

(firefox-bin:14345): Gdk-CRITICAL **: IA__gdk_screen_get_root_window: assertion `GDK_IS_SCREEN (screen)' failed

(firefox-bin:14345): Gdk-CRITICAL **: IA__gdk_screen_get_root_window: assertion `GDK_IS_SCREEN (screen)' failed

(firefox-bin:14345): Gdk-CRITICAL **: IA__gdk_window_new: assertion `GDK_IS_WINDOW (parent)' failed
Segmentation fault

```

Вирішенням цієї проблеми є - видалення **oxygen-gtk** та використання іншої теми оформлення

```
# pacman -R oxygen-gtk

```

### Немає звукових подій для Empathy та інших програм

Пакет **sound-theme-freedesktop** повинна бути встановлена, для подій за замовчуванням

```
 # pacman -S sound-theme-freedesktop

```

## Налагодження Gnome 3

Gnome 3 Включає кілька налагоджувальних можливостей таких як консоль javascript і деякі корисні команди

### Налагоджувальна консоль Gnome 3

Для виклику налагоджувальної консолі Gnome 3 необхідно набрати **lg** після натискання Alt+F2

Інструкція по використанню налагоджувальних засобів консолі [https://live.gnome.org/GnomeShell/LookingGlass](https://live.gnome.org/GnomeShell/LookingGlass)

### Інші команди налагодження

*   Команда **r** у вікні введення Alt+F2 - Перезапуск Gnome 3, можна використовувати після внесення зміні у Javascript код Gnome 3.
*   Команда **rt** у вікні введення Alt+F2 - Перезапуск теми Gnome 3