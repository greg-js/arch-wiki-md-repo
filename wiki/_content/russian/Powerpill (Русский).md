Powerpill - это оболочка [pacman](/index.php/Pacman_(%D0%A0%D1%83%D1%81%D1%81%D0%BA%D0%B8%D0%B9) "Pacman (Русский)"), которая использует параллельную и сегментированную загрузку, чтобы ускорить загрузку пакетов. Для достижения этой цели используются Aria2 и [Reflector](/index.php/Reflector_(%D0%A0%D1%83%D1%81%D1%81%D0%BA%D0%B8%D0%B9) "Reflector (Русский)"). Powerpill также может использовать [rsync](/index.php/Rsync "Rsync") для официальных зеркал, которые его поддерживают. Это может быть эффективно для пользователей, которые уже используют полную полосу пропускания при скачивании с одного зеркала. [Pacserve](/index.php/Pacserve "Pacserve") также поддерживается с помощью файла настроек и будет использоваться перед загрузкой из внешних зеркал. Пример: выполняете команду _pacman -Syu_, сообщается список из 20 пакетов которые доступны для обновления, общим размером 200 МегаБайт. Если загружать их с помощью Pacman, они будут загружаться в порядке очереди по одному. Если загружать их с помощью Powerpill, они будут загружаться одновременно, во многих случаях в несколько раз быстрее (в зависимости от скорости соединения, наличии пакетов на серверах, и скоростью от сервера / нагрузки, и т.д.)

Испытание "Pacman против Powerpill" на одной системе показало 4Х ускорение, загрузка Pacman в среднем 300 кБ / сек, и powerpill загрузка в среднем 1.2 Мб / сек.

## Contents

*   [1 Установка](#.D0.A3.D1.81.D1.82.D0.B0.D0.BD.D0.BE.D0.B2.D0.BA.D0.B0)
*   [2 Настройка](#.D0.9D.D0.B0.D1.81.D1.82.D1.80.D0.BE.D0.B9.D0.BA.D0.B0)
*   [3 С помощью Reflector](#.D0.A1_.D0.BF.D0.BE.D0.BC.D0.BE.D1.89.D1.8C.D1.8E_Reflector)
*   [4 С помощью rsync](#.D0.A1_.D0.BF.D0.BE.D0.BC.D0.BE.D1.89.D1.8C.D1.8E_rsync)
*   [5 Основы использования](#.D0.9E.D1.81.D0.BD.D0.BE.D0.B2.D1.8B_.D0.B8.D1.81.D0.BF.D0.BE.D0.BB.D1.8C.D0.B7.D0.BE.D0.B2.D0.B0.D0.BD.D0.B8.D1.8F)
    *   [5.1 Обновление системы](#.D0.9E.D0.B1.D0.BD.D0.BE.D0.B2.D0.BB.D0.B5.D0.BD.D0.B8.D0.B5_.D1.81.D0.B8.D1.81.D1.82.D0.B5.D0.BC.D1.8B)
    *   [5.2 Установка пакетов](#.D0.A3.D1.81.D1.82.D0.B0.D0.BD.D0.BE.D0.B2.D0.BA.D0.B0_.D0.BF.D0.B0.D0.BA.D0.B5.D1.82.D0.BE.D0.B2)
*   [6 Решение проблем](#.D0.A0.D0.B5.D1.88.D0.B5.D0.BD.D0.B8.D0.B5_.D0.BF.D1.80.D0.BE.D0.B1.D0.BB.D0.B5.D0.BC)
*   [7 Смотрите также](#.D0.A1.D0.BC.D0.BE.D1.82.D1.80.D0.B8.D1.82.D0.B5_.D1.82.D0.B0.D0.BA.D0.B6.D0.B5)

## Установка

Вы можете установить пакет из [AUR](/index.php/AUR_(%D0%A0%D1%83%D1%81%D1%81%D0%BA%D0%B8%D0%B9) "AUR (Русский)") [powerpill](https://aur.archlinux.org/packages/powerpill/) или непосредственно из [репозитория Xyne](http://xyne.archlinux.ca/repos/).

## Настройка

Powerpill имеет один файл настроек `/etc/powerpill/powerpill.json` отредактируйте его по своему вкусу. Обратитесь к пользовательской странице документации man _powerpill.json_ .

## С помощью Reflector

По умолчанию, Powerpill настроен на использование [Reflector](/index.php/Reflector_(%D0%A0%D1%83%D1%81%D1%81%D0%BA%D0%B8%D0%B9) "Reflector (Русский)") чтобы получить текущий список зеркал из веб-API сервера Arch Linux и использовать их для параллельных загрузок. Для значительных улучшений скорости, убедитесь, что есть достаточно серверов в списке.

## С помощью rsync

Некоторые зеркала поддерживают Rsync. Когда он включен, синхронизация базы данных (`pacman -Sy`) и другие операции могут выполняться значительно быстрее, так как используется одно соединение. Сам протокол _rsync_ также ускоряет проверку обновлений, а иногда и передачу файлов.

Чтобы найти подходящее зеркало с поддержкой _rsync_, используйте _reflector_:

```
$ reflector -p rsync

```

Кроме того, воспользуйтесь этим, чтобы отфильтровать быстро количество серверов _n_ (опция `-f`) так же _m_ количество недавно обновленных серверов (опция `-l`):

```
$ reflector -p rsync -f _n_ -l _m_

```

Выберите какое хотите использовать зеркало(а). Опция `-c` также может быть использована для фильтрации по вашей стране (`reflector --list-countries` чтобы увидеть полный список, используйте имя в кавычках с учетом регистра!). После этого, отредактируйте `/etc/powerpill/powerpill.json`, прокрутите вниз до секции _rsync_, и добавить столько серверов, сколько хотите, в поле server.

После этого, все официальные базы данных и пакеты будут загружены из _Rsync_ сервера когда это возможно.

## Основы использования

Для большинства операций, _powerpill_ работает как Pacman, так как он является оболочкой сценария_pacman_.

### Обновление системы

Чтобы обновить систему (синхронизировать и обновить установленные пакеты) используйте powerpill и опцию `-Syu` - как вы делаете это с _pacman_:

```
# powerpill -Syu

```

### Установка пакетов

Чтобы установить пакет и его зависимости, просто используйте powerpill (вместо _pacman_) с опцией `-S`:

```
# powerpill -S _package_

```

Вы также можете установить несколько пакетов, как и при работе с _pacman_:

```
# powerpill -S _package1_ _package2_ _package3_

```

## Решение проблем

Получение [err] для файлов <repo>.db.sig:

```
   b5d7d7|ERR |       0B/s|/var/lib/pacman/sync/extra.db.sig
   899e91|ERR |       0B/s|/var/lib/pacman/sync/multilib.db.sig
   8fcc32|ERR |       0B/s|/var/lib/pacman/sync/core.db.sig
   85eb3d|ERR |       0B/s|/var/lib/pacman/sync/community.db.sig

```

Это происходит потому, что нет файлов подписей для этого репозитория, и вы не установили:

```
   SigLevel = PackageRequired

```

в /etc/pacman.conf как описано в этом [посте из форума Arch (En)](https://bbs.archlinux.org/viewtopic.php?pid=1254940#p1254940)

## Смотрите также

*   [Powerpill](http://xyne.archlinux.ca/projects/powerpill/) - официальная страница проекта
*   [[1]](http://archlinux.org.ru/forum/topic/15195/) - Быстрая загрузка пакетов, при помощи Powerpill (Рус.)
*   [powerpill reborn](https://bbs.archlinux.org/viewtopic.php?id=153818) - powerpill is back :)