Ссылки по теме

*   [Экранный менеджер](/index.php/%D0%AD%D0%BA%D1%80%D0%B0%D0%BD%D0%BD%D1%8B%D0%B9_%D0%BC%D0%B5%D0%BD%D0%B5%D0%B4%D0%B6%D0%B5%D1%80 "Экранный менеджер")
*   [KDE (Русский)](/index.php/KDE_(%D0%A0%D1%83%D1%81%D1%81%D0%BA%D0%B8%D0%B9) "KDE (Русский)")

**Состояние перевода:** На этой странице представлен перевод статьи [SDDM](/index.php/SDDM "SDDM"). Дата последней синхронизации: 2015-06-29\. Вы можете [помочь](/index.php/ArchWiki_Translation_Team_(%D0%A0%D1%83%D1%81%D1%81%D0%BA%D0%B8%D0%B9) "ArchWiki Translation Team (Русский)") синхронизировать перевод, если в английской версии произошли [изменения](https://wiki.archlinux.org/index.php?title=SDDM&diff=0&oldid=379176).

SDDM ([простой десктопный экранный менеджер](https://en.wikipedia.org/wiki/Simple_Desktop_Display_Manager Plasma desktop. Из английской Википедии:

	*Simple Desktop Display Manager (SDDM) - это дисплейный менеджер (программа для графического логин скрина) для X11\. SDDM был написан с нуля на языке C++11 и поддерживает установку тем через QML. SDDM является заменой устаревшему KDE Display Manager и интегрируется в KDE Frameworks 5, KDE Plasma 5 и KDE Applications 5.*

## Contents

*   [1 Установка](#.D0.A3.D1.81.D1.82.D0.B0.D0.BD.D0.BE.D0.B2.D0.BA.D0.B0)
*   [2 Настройка](#.D0.9D.D0.B0.D1.81.D1.82.D1.80.D0.BE.D0.B9.D0.BA.D0.B0)
    *   [2.1 Автоматический вход в систему](#.D0.90.D0.B2.D1.82.D0.BE.D0.BC.D0.B0.D1.82.D0.B8.D1.87.D0.B5.D1.81.D0.BA.D0.B8.D0.B9_.D0.B2.D1.85.D0.BE.D0.B4_.D0.B2_.D1.81.D0.B8.D1.81.D1.82.D0.B5.D0.BC.D1.83)
    *   [2.2 Настройки темы](#.D0.9D.D0.B0.D1.81.D1.82.D1.80.D0.BE.D0.B9.D0.BA.D0.B8_.D1.82.D0.B5.D0.BC.D1.8B)
        *   [2.2.1 Главная тема](#.D0.93.D0.BB.D0.B0.D0.B2.D0.BD.D0.B0.D1.8F_.D1.82.D0.B5.D0.BC.D0.B0)
        *   [2.2.2 Редактирование тем](#.D0.A0.D0.B5.D0.B4.D0.B0.D0.BA.D1.82.D0.B8.D1.80.D0.BE.D0.B2.D0.B0.D0.BD.D0.B8.D0.B5_.D1.82.D0.B5.D0.BC)
        *   [2.2.3 Курсор мыши](#.D0.9A.D1.83.D1.80.D1.81.D0.BE.D1.80_.D0.BC.D1.8B.D1.88.D0.B8)
        *   [2.2.4 Изменение вашего аватара](#.D0.98.D0.B7.D0.BC.D0.B5.D0.BD.D0.B5.D0.BD.D0.B8.D0.B5_.D0.B2.D0.B0.D1.88.D0.B5.D0.B3.D0.BE_.D0.B0.D0.B2.D0.B0.D1.82.D0.B0.D1.80.D0.B0)
    *   [2.3 Numlock](#Numlock)
    *   [2.4 Настройка GUI](#.D0.9D.D0.B0.D1.81.D1.82.D1.80.D0.BE.D0.B9.D0.BA.D0.B0_GUI)
*   [3 Решение проблем](#.D0.A0.D0.B5.D1.88.D0.B5.D0.BD.D0.B8.D0.B5_.D0.BF.D1.80.D0.BE.D0.B1.D0.BB.D0.B5.D0.BC)
    *   [3.1 Зависания после входа](#.D0.97.D0.B0.D0.B2.D0.B8.D1.81.D0.B0.D0.BD.D0.B8.D1.8F_.D0.BF.D0.BE.D1.81.D0.BB.D0.B5_.D0.B2.D1.85.D0.BE.D0.B4.D0.B0)
    *   [3.2 Не работают эффекты рабочего стола в KDE Plasma](#.D0.9D.D0.B5_.D1.80.D0.B0.D0.B1.D0.BE.D1.82.D0.B0.D1.8E.D1.82_.D1.8D.D1.84.D1.84.D0.B5.D0.BA.D1.82.D1.8B_.D1.80.D0.B0.D0.B1.D0.BE.D1.87.D0.B5.D0.B3.D0.BE_.D1.81.D1.82.D0.BE.D0.BB.D0.B0_.D0.B2_KDE_Plasma)
    *   [3.3 SDDM запускается на tty1, а не на tty7](#SDDM_.D0.B7.D0.B0.D0.BF.D1.83.D1.81.D0.BA.D0.B0.D0.B5.D1.82.D1.81.D1.8F_.D0.BD.D0.B0_tty1.2C_.D0.B0_.D0.BD.D0.B5_.D0.BD.D0.B0_tty7)
    *   [3.4 Один или более пользователей не отображаются на экране приветствия](#.D0.9E.D0.B4.D0.B8.D0.BD_.D0.B8.D0.BB.D0.B8_.D0.B1.D0.BE.D0.BB.D0.B5.D0.B5_.D0.BF.D0.BE.D0.BB.D1.8C.D0.B7.D0.BE.D0.B2.D0.B0.D1.82.D0.B5.D0.BB.D0.B5.D0.B9_.D0.BD.D0.B5_.D0.BE.D1.82.D0.BE.D0.B1.D1.80.D0.B0.D0.B6.D0.B0.D1.8E.D1.82.D1.81.D1.8F_.D0.BD.D0.B0_.D1.8D.D0.BA.D1.80.D0.B0.D0.BD.D0.B5_.D0.BF.D1.80.D0.B8.D0.B2.D0.B5.D1.82.D1.81.D1.82.D0.B2.D0.B8.D1.8F)
    *   [3.5 SDDM грузит только US раскладку клавиатуры](#SDDM_.D0.B3.D1.80.D1.83.D0.B7.D0.B8.D1.82_.D1.82.D0.BE.D0.BB.D1.8C.D0.BA.D0.BE_US_.D1.80.D0.B0.D1.81.D0.BA.D0.BB.D0.B0.D0.B4.D0.BA.D1.83_.D0.BA.D0.BB.D0.B0.D0.B2.D0.B8.D0.B0.D1.82.D1.83.D1.80.D1.8B)

## Установка

[Установите](/index.php/%D0%A3%D1%81%D1%82%D0%B0%D0%BD%D0%BE%D0%B2%D0%B8%D1%82%D0%B5 "Установите") пакет [sddm](https://www.archlinux.org/packages/?name=sddm).

Теперь следуйте инструкциям из раздела [Экранный менеджер#Запуск экранного менеджера](/index.php/%D0%AD%D0%BA%D1%80%D0%B0%D0%BD%D0%BD%D1%8B%D0%B9_%D0%BC%D0%B5%D0%BD%D0%B5%D0%B4%D0%B6%D0%B5%D1%80#.D0.97.D0.B0.D0.BF.D1.83.D1.81.D0.BA_.D1.8D.D0.BA.D1.80.D0.B0.D0.BD.D0.BD.D0.BE.D0.B3.D0.BE_.D0.BC.D0.B5.D0.BD.D0.B5.D0.B4.D0.B6.D0.B5.D1.80.D0.B0 "Экранный менеджер"), чтобы запускать SDDM при загрузке.

## Настройка

Настройки SDDM хранятся в файле `/etc/sddm.conf`. Для получения полного списка настроек смотрите страницу справочного руководства [sddm.conf(5)](http://jlk.fjfi.cvut.cz/arch/manpages/man/sddm.conf.5).

На системах с [systemd](/index.php/Systemd_(%D0%A0%D1%83%D1%81%D1%81%D0%BA%D0%B8%D0%B9) "Systemd (Русский)") всё должно работать из коробки, так как для управления сессиями SDDM по умолчанию использует `systemd-logind`. Поэтому при установке пакета конфигурационный файл не создаётся. Однако SDDM предоставляет команду для генерации примера конфигурационного файла с настройками по умолчанию для тех, кому это может понадобиться:

```
# sddm --example-config > /etc/sddm.conf

```

### Автоматический вход в систему

SDDM поддерживает автовход. Для этого настройте конфигурационный файл, например, так:

 `/etc/sddm.conf` 
```
[Autologin]
User=john
Session=plasma.desktop
```

Если в папке /usr/share/xsessions/ Вместо plasma.desktop есть файл kde-plasma.desktop напишите

 `/etc/sddm.conf` 
```
[Autologin]
User=john
Session=kde-plasma.desktop
```

С этой конфигурацией при загрузке системы будет происходить автовход в сессию KDE Plasma для пользователя `john`. Доступные типы сессий можно посмотреть в каталоге `/usr/share/xsessions/`.

**Важно:** При неправильной настройке автоматический вход сделает взлом вашего ноутбука элементарным для того, кто имеет к нему физический доступ. Включайте автовход только если у вас активирован другой способ аутентификации, например, пароль для [расшифровки файловой системы](/index.php/System_Encryption_with_LUKS_(%D0%A0%D1%83%D1%81%D1%81%D0%BA%D0%B8%D0%B9) "System Encryption with LUKS (Русский)").

Если включить автовход в KDE Plasma, то исчезнет возможность блокировки сессии [(по крайней мере в данный момент это так)](https://github.com/sddm/sddm/issues/306).

Вы можете добавить маленький скрипт, который активирует скринсейвер KDE при автозапуске в качестве обходного пути:

```
#!/bin/bash                                                                                                                                                         
/usr/bin/qdbus-qt4 org.kde.screensaver /ScreenSaver SetActive true &
exit 0

```

### Настройки темы

Настройки темы могут быть изменены в секции `[Theme]`.

Некоторые темы доступны в [AUR](/index.php/AUR "AUR"), например [archlinux-themes-sddm](https://aur.archlinux.org/packages/archlinux-themes-sddm/).

#### Главная тема

Установите главную тему с помощью значения `Current`, например `Current=archlinux-simplyblack`.

#### Редактирование тем

Каталогом тем для SDDM по умолчанию является `/usr/share/sddm/themes/`. Вы можете добавить свои собственные темы в подкаталог этого каталога. Изучите установленные файлы для их изменения или создания собственной темы.

#### Курсор мыши

Чтобы задать тему для курсора мыши, установите `CursorTheme` на предпочитаемую вами тему курсоров.

#### Изменение вашего аватара

Вы можете просто положить png изображение с названием `username.face.icon` в директорию по умолчанию `/usr/share/sddm/faces/`. В качестве альтернативы, вы можете изменить директорию по умолчанию в соответствии с вашими желаниями, например, `FacesDir=/var/lib/AccountsService/icons/`.

### Numlock

Если вы хотите, чтобы Numlock автоматически включался, пропишите `Numlock=on` в секции `[General]`.

### Настройка GUI

*   Системные настройки KDE Frameworks содержат конфигурационный модуль для SDDM. Установите пакет [sddm-kcm](https://www.archlinux.org/packages/?name=sddm-kcm), чтобы использовать его.
*   В AUR есть [sddm-config-editor-git](https://aur.archlinux.org/packages/sddm-config-editor-git/), основанный на Qt.

## Решение проблем

### Зависания после входа

Попробуйте удалить *~/.Xauthority*.

### Не работают эффекты рабочего стола в KDE Plasma

Когда я сменил KDM на SDDM и залогинился в KDE Plasma 4, исчезли эффекты рабочего стола, и их невозможно было включить. Оказалось, что SDDM по ошибке запускал KDE Plasma в *безопасном* режиме. Если вы не можете включить эффекты рабочего стола, завершите сеанс и проверьте на экране SDDM, что в списке выбрана нужная сессия, после чего снова войдите в систему.

### SDDM запускается на tty1, а не на tty7

SDDM следует [конвенции systemd](http://0pointer.de/blog/projects/serial-console.html), в которой первую графическую сессию запускают на tty1\. Если вы предпочитаете старую конвенцию, в которой телетайпы с первого по шестой зарезервированы для текстовых консолей, добавьте следующее в ваш `sddm.conf`:

 `/etc/sddm.conf` 
```
[XDisplay]
MinimumVT=7
```

### Один или более пользователей не отображаются на экране приветствия

По умолчанию SDDM отображает только тех пользователей, у которых UID находится в пределах от 1000 до 65000, если UID нужных вам пользователей ниже, чем это значение, то вам нужно будет изменить этот диапазон. Модифицируйте ваш `sddm.conf` следующим образом (например, для пользователя с UID равным 501):

 `/etc/sddm.conf` 
```
[Users]
HideShells=/sbin/nologin,/bin/false
# Скрытые пользователи, это для того, если какие-либо системные пользователи попадают в ваш диапазон, смотрите /etc/passwd на вашей системе.
HideUsers=git,sddm,systemd-journal-remote,systemd-journal-upload

# Максимальный user id для отображаемых пользователей
MaximumUid=65000

# Минимальный user id для отображаемых пользователей
MinimumUid=500 #Мой UID равен 501
```

### SDDM грузит только US раскладку клавиатуры

SDDM грузит раскладку клавиатуры, заданную в `/etc/X11/xorg.conf.d/00-keyboard.conf`. Вы можете сгенерировать этот конфигурационный файл командой `localectl set-x11-keymap`. Прочтите [Keyboard configuration in Xorg](/index.php/Keyboard_configuration_in_Xorg "Keyboard configuration in Xorg") для дополнительной информации.