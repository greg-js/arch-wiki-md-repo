**Состояние перевода:** На этой странице представлен перевод статьи [Keyboard configuration in console](/index.php/Keyboard_configuration_in_console "Keyboard configuration in console"). Дата последней синхронизации: 23 июля 2017\. Вы можете [помочь](/index.php/ArchWiki_Translation_Team_(%D0%A0%D1%83%D1%81%D1%81%D0%BA%D0%B8%D0%B9) "ArchWiki Translation Team (Русский)") синхронизировать перевод, если в английской версии произошли [изменения](https://wiki.archlinux.org/index.php?title=Keyboard_configuration_in_console&diff=0&oldid=482706).

Ссылки по теме

*   [Конфигурация клавиатуры в Xorg](/index.php/%D0%9A%D0%BE%D0%BD%D1%84%D0%B8%D0%B3%D1%83%D1%80%D0%B0%D1%86%D0%B8%D1%8F_%D0%BA%D0%BB%D0%B0%D0%B2%D0%B8%D0%B0%D1%82%D1%83%D1%80%D1%8B_%D0%B2_Xorg "Конфигурация клавиатуры в Xorg")
*   [Дополнительные клавиши](/index.php/%D0%94%D0%BE%D0%BF%D0%BE%D0%BB%D0%BD%D0%B8%D1%82%D0%B5%D0%BB%D1%8C%D0%BD%D1%8B%D0%B5_%D0%BA%D0%BB%D0%B0%D0%B2%D0%B8%D1%88%D0%B8 "Дополнительные клавиши")
*   [Шрифты#Шрифт в консоли](/index.php/%D0%A8%D1%80%D0%B8%D1%84%D1%82%D1%8B#.D0.A8.D1.80.D0.B8.D1.84.D1.82_.D0.B2_.D0.BA.D0.BE.D0.BD.D1.81.D0.BE.D0.BB.D0.B8 "Шрифты")

**Примечание:** В этой статье описана лишь базовая настройка без модификации раскладок, назначения действий для дополнительных клавиш и т.п. Информацию по этим темам можно найти в статье [Дополнительные клавиши](/index.php/%D0%94%D0%BE%D0%BF%D0%BE%D0%BB%D0%BD%D0%B8%D1%82%D0%B5%D0%BB%D1%8C%D0%BD%D1%8B%D0%B5_%D0%BA%D0%BB%D0%B0%D0%B2%D0%B8%D1%88%D0%B8 "Дополнительные клавиши")

Сопоставление клавиш (раскладки) для [виртуальной консоли](https://en.wikipedia.org/wiki/ru:%D0%92%D0%B8%D1%80%D1%82%D1%83%D0%B0%D0%BB%D1%8C%D0%BD%D0%B0%D1%8F_%D0%BA%D0%BE%D0%BD%D1%81%D0%BE%D0%BB%D1%8C "w:ru:Виртуальная консоль"), консольных шрифтов и консольных карт предоставляется пакетом [kbd](https://www.archlinux.org/packages/?name=kbd) (зависимость от [systemd](/index.php/Systemd_(%D0%A0%D1%83%D1%81%D1%81%D0%BA%D0%B8%D0%B9) "Systemd (Русский)")), который также предоставляет множество инструментов низкого уровня для управления виртуальной консолью. Кроме того, *systemd* также предоставляет инструмент *localectl*, который может контролировать как [локали](/index.php/Locale_(%D0%A0%D1%83%D1%81%D1%81%D0%BA%D0%B8%D0%B9) "Locale (Русский)") системы, так и настройки раскладки клавиатуры как для виртуальной консоли, так и для Xorg.

## Contents

*   [1 Просмотр настроек клавиатуры](#.D0.9F.D1.80.D0.BE.D1.81.D0.BC.D0.BE.D1.82.D1.80_.D0.BD.D0.B0.D1.81.D1.82.D1.80.D0.BE.D0.B5.D0.BA_.D0.BA.D0.BB.D0.B0.D0.B2.D0.B8.D0.B0.D1.82.D1.83.D1.80.D1.8B)
*   [2 Настройка раскладки клавиатуры](#.D0.9D.D0.B0.D1.81.D1.82.D1.80.D0.BE.D0.B9.D0.BA.D0.B0_.D1.80.D0.B0.D1.81.D0.BA.D0.BB.D0.B0.D0.B4.D0.BA.D0.B8_.D0.BA.D0.BB.D0.B0.D0.B2.D0.B8.D0.B0.D1.82.D1.83.D1.80.D1.8B)
    *   [2.1 Коды клавиш](#.D0.9A.D0.BE.D0.B4.D1.8B_.D0.BA.D0.BB.D0.B0.D0.B2.D0.B8.D1.88)
    *   [2.2 Постоянная конфигурация](#.D0.9F.D0.BE.D1.81.D1.82.D0.BE.D1.8F.D0.BD.D0.BD.D0.B0.D1.8F_.D0.BA.D0.BE.D0.BD.D1.84.D0.B8.D0.B3.D1.83.D1.80.D0.B0.D1.86.D0.B8.D1.8F)
    *   [2.3 Временная конфигурация](#.D0.92.D1.80.D0.B5.D0.BC.D0.B5.D0.BD.D0.BD.D0.B0.D1.8F_.D0.BA.D0.BE.D0.BD.D1.84.D0.B8.D0.B3.D1.83.D1.80.D0.B0.D1.86.D0.B8.D1.8F)
*   [3 Регулировка typematic задержки и скорости](#.D0.A0.D0.B5.D0.B3.D1.83.D0.BB.D0.B8.D1.80.D0.BE.D0.B2.D0.BA.D0.B0_typematic_.D0.B7.D0.B0.D0.B4.D0.B5.D1.80.D0.B6.D0.BA.D0.B8_.D0.B8_.D1.81.D0.BA.D0.BE.D1.80.D0.BE.D1.81.D1.82.D0.B8)
    *   [3.1 Служба systemd](#.D0.A1.D0.BB.D1.83.D0.B6.D0.B1.D0.B0_systemd)

## Просмотр настроек клавиатуры

Используйте `localectl status` для просмотра текущих конфигураций клавиатуры.

## Настройка раскладки клавиатуры

### Коды клавиш

Обычно один файл keymap соответствует одной раскладке клавиатуры (оператор `include` может использоваться для совместного использования общих частей, а файл keymap может содержать несколько макетов с некоторой комбинацией клавиш, используемой для переключения). Файлы раскладок хранятся в дереве каталогов `/usr/share/kbd/keymaps/`.

Соглашения об именах консольных раскладок несколько условны, но обычно они основаны на:

*   [Коды языков](https://en.wikipedia.org/wiki/ru:ISO_639-1 "w:ru:ISO 639-1"): где код языка совпадает с кодом страны (например, `ru` для русского языка или `fr` для французского языка).
*   [Коды стран](https://en.wikipedia.org/wiki/ru:%D0%9A%D0%BE%D0%B4_%D1%81%D1%82%D1%80%D0%B0%D0%BD%D1%8B "w:ru:Код страны"): где варианты одного и того же языка используются в разных странах (например, `uk` для английского языка в Великобритании или `us` для Соединенных Штатов Америки); список кодов стран также можно найти в [w:ru:ISO 3166-1#Список кодов по ISO 3166](https://en.wikipedia.org/wiki/ru:ISO_3166-1#.D0.A1.D0.BF.D0.B8.D1.81.D0.BE.D0.BA_.D0.BA.D0.BE.D0.B4.D0.BE.D0.B2_.D0.BF.D0.BE_ISO_3166 "w:ru:ISO 3166-1").
*   [Раскладка клавиатуры](https://en.wikipedia.org/wiki/ru:%D0%A0%D0%B0%D1%81%D0%BA%D0%BB%D0%B0%D0%B4%D0%BA%D0%B0_%D0%BA%D0%BB%D0%B0%D0%B2%D0%B8%D0%B0%D1%82%D1%83%D1%80%D1%8B "w:ru:Раскладка клавиатуры"): где раскладка не связана с конкретной страной или языком (например, `dvorak` для [раскладки клавиатуры Dvorak](https://en.wikipedia.org/wiki/ru:%D0%9A%D0%BB%D0%B0%D0%B2%D0%B8%D0%B0%D1%82%D1%83%D1%80%D0%B0_%D0%94%D0%B2%D0%BE%D1%80%D0%B0%D0%BA%D0%B0 "w:ru:Клавиатура Дворака")).

Для получения списка всех доступных раскладок используйте команду:

```
$ localectl list-keymaps

```

Чтобы найти раскладку клавиатуры, используйте следующую команду, заменив `*search_term*` кодом для вашего языка, страны или раскладки:

```
$ localectl list-keymaps | grep -i *search_term*

```

Альтернативно, используя find:

```
$ find /usr/share/kbd/keymaps/ -type f

```

### Постоянная конфигурация

Постоянную комбинацию клавиш можно установить в `/etc/vconsole.conf`, которая считывается [systemd](/index.php/Systemd_(%D0%A0%D1%83%D1%81%D1%81%D0%BA%D0%B8%D0%B9) "Systemd (Русский)") при запуске. Для указания раскладки используется переменная `KEYMAP`. Если переменная пуста или не установлена, в качестве значения по умолчанию используется комбинация клавиш `us`. Смотрите [vconsole.conf(5)](http://jlk.fjfi.cvut.cz/arch/manpages/man/vconsole.conf.5) для получения информации обо всех параметрах. Например:

 `/etc/vconsole.conf` 
```
KEYMAP=uk
...

```

Для удобства, *localectl* можно использовать для настройки раскладки клавиатуры. Он изменит переменную `KEYMAP` в `/etc/vconsole.conf`, а также установит раскладку для текущего сеанса:

```
$ localectl set-keymap --no-convert *keymap*

```

Опцию `--no-convert` можно использовать для предотвращения `localectl` автоматического изменения [раскладки клавиатуры Xorg](/index.php/Keyboard_configuration_in_Xorg_(%D0%A0%D1%83%D1%81%D1%81%D0%BA%D0%B8%D0%B9) "Keyboard configuration in Xorg (Русский)") до ближайшего совпадения. Для получения допольнительной информации смотрите [localectl(1)](http://jlk.fjfi.cvut.cz/arch/manpages/man/localectl.1).

### Временная конфигурация

Можно установить раскладку только для текущего сеанса. Это полезно для тестирования различных раскладок, решения проблем и т.д.

Инструмент *loadkeys* используется для этой цели, он используется внутри [systemd](/index.php/Systemd_(%D0%A0%D1%83%D1%81%D1%81%D0%BA%D0%B8%D0%B9) "Systemd (Русский)") при загрузке раскладки клавиатуры, настроенной в `/etc/vconsole.conf`. Его можно использовать очень просто для этой цели:

```
# loadkeys *keymap*

```

Для получения допольнительной информации смотрите [loadkeys(1)](http://jlk.fjfi.cvut.cz/arch/manpages/man/loadkeys.1).

## Регулировка typematic задержки и скорости

*Typematic задержка* означает количество времени (обычно в милисекундах), за которое необходимо нажать и удерживать клавишу для начала повторного процесса. После запуска повторяющегося процесса символ будет повторяться с определенной частотой (обычно заданной в Гц), указанной *typematic скоростью*. Эти значения могут быть изменены с помощью команды *kbdrate*. Обратите внимание, что эти настройки настраиваются отдельно для виртуальной консоли и [для Xorg](/index.php/Keyboard_configuration_in_Xorg_(%D0%A0%D1%83%D1%81%D1%81%D0%BA%D0%B8%D0%B9)#.D0.A0.D0.B5.D0.B3.D1.83.D0.BB.D0.B8.D1.80.D0.BE.D0.B2.D0.BA.D0.B0_typematic_.D0.B7.D0.B0.D0.B4.D0.B5.D1.80.D0.B6.D0.BA.D0.B8_.D0.B8_.D1.81.D0.BA.D0.BE.D1.80.D0.BE.D1.81.D1.82.D0.B8 "Keyboard configuration in Xorg (Русский)").

```
# kbdrate [-d *delay*] [-r *rate*]

```

Например, чтобы установить typematic задержку в 200 мс и typematic скорость в 30 Гц, используйте следующую команду:

```
# kbdrate -d 200 -r 30

```

Выдача команды без указания задержки и скорости приведет к сбросу typematic значений до их соответствующих значений по умолчанию; задержка 250 мс и скорость 11 Гц:

```
# kbdrate

```

### Служба systemd

Сервис systemd можно использовать для установки скорости клавиатуры. Например

 `/etc/systemd/system/kbdrate.service` 
```

[Unit]
Description=Keyboard repeat rate in tty.

[Service]
Type=oneshot
RemainAfterExit=yes
StandardInput=tty
StandardOutput=tty
ExecStart=/usr/bin/kbdrate -s -d 450 -r 60

[Install]
WantedBy=multi-user.target

```

Затем [запустите/включите](/index.php/%D0%97%D0%B0%D0%BF%D1%83%D1%81%D1%82%D0%B8%D1%82%D0%B5/%D0%B2%D0%BA%D0%BB%D1%8E%D1%87%D0%B8%D1%82%D0%B5 "Запустите/включите") службу systemd `kbdrate.service`.