Ссылки по теме

*   [acpid](/index.php/Acpid "Acpid")
*   [systemd (Русский)](/index.php/Systemd_(%D0%A0%D1%83%D1%81%D1%81%D0%BA%D0%B8%D0%B9) "Systemd (Русский)")
*   [cpufrequtils (Русский)](/index.php/Cpufrequtils_(%D0%A0%D1%83%D1%81%D1%81%D0%BA%D0%B8%D0%B9) "Cpufrequtils (Русский)")
*   [pm-utils (Русский)](/index.php/Pm-utils_(%D0%A0%D1%83%D1%81%D1%81%D0%BA%D0%B8%D0%B9) "Pm-utils (Русский)")
*   [Laptop (Русский)](/index.php/Laptop_(%D0%A0%D1%83%D1%81%D1%81%D0%BA%D0%B8%D0%B9) "Laptop (Русский)")
*   [Powertop](/index.php/Powertop "Powertop")
*   [TLP](/index.php/TLP "TLP")

[Laptop Mode Tools](http://samwel.tk/laptop_mode/) — набор инструментов для гибкого управления энергосбережением.

## Contents

*   [1 Вступление](#.D0.92.D1.81.D1.82.D1.83.D0.BF.D0.BB.D0.B5.D0.BD.D0.B8.D0.B5)
*   [2 Установка](#.D0.A3.D1.81.D1.82.D0.B0.D0.BD.D0.BE.D0.B2.D0.BA.D0.B0)
*   [3 Включение и базовая настройка](#.D0.92.D0.BA.D0.BB.D1.8E.D1.87.D0.B5.D0.BD.D0.B8.D0.B5_.D0.B8_.D0.B1.D0.B0.D0.B7.D0.BE.D0.B2.D0.B0.D1.8F_.D0.BD.D0.B0.D1.81.D1.82.D1.80.D0.BE.D0.B9.D0.BA.D0.B0)
    *   [3.1 /etc/laptop-mode/laptop-mode.conf](#.2Fetc.2Flaptop-mode.2Flaptop-mode.conf)
*   [4 Тонкая настройка модулей](#.D0.A2.D0.BE.D0.BD.D0.BA.D0.B0.D1.8F_.D0.BD.D0.B0.D1.81.D1.82.D1.80.D0.BE.D0.B9.D0.BA.D0.B0_.D0.BC.D0.BE.D0.B4.D1.83.D0.BB.D0.B5.D0.B9)
    *   [4.1 Настройки ядра](#.D0.9D.D0.B0.D1.81.D1.82.D1.80.D0.BE.D0.B9.D0.BA.D0.B8_.D1.8F.D0.B4.D1.80.D0.B0)
    *   [4.2 Процессор](#.D0.9F.D1.80.D0.BE.D1.86.D0.B5.D1.81.D1.81.D0.BE.D1.80)
        *   [4.2.1 Управление частотой процессора](#.D0.A3.D0.BF.D1.80.D0.B0.D0.B2.D0.BB.D0.B5.D0.BD.D0.B8.D0.B5_.D1.87.D0.B0.D1.81.D1.82.D0.BE.D1.82.D0.BE.D0.B9_.D0.BF.D1.80.D0.BE.D1.86.D0.B5.D1.81.D1.81.D0.BE.D1.80.D0.B0)
        *   [4.2.2 Многоядерные процессоры](#.D0.9C.D0.BD.D0.BE.D0.B3.D0.BE.D1.8F.D0.B4.D0.B5.D1.80.D0.BD.D1.8B.D0.B5_.D0.BF.D1.80.D0.BE.D1.86.D0.B5.D1.81.D1.81.D0.BE.D1.80.D1.8B)
    *   [4.3 Устройства и шины](#.D0.A3.D1.81.D1.82.D1.80.D0.BE.D0.B9.D1.81.D1.82.D0.B2.D0.B0_.D0.B8_.D1.88.D0.B8.D0.BD.D1.8B)
        *   [4.3.1 Настройка опроса HAL](#.D0.9D.D0.B0.D1.81.D1.82.D1.80.D0.BE.D0.B9.D0.BA.D0.B0_.D0.BE.D0.BF.D1.80.D0.BE.D1.81.D0.B0_HAL)
        *   [4.3.2 Intel SATA](#Intel_SATA)
        *   [4.3.3 Автоотключение USB](#.D0.90.D0.B2.D1.82.D0.BE.D0.BE.D1.82.D0.BA.D0.BB.D1.8E.D1.87.D0.B5.D0.BD.D0.B8.D0.B5_USB)
        *   [4.3.4 Настройка EEE](#.D0.9D.D0.B0.D1.81.D1.82.D1.80.D0.BE.D0.B9.D0.BA.D0.B0_EEE)
    *   [4.4 Дисплеи и графика](#.D0.94.D0.B8.D1.81.D0.BF.D0.BB.D0.B5.D0.B8_.D0.B8_.D0.B3.D1.80.D0.B0.D1.84.D0.B8.D0.BA.D0.B0)
        *   [4.4.1 Яркость LCD дисплея](#.D0.AF.D1.80.D0.BA.D0.BE.D1.81.D1.82.D1.8C_LCD_.D0.B4.D0.B8.D1.81.D0.BF.D0.BB.D0.B5.D1.8F)
        *   [4.4.2 Затемнение терминала](#.D0.97.D0.B0.D1.82.D0.B5.D0.BC.D0.BD.D0.B5.D0.BD.D0.B8.D0.B5_.D1.82.D0.B5.D1.80.D0.BC.D0.B8.D0.BD.D0.B0.D0.BB.D0.B0)
        *   [4.4.3 Контроль видеовыходов](#.D0.9A.D0.BE.D0.BD.D1.82.D1.80.D0.BE.D0.BB.D1.8C_.D0.B2.D0.B8.D0.B4.D0.B5.D0.BE.D0.B2.D1.8B.D1.85.D0.BE.D0.B4.D0.BE.D0.B2)
    *   [4.5 Сетевые устройства](#.D0.A1.D0.B5.D1.82.D0.B5.D0.B2.D1.8B.D0.B5_.D1.83.D1.81.D1.82.D1.80.D0.BE.D0.B9.D1.81.D1.82.D0.B2.D0.B0)
        *   [4.5.1 Wireless LAN](#Wireless_LAN)
        *   [4.5.2 Bluetooth](#Bluetooth)
        *   [4.5.3 Ethernet](#Ethernet)
    *   [4.6 Аудио](#.D0.90.D1.83.D0.B4.D0.B8.D0.BE)
    *   [4.7 Батарея](#.D0.91.D0.B0.D1.82.D0.B0.D1.80.D0.B5.D1.8F)
    *   [4.8 Пользовательские методы](#.D0.9F.D0.BE.D0.BB.D1.8C.D0.B7.D0.BE.D0.B2.D0.B0.D1.82.D0.B5.D0.BB.D1.8C.D1.81.D0.BA.D0.B8.D0.B5_.D0.BC.D0.B5.D1.82.D0.BE.D0.B4.D1.8B)
        *   [4.8.1 Настройка перехода в спящий режим (гибернация)](#.D0.9D.D0.B0.D1.81.D1.82.D1.80.D0.BE.D0.B9.D0.BA.D0.B0_.D0.BF.D0.B5.D1.80.D0.B5.D1.85.D0.BE.D0.B4.D0.B0_.D0.B2_.D1.81.D0.BF.D1.8F.D1.89.D0.B8.D0.B9_.D1.80.D0.B5.D0.B6.D0.B8.D0.BC_.28.D0.B3.D0.B8.D0.B1.D0.B5.D1.80.D0.BD.D0.B0.D1.86.D0.B8.D1.8F.29)
*   [5 Хитрости](#.D0.A5.D0.B8.D1.82.D1.80.D0.BE.D1.81.D1.82.D0.B8)
*   [6 См. также](#.D0.A1.D0.BC._.D1.82.D0.B0.D0.BA.D0.B6.D0.B5)

## Вступление

Изначально Linux использовался в основном на настольных компьютерах и серверах, энергоэффективноть которых не была приоритетной задачей. Однако, с появлением компактных переносимых рабочих станций, питающихся от аккумуляторных батарей — ноутбуков, проблема излишней "прожорливости" систем встала довольно остро. Начиная с версии 2.4.43 в ядре была предпринята попытка реализовать "режим ноутбука" (*англ.* laptop mode). То есть такой режим, при котором бы снижалось энергопотребление и увеличивалось время автономной работы от батареи. Впервые ядро могло позволить жесткому диску останавливаться чаще, что и экономило энергию. Однако это требовало довольно серьезной настройки и до версии 2.6.6 laptop mode был не слишком популярен.

Однако прошло время, было придумано множество аппаратных и программных решений для экономии энергии. Из простой программы, контролирующей жёсткие диски, сформировался достаточно мощный и гибкий инструмент — Laptop Mode Tools. LMT реализует энергоэффективное управление несколькими подсистемами компьютера одновременно. Совместно с [acpid](/index.php/Acpid "Acpid"), [cpufrequtils](/index.php/Cpufrequtils_(%D0%A0%D1%83%D1%81%D1%81%D0%BA%D0%B8%D0%B9) "Cpufrequtils (Русский)") и [pm-utils](/index.php/Pm-utils_(%D0%A0%D1%83%D1%81%D1%81%D0%BA%D0%B8%D0%B9) "Pm-utils (Русский)") LMT представляет собой полноценный инструмент управления питанием ноутбука.

## Установка

Вам потребуется пакет [laptop-mode-tools](https://aur.archlinux.org/packages/laptop-mode-tools/)

```
$ yaourt -S laptop-mode-tools

```

## Включение и базовая настройка

Чтобы LMT заработал:

`# systemctl enable laptop-mode.service`

Включение и настройка производится через главный конфигурационный файл `/etc/laptop-mode/laptop-mode.conf`, а так же через индивидуальные для каждого модуля конфигурационные файлы в `/etc/laptop-mode/conf.d/*`. В последних версиях LMT можно автоматически включать общеиспользуемые настройки модулей `conf.d/*` с помощью переменной `ENABLE_AUTO_MODULES` в `/etc/laptop-mode/laptop-mode.conf`.

### /etc/laptop-mode/laptop-mode.conf

Настройки LMT по умолчанию предполагают, что вы не используете энергосберегающих функций при питании от сети. Учтите, что при использовании режима энергосбережения увеличивается срок службы некоторых частей компьютера (кроме, вероятно, жестких дисков). Снижается тепловыделение, замедляется кулер — увеличивается срок службы термопасты и снижается запыленность внутренностей. Кроме того с шумящим и постоянно греющимся устройством неудобно работать. Автор перевода лично имел счастье отковыривать процессор, пригревший к радиатору, за счет некорректно настроенного температурного режима в BIOS. Поэтому рекомендуется для любых типов компьютеров при питании от сети выставить гувернер процессора ondemand, а так же [следить](/index.php/Lm_sensors_(%D0%A0%D1%83%D1%81%D1%81%D0%BA%D0%B8%D0%B9) "Lm sensors (Русский)") за температурой внутренних устройств. Если температура достигает 80 и более градусов, следует провести профилактику (чистка от пыли, замена термопасты). При температуре компонентов свыше 115 градусов включаются встроенные средства защиты от перегрева и компьютер может произвольно выключаться, считая, что его собственное железо важнее ваших данных.

**Важно:** Некорректные опции, касающиеся жесткого диска, могут привести к его преждевременному износу, а также к потере данных. Будьте внимательны при настройке и использовании!

**Примечание:** Здесь и далее приводится адаптированный перевод конфигурационных файлов пакета Laptop Mode Tools. В данном переводе часть настроек по умолчанию **изменена**. Сам пакет утилит и его конфигурационные файлы достаточно часто обновляются и использовать данный текст как конфигурационный файл не рекомендуется.

```
###############################################################################
#
# Основной конфигурационный файл Laptop Mode Tools
# --------------------------------------------
#
# В конфигурационном файле пары опция=значение представлены следующим образом:
#    CONTROL_something=0/1   Определяет, должен ли LMT что-то контролировать
#    LM_something=value      Значение опции, когда LMT активен
#    NOLM_something=value    Значение опции, когда LMT НЕ активен
#    AC_something=value      Значение опции, если компьютер работает от сети
#    BATT_something=value    Значение опции, если компьютер работает от батареи
# В конфигурационных файлах вы можете встретить комбинации LM_/NOLM_ и AC_/BATT_
# префиксов (если их применение для данной опции возможно). С доступными опциями
# вы можете ознакомится введя команду `man laptop_mode`. Если у опции
# нет префикса LM_/ NOLM_, то она будет применяться вне зависимости от того
# активен LMT или нет.
# То же самое можно сказать и про отсутствие префиксов AC_/BATT_ — подобные опции
# будет применяться вне зависимости от того, подключено ваше устройство к сети
# или питается от батареи.
#
# Некоторые опции работают только на системах, поддерживающих ACPI. Они помечены
# как ACPI-ONLY.
#
# Обратите внимание, что этот конфигурационный файл является частью скрипта.
# Соответственно вы можете использовать элементы языка вашего командного
# интерпретатора.
#
# Модули
# ------
#
# Модули Laptop Mode Tools имеют отдельные конфигурационные файлы, которые
# находятся в `/etc/laptop-mode/conf.d`. Они имеют множество опций,
# так что вы можете настроить энергопотребление вашего устройства именно так,
# как вам хочется.
#
###############################################################################

###############################################################################
# Включение/выключение LMT
# ------------------------
# Выберите 0, чтобы полностью отключить LMT.
###############################################################################
#
ENABLE_LAPTOP_MODE_TOOLS=1

###############################################################################
# Опции отладки
# -------------
###############################################################################

#
# Выберите 1, если хотите получить дополнительную отладочную информацию, когда
# запускается/останавливается laptop_mode.
#
VERBOSE_OUTPUT=0

# Выберите 1 если хотите, чтобы лог писался в syslog
LOG_TO_SYSLOG=1

# Запуск в оболочке (shell) в режиме отладки.
# Включите, если вы хотите запустить весь LMT в режиме отладки. 
# Внимание: Режим отладки выводит много текста.
# Если вас интересует отладка только некоторых модулей, то вы можете включить ее
# в индивидуальных файлах конфигурации, расположенных в `/etc/laptop-mode/conf.d`.
DEBUG=0

###############################################################################
# Регуляция активности LMT
# ------------------------
#
# "Laptop mode"  — это режим, когда LMT переводит устройства в режим экономии
# энергии. Это предполагает использование некоторых возможностей встроенных в
# ядро, таких как замедление вращения жёстких дисков и др. Вы можете
# включить/выключить опции энергосбережения, используя опцию CONTROL_... (см. ниже).
###############################################################################

#
# Включить LMT при работе от батареи?
# ВНИМАНИЕ: Если отключите, то при питании от батареи энергосбережение работать **не** будет.
ENABLE_LAPTOP_MODE_ON_BATTERY=1

#
# Включить LMT при работе от сети?
#
ENABLE_LAPTOP_MODE_ON_AC=0

#
# Включить LMT, пока крышка ноутбука закрыта (даже если он подключён к сети)?
# (ACPI-ONLY)
ENABLE_LAPTOP_MODE_WHEN_LID_CLOSED=0

#
# Включение некоторых из доступных модулей в автоматическом режиме.
# При этом будут включены все простые модули, первичная настройка
# которых не требует вашего вмешательства.
# Список доступных модулей:
#
# ac97-powersave
# cpufreq
# dpms-standby
# eee-superhe
# ethernet
# exec-commands
# hal-polling
# hdparm
# intel-hda-powersave
# intel-sata-powermgmt
# nmi-watchdog
# runtime-pm
# sched-mc-power-savings
# sched-smt-power-savings
# terminal-blanking
# usb-autosuspend
# wireless-ipw-power
# wireless-iwl-power
# wireless-power
#
# Выберите 1, чтобы включить их.
#
# Обратите внимание: Вы можете явно указать, включать модуль или нет, используя
# их индивидуальные конфигурационные файлы.
#
ENABLE_AUTO_MODULES=1

###############################################################################
# Настройка опций, которые могут привести к потере данных
# -------------------------------------------------------
#
# Данные настройки распространяются только на те функции LMT, использование
# которых сопряжено с некоторым риском.
#
# Функции:
# — laptop_mode (например задержка сохранения данных)
# — управление кешем записи вашего HDD
#
# С целью экономии энергии LMT искусственно задерживает частое сохранение данных
# на жёсткий диск, чтобы он реже раскручивался. При отключении питания, система
# не сможет сохранить данные, накопившиеся в кеше. Настройки, представленные
# здесь позволят отключить задержку записи при снижении заряда батареи до
# определённого значения, чтобы избежать случайностей. Однако этот метод защиты
# работает только в том случае, если заряд батареи известен.

# Все последующие опции можно отключить, выбрав 0\. Это настоятельно 
# рекомендуется, если ваша батарея сообщает неверные данные о заряде, которые
# могут привести к неправильной реакции LMT.
#

# Своевременное отключение данных функций сработает *только* если ваше
# оборудование поддерживает ACPI и только в том случае, если ваша батарея
# выдает достаточно частые ACPI-события, уведомляя об уровне заряда. В противном
# случае, она может успеть полностью разрядится в промежутке между уведомлениями
# и вы потеряете несохраненные данные.
#

# Обратите внимание: если ваша батарея НЕ выдает частых ACPI-событий, сообщающих
# об уровне заряда, вы можете включить модуль *battery-level-polling*, чтобы
# заставить ее это делать.
# См. файл `/etc/laptop-mode/conf.d/battery-level-polling.conf`.
#
###############################################################################

#
# Отключить функции, которые могут привести к потере данных, когда уровень
# заряда батареи (в процентах) опустится до этого значения:
#
MINIMUM_BATTERY_CHARGE_PERCENT=3

#
# Отключить функции, которые могут привести к потере данных, если батарея
# сообщает о критическом уровне заряда.
#
DISABLE_LAPTOP_MODE_ON_CRITICAL_BATTERY_LEVEL=1

###############################################################################
# Контроль жёстких дисков и их разделов
# -------------------------------------
#
# Для замедления ваших жестких дисков, LMT перемонтирует файловые системы и
# устанавливает таймаут замедления диска. Эти параметры специфичны для устройств,
# с которыми работает LMT.
###############################################################################

#
# Диски, которые контролирует LMT.
# Отделите выбранные диски пробелами, например HD="/dev/sda /dev/sdb". Указанный
# здесь шаблон по умолчанию указывает на все IDE и SCSI/SATA диски.
#
HD="/dev/sd[abcdefgh]"

#
# Разделы (или точки монтирования), которые контролирует LMT.
# Отделите значения пробелами. Используйте "auto" для выбора всех разделов на
# дисках, выбранных выше в HD=””. Например "auto /dev/hdc3". Вы также можете
# указывать на точки монтирования, например "/mnt/data".
#
PARTITIONS="auto /dev/mapper/*"

#
# Если эта опция включена, LMT будет считать, что ваши SCSI диски на самом деле
# SATA, хотя выглядят как SCSI и будет использоваться hdparm, чтобы
# контролировать их. Установите 0 если вы имеете /dev/sd устройства и вы хотите,
# чтобы LMT использовал "sdparm" для их контроля.
#
ASSUME_SCSI_IS_SATA=1

###############################################################################
# Настройка поведения жёстких дисков
# ----------------------------------
#
# Эти настройки определяют как LMT будет управлять вашими жёсткими дисками и
# файловыми системами.
#
###############################################################################

#
# Максимальное время работы (в секундах) которое вы готовы потерять, если ваша
# система упадёт (хотя, скорее со стола) или отключится электропитание.
# Это максимальное время, которое система будет держать в памяти несохраненные
# данные до раскрутки вашего жёсткого диска.
#
LM_BATT_MAX_LOST_WORK_SECONDS=600
LM_AC_MAX_LOST_WORK_SECONDS=360

#
# LMT должен контролировать читающие головки HDD?
#
CONTROL_READAHEAD=1

#
# Упреждающее чтение (в килобайтах). Ваш диск может замедлятся во время
# прослушивания MP3/OGG. Установите буфер упреждающего чтения разумного размера
# (например 3072 — 3 MB). Фактически с диска будет полностью считан MP3-файл. 
# Диск замедлится, а мелодия продолжит играть из буфера. Не делайте его слишком
# большим, потому как подобный режим чтения применяется ко *всем* файлам,
# считываемым с диска.
LM_READAHEAD=3072
NOLM_READAHEAD=128

#
# Должен ли LMT присваивать опцию `noatime` при монтировании?
#
CONTROL_NOATIME=0

# Должен ли LMT Использовать `relatime` вместо `noatime`?
# Монтирование с опцией `relatime` более соответствует семантическим
# стандартам и позволяет использовать больше приложений, сохраняя при этом
# низкий уровень `atime` обновления (например, записи на диск).
# [https://ru.wikipedia.org/wiki/Fstab](https://ru.wikipedia.org/wiki/Fstab)
USE_RELATIME=1

#
# Должен ли LMT контролировать таймаут простоя HDD?
#
CONTROL_HD_IDLE_TIMEOUT=1

#
# Значение таймаута при простое (hdparm -S)
# По умолчанию 2 часа при питании от сети (NOLM_HD_IDLE_TIMEOUT_SECONDS=7200)
# и 20 секунд при питании от батареи и сети, когда LMT активен.
#
LM_AC_HD_IDLE_TIMEOUT_SECONDS=7200
LM_BATT_HD_IDLE_TIMEOUT_SECONDS=20
NOLM_HD_IDLE_TIMEOUT_SECONDS=7200

#
# Должен ли LMT контролировать управление питанием жёстких дисков?
#
# Выберите 0 для отключения.
CONTROL_HD_POWERMGMT="auto"

#
# Управление питанием жёсткого диска (hdparm -B значение)
#
BATT_HD_POWERMGMT=128
LM_AC_HD_POWERMGMT=254
NOLM_AC_HD_POWERMGMT=254
# 
# Эти значения указывают на агрессивность режима энергосбережения. Чем они
# больше, тем менее агрессивный режим используется. 255 отключает регуляцию совсем.

#
# Должен ли LMT контролировать запись в кеш HDD?
#
CONTROL_HD_WRITECACHE=0

#
# Настройки записи в кеш HDD (hdparm -W значение)
#
NOLM_AC_HD_WRITECACHE=1
NOLM_BATT_HD_WRITECACHE=0
LM_HD_WRITECACHE=0

###############################################################################
# Настройки, которые вы, вероятно, не захотите изменять
# -----------------------------------------------------
#
# Как правило, нет необходимости изменять эти параметры. Они приведены “для полноты”.
###############################################################################

#
# Изменить опции монтирования разделов в РАЗДЕЛЫ? (Change mount options on
# partitions in PARTITIONS?) У вас не должно быть причин отключать эту опцию.
# Но если уж вы выключили её, то ваши диски, скорее всего, не будут замедлятся.
#
CONTROL_MOUNT_OPTIONS=1

#
# Процент, при котором будет синхронизирована “грязная память”. После превышения
# данного показателя будет вызвана функция записи write() которая осуществит
# синхронизацию.
#
LM_DIRTY_RATIO=60
NOLM_DIRTY_RATIO=40

# Допустимый уровень “грязной” фоновой памяти в процентах. После того, как
# DIRTY_RATIO будет превышен, ядро разбудит pdflu, который уменьшит количество
# “грязной” памяти до уровня dirty_background_ratio. Установить это значение
# достаточно низким, так как при большой активности, будут записаны большие
# объёмы данных.
#
LM_DIRTY_BACKGROUND_RATIO=1
NOLM_DIRTY_BACKGROUND_RATIO=10

#
# Настройки ядра по умолчанию. Не изменяйте, если не уверены в своих действиях.
#
DEF_UPDATE=5
DEF_XFS_AGE_BUFFER=15
DEF_XFS_SYNC_INTERVAL=30
DEF_XFS_BUFD_INTERVAL=1
DEF_MAX_AGE=30

#
# До XFS, в ядрах версии 2.4 пользователи изменяли свои внешние интерфейсы для
# работы в сантисекундах вручную. Работа по автоматизации этого процесса ещё не
# завершена.
# Для ядер версии 2.6 для внешних интерфейсов вместо HZ используется USER_HZ и
# в настоящее время это значение равно 100.
# Вам не нужно изменять это значение при использовании ядра версии 2.6.
#
XFS_HZ=100

#
# Сколько секунд должен подождать LMT, перед записью данных на диск, который только что раскрутился?
#
LM_SECONDS_BEFORE_SYNC=2

```

## Тонкая настройка модулей

Конфигурационные файлы, расположенные в `/etc/laptop-mode/conf.d` сгруппированы по управляемым ими подсистемам. На вашем ноутбуке может не быть оборудования, настраиваемого с помощью некоторых конфигурационных файлов, поэтому целесообразно отключить их. Чтобы проверить, какие устройства имеются в вашей системе, выполните: Список устройств, подключённых через шину PCI.

```
$ lspci
00:00.0 Host bridge: ATI Technologies Inc RS690 Host Bridge
00:01.0 PCI bridge: ATI Technologies Inc RS690 PCI to PCI Bridge (Internal gfx)
00:04.0 PCI bridge: ATI Technologies Inc Device 7914
00:05.0 PCI bridge: ATI Technologies Inc RS690 PCI to PCI Bridge (PCI Express Port 1)
00:06.0 PCI bridge: ATI Technologies Inc RS690 PCI to PCI Bridge (PCI Express Port 2)
00:12.0 SATA controller: ATI Technologies Inc SB600 Non-Raid-5 SATA
00:13.0 USB Controller: ATI Technologies Inc SB600 USB (OHCI0)
00:13.1 USB Controller: ATI Technologies Inc SB600 USB (OHCI1)
00:13.2 USB Controller: ATI Technologies Inc SB600 USB (OHCI2)
00:13.3 USB Controller: ATI Technologies Inc SB600 USB (OHCI3)
00:13.4 USB Controller: ATI Technologies Inc SB600 USB (OHCI4)
00:13.5 USB Controller: ATI Technologies Inc SB600 USB Controller (EHCI)
00:14.0 SMBus: ATI Technologies Inc SBx00 SMBus Controller (rev 14)
00:14.1 IDE interface: ATI Technologies Inc SB600 IDE
00:14.2 Audio device: ATI Technologies Inc SBx00 Azalia (Intel HDA)
00:14.3 ISA bridge: ATI Technologies Inc SB600 PCI to LPC Bridge
00:14.4 PCI bridge: ATI Technologies Inc SBx00 PCI to PCI Bridge
00:18.0 Host bridge: Advanced Micro Devices [AMD] K8 [Athlon64/Opteron] HyperTransport Technology Configuration
00:18.1 Host bridge: Advanced Micro Devices [AMD] K8 [Athlon64/Opteron] Address Map
00:18.2 Host bridge: Advanced Micro Devices [AMD] K8 [Athlon64/Opteron] DRAM Controller
00:18.3 Host bridge: Advanced Micro Devices [AMD] K8 [Athlon64/Opteron] Miscellaneous Control
01:05.0 VGA compatible controller: ATI Technologies Inc RS690M [Radeon X1200 Series]
02:04.0 CardBus bridge: Ricoh Co Ltd RL5c476 II (rev b6)
10:00.0 Ethernet controller: Broadcom Corporation NetLink BCM5906M Fast Ethernet PCI Express (rev 02)
30:00.0 Network controller: Broadcom Corporation BCM4311 802.11a/b/g (rev 02)

```

Список устройств, подключённых через USB порты.

```
$ lsusb
Bus 001 Device 001: ID 1d6b:0002 Linux Foundation 2.0 root hub
Bus 002 Device 001: ID 1d6b:0001 Linux Foundation 1.1 root hub
Bus 003 Device 001: ID 1d6b:0001 Linux Foundation 1.1 root hub
Bus 004 Device 001: ID 1d6b:0001 Linux Foundation 1.1 root hub
Bus 005 Device 001: ID 1d6b:0001 Linux Foundation 1.1 root hub
Bus 006 Device 001: ID 1d6b:0001 Linux Foundation 1.1 root hub
Bus 002 Device 002: ID 03f0:171d Hewlett-Packard Wireless (Bluetooth + WLAN) Interface [Integrated Module]

```

Это примеры вывода для ноутбука HP Compaq 6715s. Приведённые конфигурационные файлы использовались именно на нем.

### Настройки ядра

`runtime-pm.conf`

```
#
# Конфигурационный файл LMT для настройки модуля runtime-pm
#
# Для дополнительной информации ознакомьтесь со справкой (laptop-mode.conf(8) man page).

###############################################################################
# Linux Runtime Power Management
# -------------------------------
#
# При включении данной опции, LMT автоматически включит фреймфорк
# Runtime Power Management в ядре.
# Эти настройки не повредят, так что здесь нет настроек поведения LMT для разных
# источников питания.
# Если CONTROL_RUNTIME_PM=1, то режим энергосбережения всегда включён.
# Выберите 0, чтобы отключить.
#
#
###############################################################################

# Контролировать Runtime Power Management?
CONTROL_RUNTIME_PM="auto"

# Включить режим отладки для модуля?
# Выберите 1, чтобы включить его для этого модуля
DEBUG=0

```

### Процессор

`nmi-watchdog.conf`

```
#
# Конфигурационный файл LMT для настройки модуля nmi-watchdog.
#
# Для дополнительной информации ознакомьтесь со справкой (laptop-mode.conf(8) man page).
#

###############################################################################
# Включение/выключение переключателя NMI Watchdog Timer
# -----------------------------------------------------
#
# Использование этих настроек позволит LMT управлять сторожевым таймером
# (NMI Watchdog timer) при работе от батареи.
#
# Включение модуля отключит один hw-pmu счётчик.
#
###############################################################################

# Включить режим отладки для модуля?
# Выберите 1, чтобы включить его для этого модуля
DEBUG=0

# Контролировать настройки энергосбережения многоядерных процессоров для
# планировщика задач?
# Выберите 0, чтобы отключить
CONTROL_NMI_WATCHDOG="auto"

```

Дополнительная информация (на английском):

*   [Linux NMIs on Intel 64-bit Hardware](http://x86vmm.blogspot.com/2005/10/linux-nmis-on-intel-64-bit-hardware.html)
*   [Linux kernel Documentation](http://www.mjmwired.net/kernel/Documentation/nmi_watchdog.txt)
*   [Не маскируемые прерывания](https://en.wikipedia.org/wiki/Non-Maskable_interrupt "wikipedia:Non-Maskable interrupt")

На русском:

*   [Прерывание](https://ru.wikipedia.org/wiki/Прерывание) на Википедии

Может быть он отключает счётчики неиспользуемых ядер?

#### Управление частотой процессора

`cpufreq.conf`

```
#
# Конфигурационный файл LMT для настройки модуля cpufreq.
#
# Для дополнительной информации ознакомьтесь со справкой (laptop-mode.conf(8) man page).
#

###############################################################################
# Масштабирование (scaling) и сброс (throttling) частоты процессора
# ----------------------------------------------------------
#
# LMT может менять частоту работы процессора с помощью модулей ядра. Вы можете
# установить верхний и нижний предел изменения частоты, а также “гувернера
# масштабирования частоты”. Кроме того, поддерживается сброс частоты (throttling),
# для старых систем, которые не поддерживают масштабирование.
#
# Эти функции поддерживаются ядрами начиная с версии 2.6.
#
#
# ВАЖНО: В версиях LMT 1.36 и более ранних, эти настройки были включены в
# основной конфигурационных файл `laptop-mode.conf`. Опции, указанные
# в этом файле имеют более высокий приоритет. Если они ещё присутствуют, просто
# удалите их.
#
###############################################################################

# Включить режим отладки для модуля?
# Выберите 1, чтобы включить его для этого модуля
DEBUG=0

#
# Должен ли LMT контролировать масштабирование частоты процессора?
#
# Выберите 0, чтобы выключить.
CONTROL_CPU_FREQUENCY="auto"

#
# Вы можете использовать значение "slowest", чтобы выбрать минимальную из
# доступных частот, "fastest", чтобы выбрать максимальную и "medium" для среднего
# значения. Доступные частоты приведены в:
# `/sys/devices/system/cpu/cpu*/cpufreq/scaling_available_frequencies`.
# Гувернер — любой гувернер, доступный в вашей системе. Обычно это "performance"
# (по умолчанию), "ondemand", "conservative". Есть и другие.
# Настройка "IGNORE_NICE_LOAD" определяет, вызывают ли нагрузки, создаваемые
# фоновыми программами, имеющими низкий приоритет ("nice level"), повышение частоты
# процессора. (При работе от батареи лучше установить “1”, то есть не повышать
# частоту при фоновой нагрузке.)
#
# Для изменение последних двух групп опций обратитесь к `laptop-mode.conf`.
BATT_CPU_MAXFREQ=fastest
BATT_CPU_MINFREQ=slowest
BATT_CPU_GOVERNOR=powersave
BATT_CPU_IGNORE_NICE_LOAD=1
LM_AC_CPU_MAXFREQ=fastest
LM_AC_CPU_MINFREQ=slowest
LM_AC_CPU_GOVERNOR=ondemand
LM_AC_CPU_IGNORE_NICE_LOAD=1
NOLM_AC_CPU_MAXFREQ=fastest
NOLM_AC_CPU_MINFREQ=slowest
NOLM_AC_CPU_GOVERNOR=performance
NOLM_AC_CPU_IGNORE_NICE_LOAD=0

#
# Должен ли LMT контролировать сброс частоты процессора (CPU throttling)? Это полезно
# использовать, только если ваш процессор не поддерживает масштабирование частоты.
# (Работает только если вы имеете /proc/acpi/processor/CPU*/throttling.)
#
# Режим троттлинга использовался на старых процессорах P4, которые не поддерживали
# масштабирования. На таких процессорах это был единственный способ снизить
# энергопотребление, но ценой падения производительности.
#
# Включайте этот режим только если ваш процессор не поддерживает масштабирование
# частоты. Если у вас современный процессор, то эта опция вам не нужна. Отключите ее.
#
# Выберите 0, чтобы отключить.
CONTROL_CPU_THROTTLING=0

# Возможные значения: "maximum" для максимального сброса частоты (производительность
# и энергопотребление минимальны), "minimum" для минимального уровня сброса, "medium"
# для среднего (обычно 50% для P4s) или любое другое значение, указанное в
# /proc/acpi/processor/CPU*/throttling. С осторожностью используйте значение "maximum" —
# ваш процессор будет работать _слишком_ медленно. (процессор P4s замедляется с фактором 8).
#
BATT_CPU_THROTTLING=medium
LM_AC_CPU_THROTTLING=medium
NOLM_AC_CPU_THROTTLING=minimum

```

#### Многоядерные процессоры

`sched-mc-power-savings.conf`

```
#
# Конфигурационный файл LMT для настройки модуля sched-mc-power-savings
#
# Для дополнительной информации ознакомьтесь со справкой (laptop-mode.conf(8) man page).
#

###############################################################################
# Энергосберегающие настройки для планировщика задач,
# работающего на многоядерных и многопоточных системах
# ----------------------------------------------------
#
# Позволяет LMT настраивать планировщик Linux для экономии энергии на
# многоядерных процессорах при питании от батареи.
#
###############################################################################

# Включить режим отладки для модуля?
# Выберите 1, чтобы включить его для этого модуля
DEBUG=0

# Контролировать настройки энергосбережения планировщика задач для
# многоядерных процессоров?
# Set to 0 to disable
CONTROL_SCHED_MC_POWER_SAVINGS="auto"

```

`sched-smt-power-savings.conf`

```
#
# Конфигурационный файл LMT для настройки модуля sched-smt-power-savings
#
# Для дополнительной информации ознакомьтесь со справкой (laptop-mode.conf(8) man page).
#

###############################################################################
# Энергосберегающие настройки SMT-многопоточности для планировщика задач
# ----------------------------------------------------------------------
#
# Включение этих настроек позволит LMT автоматически конфигурировать планировщик
# Linux для энергоэффективного использования SMT-процессоров при питании от батареи.
#
###############################################################################

# Включить режим отладки для модуля?
# Выберите 1, чтобы включить его для этого модуля
DEBUG=0

# Контролировать энергосберегающие настройки многоядерных процессоров для планировщика задач?
# Выберите 0, чтобы отключить
CONTROL_SCHED_SMT_POWER_SAVINGS="auto"

```

*   См. [SMT](https://en.wikipedia.org/wiki/Simultaneous_multithreading "wikipedia:Simultaneous multithreading") на Википедии (на английском).

### Устройства и шины

#### Настройка опроса HAL

`hal-polling.conf`

**Примечание:** [HAL](/index.php/HAL_(%D0%A0%D1%83%D1%81%D1%81%D0%BA%D0%B8%D0%B9) "HAL (Русский)") устарел и вытеснен [Udev](/index.php/Udev_(%D0%A0%D1%83%D1%81%D1%81%D0%BA%D0%B8%D0%B9) "Udev (Русский)").

```
#
# Конфигурационный файл LMT для настройки модуля hal-polling
# Для дополнительной информации ознакомьтесь со справкой (laptop-mode.conf(8) man page).
#

###############################################################################
# Настройки опроса HAL
# --------------------
#
# Если вы включите эту опцию, LMT будет контролировать опрос ваших CD/DVD
# приводов, проводимых демоном HAL. Отключение лишних опросов экономит энергию,
# однако на некоторых старых приводах отключение опроса дисководов приводит к
# тому, что вставленные диски не обнаруживаются. В таком случае стоит отключить
# этот модуль или же настроить LMT таким образом, чтобы HAL опрашивал дисковод
# только когда компьютер работает от сети. Но опять же, при работе от батареи
# вставленные диски не будут детектироваться.
###############################################################################

# Включить режим отладки для модуля?
# Выберите 1, чтобы включить его для этого модуля
DEBUG=0

# Контролировать опросы HAL?
# Выберите 0, чтобы отключить.
CONTROL_HAL_POLLING="auto"

# Отключить опрос HAL при питании от батареи?
BATT_DISABLE_HAL_POLLING=1

# Отключить опрос HAL при питании от сети?
AC_DISABLE_HAL_POLLING=0

# Приводы, на которые распространяются данные настройки опроса HAL
HAL_POLLING_DEVICES="/dev/scd?"

```

#### Intel SATA

`intel-sata-powermgmt.conf`

```
#
# Конфигурационный файл LMT для настройки модуля intel-sata-powermgmt.
#
# Для дополнительной информации ознакомьтесь со справкой (laptop-mode.conf(8) man page).
#

###############################################################################
# Настройки энергосбережения Intel SATA
# -------------------------------------
#
# При включении этих настроек LMT будет автоматически включать
# link-режим энергосбережения Intel AHCI-совместимых чипсетов SATA.
#
###############################################################################

# Включить режим отладки для модуля?
# Выберите 1, чтобы включить его для этого модуля
DEBUG=0

# Контролировать настройки энергосбережения для чипсета Intel SATA?
# Выберите 0, чтобы отключить
CONTROL_INTEL_SATA_POWER="auto"

# Активность модуля, в зависимости от режима питания
BATT_ACTIVATE_SATA_POWER=1
LM_AC_ACTIVATE_SATA_POWER=0
NOLM_AC_ACTIVATE_SATA_POWER=0

```

*   См. [AHCI](https://ru.wikipedia.org/wiki/AHCI) на Википедии.

#### Автоотключение USB

`usb-autosuspend.conf`

```
#
# Конфигурационный файл LMT для настройки модуля usb-autosuspend.
#
# Для дополнительной информации ознакомьтесь со справкой (laptop-mode.conf(8) man page).
#

###############################################################################
# Автоматическое отключение устройств USB
# ---------------------------------------
#
# При включении данного модуля, LMT сможет отключать все USB-устройства автоматически.
# Внимание: Некоторые USB-устройства выключаются некорректно (хотя поддержка
# автоотключения заявлена производителем). Вследствие этого клавиатура может
# перестать реагировать на нажатие или необратимо гаснет светодиод оптической
# мыши. Если ваше устройство ведёт себя подобным образом, добавьте его USB ID в
# чёрный список ниже и сообщите поставщику оборудования.
################################################################################

# Включить режим отладки для модуля?
# Выберите 1, чтобы включить его для этого модуля
DEBUG=0

# Включить автоотключение USB-устройств?
# Выберите 0, чтобы отключить.
CONTROL_USB_AUTOSUSPEND="auto"

# Выберите, какой из списков (чёрный или белый) использовать для контроля автоотключения.
# AUTOSUSPEND_USE_WHITELIST=0 предполагает, что используется AUTOSUSPEND_*_BLACKLIST.
# AUTOSUSPEND_USE_WHITELIST=1 предполагает, что используется _*_WHITELIST.
AUTOSUSPEND_USE_WHITELIST=0

# Список идентификаторов USB-устройств, к которым НЕ применяется автоотключение.
# Используйте `lsusb` чтобы просмотреть список подключённых USB-устройств
# и их идентификаторов.
# Пример: AUTOSUSPEND_USBID_BLACKLIST="046d:c025 0123:abcd"
AUTOSUSPEND_USBID_BLACKLIST=""

# Список драйверов USB-устройств, к которым НЕ применяется автоотключение. Используемый
# драйвер указан в виде "DRIVER=..." в файле uevent вашего USB-устройства.
# Пример: AUTOSUSPEND_USBID_BLACKLIST="usbhid usb-storage"
AUTOSUSPEND_USBTYPE_BLACKLIST=""

# Список USB-идентификаторов устройств, которые необходимо отключать автоматически.
# Используйте `lsusb` чтобы просмотреть список подключённых
# USB-устройств и их идентификаторов.
# Пример: AUTOSUSPEND_USBID_WHITELIST="046d:c025 0123:abcd"
AUTOSUSPEND_USBID_WHITELIST=""

# Список USB-драйверов устройств, которые необходимо отключать автоматически. Используемый
# драйвер указан в виде "DRIVER=..." в файле uevent вашего USB-устройства.
# Пример: AUTOSUSPEND_USBTYPE_WHITELIST="usbhid usb-storage"
AUTOSUSPEND_USBTYPE_WHITELIST=""

# Настройка активности модуля автоотключения USB-устройств в
# зависимости от активности LMT и источника питания.
BATT_SUSPEND_USB=1
LM_AC_SUSPEND_USB=0
NOLM_AC_SUSPEND_USB=0

# Таймаут автоотключения.
# Число секунд, по прошествии которых USB-устройство будет отключено.
AUTOSUSPEND_TIMEOUT=2

```

#### Настройка EEE

`eee-superhe.conf`

```
#
# Конфигурационный файл LMT для настройки модуля eee-superhe
#
# Для дополнительной информации ознакомьтесь со справкой (laptop-mode.conf(8) man page).
#

# Включить режим отладки для модуля?
# Выберите 1, чтобы включить его для этого модуля
DEBUG=0

# Управляет скоростью FSB. Для работы требуется также загрузить модуль ядра eeepc_laptop.
# Укажите его в массиве `MODULES=""` в файле `/etc/rc.conf`.
# Выберите 0, чтобы отключить.
#
CONTROL_SUPERHE="auto"

# 2 энергосберегающий
# 1 нормальный
# 0 максимальная произвдительность

BATT_SUPERHE=2
LM_AC_SUPERHE=0
NOLM_AC_SUPERHE=0

# Если в вашей системе файл контроля FSB располагается в другом месте, укажите его здесь,
# раскомментировав строку:
# SUPERHE_CONTROL_FILE=

```

### Дисплеи и графика

#### Яркость LCD дисплея

`lcd-brightness.conf`

```
#
# Конфигурационный файл LMT для настройки модуля lcd-brightness.
#
# Для дополнительной информации ознакомьтесь со справкой (laptop-mode.conf(8) man page).
#

###############################################################################
# Настройки яркости LCD-монитора
# ------------------------------
#
# Используя эти настройки, вы можете автоматизировать изменение яркости с
# помощью LMT. Настройка этого модуля элементарна — нужно указать какую команду
# следует выполнить для изменения яркости. Команды для разных ноутбуков различны.
#
# Возможные варианты:
#
#  * Если в вашей системе есть файл "/proc/acpi/video/VID/LCD/brightness"
# (VID может называться VID1 или как то иначе), используйте полный путь к файлу
# в BRIGHTNESS_OUTPUT, и укажите значение яркости в команде "echo <значение>".
# Чтобы узнать о доступных значениях яркости, вы можете воспользоваться командой:
#
#       cat /proc/acpi/video/VID/LCD/brightness
#
#  * Если у вас есть файл /sys/class/backlight/.../brightness, то используйте
# полный путь к файлу в BRIGHTNESS_OUTPUT, и укажите значение
# яркости "echo <значение>".
#
#    Скорее всего, вы можете использовать значения яркости от 0 до цифры,
# указанной в файле /sys/class/backlight/.../max_brightness.
#
#  * Для ноутбуков Toshiba, используйте команду "toshset" с ключом -lcd или -inten.
#    Ознакомьтесь со страницей справки toshset(1) для получения дополнительной
# информации о возможных командах. Если вы используете эту команду, то
# установите BRIGHTNESS_OUTPUT в "/dev/null".
#
###############################################################################

###############################################################################
#
# ВАЖНО: В версиях LMT 1.36 и более ранних, эти настройки были включены в
# основной конфигурационный файл `laptop-mode.conf`. Опции,
# указанные в этом файле имеют более высокий приоритет. Если они ещё
# присутствуют, просто удалите их.
#
###############################################################################

# Включить режим отладки для модуля?
# Выберите 1, чтобы включить его для этого модуля
DEBUG=0

#
# Должен ли LMT контролировать яркость LCD-экрана?
#
CONTROL_BRIGHTNESS=1

#
# Команды, выполнение которых вызывает изменение яркости вашего LCD-монитора
#
BATT_BRIGHTNESS_COMMAND="echo 0"
LM_AC_BRIGHTNESS_COMMAND="echo 3"
NOLM_AC_BRIGHTNESS_COMMAND="echo 3"
#BRIGHTNESS_OUTPUT="/proc/acpi/video/VID/LCD/brightness"
BRIGHTNESS_OUTPUT="/sys/class/backlight/acpi_video0/brightness"

```

`dpms-standby.conf`

```
#
# Конфигурационный файл LMT для настройки модуля dpms-standby
#
# Для дополнительной информации ознакомьтесь со справкой (laptop-mode.conf(8) man page).
#

###############################################################################
# Настройки дисплея для графического сервера X
# --------------------------------------------
#
# Используя эти настройки, вы сможете контролировать время перехода (таймаут) в
# режим ожидания (гашение подсветки и т.п.) вашего монитора.
#
# Требуется, чтобы была установлена утилита "xset". Это часть сервера X.org,
# она включена в пакет xorg-server-utils.
#
# Изменение настроек иксов не применяется автоматически во время текущей сессии,
# и их невозможно изменить обычному пользователю, так как LMT должен
# иметь права root для работы. В man page к LMT в секции CONTROL_DPMS_STANDBY
# описывается, как обойти эти ограничения.
#
#
# ВАЖНО: В версиях LMT 1.36 и более ранних, эти настройки были включены в
# основной конфигурационный файл `laptop-mode.conf`. Опции, указанные
# в этом файле имеют более высокий приоритет. Если они ещё присутствуют,
# просто удалите их.
#
###############################################################################

# Включить режим отладки для модуля?
# Выберите 1, чтобы включить его для этого модуля
DEBUG=0

#
# Должен ли LMT контролировать DPMS для X-сервера?
#
# Выберите 0, чтобы отключить.
CONTROL_DPMS_STANDBY="auto"

#
# Эти опции указывают таймаут перехода дисплея в режим ожидания в секундах.
# Время перехода в ждущий режим и отключения питания дисплея должно быть чуть
# больше этих значений.
#
BATT_DPMS_STANDBY=300
LM_AC_DPMS_STANDBY=1200
NOLM_AC_DPMS_STANDBY=1200

```

*   См. [DPMS](https://ru.wikipedia.org/wiki/DPMS) на Википедии

#### Затемнение терминала

`terminal-blanking.conf`

```
#
# Конфигурационный файл LMT для настройки модуля terminal-blanking.
#
# Для дополнительной информации ознакомьтесь со справкой (laptop-mode.conf(8) man page).
#

###############################################################################
# Настройки терминала
# -----------------
#
# Вы можете настроить таймаут гашения подсветки в виртуальных консолях linux.
#  
#
# ВАЖНО: В версиях LMT 1.36 и более ранних, эти настройки были включены в основной
# конфигурационный файл `laptop-mode.conf`. Опции, указанные в этом файле
# имеют более высокий приоритет. Если они ещё присутствуют, просто удалите их.
#
###############################################################################

# Включить режим отладки для модуля?
# Выберите 1, чтобы включить его для этого модуля
DEBUG=0

#
# Должен ли LMT контролировать настройки гашения подсветки монитора при
# использовании виртуальных консолей Linux?
#
# Выберите 0, чтобы отключить.
CONTROL_TERMINAL="auto"

#
# Файлы терминалов, на которые распространяются настройки. (Достаточно указать
# один терминал — настройки сработают для всех консолей.)
#
TERMINALS="/dev/tty1"

#
# Следующие настройки определяют таймауты затемнения (отключения подсветки) и
# отключения питания. Обратите внимание, что отсчет таймаута отключения питания
# начинается после отключения подсветки, так что BLANK_MINUTES=2 и
# POWERDOWN_MINUTES=5 означают, что экран отключится через 7 минут неактивности.
# Вы можете выбрать таймаут от 1 до 60 минут или 0, чтобы отключить.
#
BATT_TERMINAL_BLANK_MINUTES=1
BATT_TERMINAL_POWERDOWN_MINUTES=1
LM_AC_TERMINAL_BLANK_MINUTES=10
LM_AC_TERMINAL_POWERDOWN_MINUTES=1
NOLM_AC_TERMINAL_BLANK_MINUTES=10
NOLM_AC_TERMINAL_POWERDOWN_MINUTES=1

```

#### Контроль видеовыходов

`video-out.conf`

```
#
# Конфигурационный файл LMT для настройки модуля video-out.
#
# Для дополнительной информации ознакомьтесь со справкой (laptop-mode.conf(8) man page).
#

###############################################################################
# Настройки контроля видеовыхода
# -----------------------------
#
# Оборудование не всегда распознает, подключён ли монитор к VGA и/или TV выходу.
# Включённый порт видеовыхода всегда потребляет энергию. Этот модуль позволит
# принудительно отключать видеовыходы в зависимости от режима питания.
#
###############################################################################

# Включить режим отладки для модуля?
# Выберите 1, чтобы включить его для этого модуля
DEBUG=0

# Контролировать питание видеовыхода?
CONTROL_VIDEO_OUTPUTS=0

# Видеопорты, отключаемые в зависимости от активности LMT и источника питания.
# Выполните `xrandr` чтобы узнать, какие видеовыходы доступны.
# Удостоверьтесь, что вы не указали здесь видеовыход к которому подключён
# основной дисплей!
BATT_DISABLE_VIDEO_OUTPUTS="TMDS VGA"
LM_AC_DISABLE_VIDEO_OUTPUTS="TMDS VGA"
NOLM_AC_DISABLE_VIDEO_OUTPUTS=""

```

### Сетевые устройства

#### Wireless LAN

`wireless-ipw-power.conf`

```
#
# Конфигурационный файл LMT для настройки модуля wireless-ipw-power.
#
# Для дополнительной информации ознакомьтесь со справкой (laptop-mode.conf(8) man page).
#

###############################################################################
# Настройки питания IWP Wireless
# ------------------------------
#
# При включении этих опций, LMT будет автоматически переводить адаптеры
# Intel IPW3945, IPW2200 и IPW2100 в режим энергосбережения.
#
###############################################################################

# Включить режим отладки для модуля?
# Выберите 1, чтобы включить его для этого модуля
DEBUG=0

# Управлять энергосбережением для адаптеров Intel IPW?
# Выберите 0, чтобы отключить.
CONTROL_IPW_POWER="0"

# Выполните `iwpriv set_power`, чтобы узнать доступные значения для
# чипсетов IPW3945 и IPW2100s. Допустимые значения различны для каждого чипсета.
IPW3945_AC_POWER=6
IPW3945_BATT_POWER=7

IPW2100_AC_POWER=0
IPW2100_BATT_POWER=5

```

`wireless-iwl-power.conf`

```
#
# Конфигурационный файл LMT для настройки модуля wireless-iwl-power.
#
# Для дополнительной информации ознакомьтесь со справкой (laptop-mode.conf(8) man page).
#

###############################################################################
# Настройки питания IWL Wireless
# ------------------------------
#
# При использовании этого модуля LMT будет автоматически включать
# энергосберегающий режим для устройств Intel, поддерживающих драйвером
# iwlagn (включая 4965, 5100, 5300, 5350, 5150, 1000, и 6000).
#
#
###############################################################################

# Включить режим отладки для модуля?
# Выберите 1, чтобы включить его для этого модуля
DEBUG=0

# Управлять энергосбережением для адаптеров Intel IWL?
# Выберите 0, чтобы отключить.
CONTROL_IWL_POWER="0"

# Уровни указаны в "/sys/class/net/*/device/power_level" для чипсетов iwlwifi
# Допустимые значения:
# 0 = Максимальный расход энергии.
# ...
# 5 = Минимальный расход энергии
IWL_AC_POWER=0
IWL_BATT_POWER=3

```

`wireless-power.conf`

```
#
# Конфигурационный файл LMT для настройки модуля wireless-power.
#
# Для дополнительной информации ознакомьтесь со справкой (laptop-mode.conf(8) man page).
#

###############################################################################
# Общие настройки электропитания для Wi-fi адаптеров
# --------------------------------------------------
#
# При использовании данного модуля LMT будет автоматически включать режим
# энергосбережения для адаптеров, поддерживающих настройки iwconfig.
#
###############################################################################

# Включить режим отладки для модуля?
# Выберите 1, чтобы включить его для этого модуля
DEBUG=0

# Контролировать общие настройки энергосбережения для Wi-Fi чипсетов?
CONTROL_WIRELESS_POWER_SAVING="0"

WIRELESS_AC_POWER_SAVING=1
WIRELESS_BATT_POWER_SAVING=1

```

#### Bluetooth

`bluetooth.conf`

```
#
# Конфигурационный файл LMT для настройки модуля bluetooth.
#
# Для дополнительной информации ознакомьтесь со справкой (laptop-mode.conf(8) man page).
#

###############################################################################
# Настройки bluetooth
# -------------------
#
# При включении этого модуля, LMT будет автоматически включать/выключать bluetooth,
# в зависимости от источника питания. Bluetooth потребляет значительное
# количество энергии (сопоставимо с Wi-Fi), так что его отключение полезно.
#
###############################################################################

# Включить режим отладки для модуля?
# Выберите 1, чтобы включить его для этого модуля
DEBUG=0

# Контролировать bluetooth?
CONTROL_BLUETOOTH=0

# Включить bluetooth при питании от батареи?
BATT_ENABLE_BLUETOOTH=0

# Включить bluetooth при питании от сети?
AC_ENABLE_BLUETOOTH=1

# Контролируемый bluetooth-интерфейс:
BLUETOOTH_INTERFACES="hci0"

```

#### Ethernet

`ethernet.conf`

```
#
# Конфигурационный файл LMT для настройки модуля ethernet.
#
# Для дополнительной информации ознакомьтесь со справкой (laptop-mode.conf(8) man page).
#

###############################################################################
# Энергосберегающие настройки модуля ethernet
# -------------------------------------------
#
# Настройка скорости ethetnet соединения и пробуждения по сети.
#
# Обратите внимание: Изменение конфигурации некоторых ethernet адаптеров может
# привести к разрыву соединения. Соединение должно быть инициализировано повторно.
#
###############################################################################

# Включить режим отладки для модуля?
# Выберите 1, чтобы включить его для этого модуля
DEBUG=0

# Контролировать настройки вашего ethernet-адаптера?
CONTROL_ETHERNET="auto"

# Контролировать скорость адаптера в зависимости от источника питания:
BATT_THROTTLE_ETHERNET=1
LM_AC_THROTTLE_ETHERNET=0
NOLM_AC_THROTTLE_ETHERNET=0

# Выберите максимальную скорость работы адаптера.
# Пожалуйста, выберите одно из значений скорости, которое показывает `ethtool`.
# Чтобы определить скорость, которую поддерживает ваша ethernet карта, запустите
# `ethtool eth0`, от имени root, где eth0 — идентификатор вашей сетевой карты.
# Например:
# Установить скорость в 100Mbps.
# THROTTLE_SPEED=100
#
# Установить минимальную скорость адаптера:
# THROTTLE_SPEED="slowest"
#
# Сбрасывать скорость до максимального значения, поддерживаемого вашим адаптером.
# Это может быть полезно, если вы хотите контролировать скорость, даже когда
# работаете от батареи.
# THROTTLE_SPEED="fastest"
#
# Note: Если вы не можете определить скорость вашей сетевой карты, то следующее
# значение опции установит её на минимум:
THROTTLE_SPEED="slowest"

# Отключить пробуждение по сети (wakeup-on-LAN)? Полностью отключает пробуждение
# по сети, вне зависимости от источника питания, что экономит энергию когда
# ноутбук выключен или находится в режиме ожидания.
DISABLE_WAKEUP_ON_LAN=1

# Список ethernet устройств, которые необходимо контролировать:
ETHERNET_DEVICES="eth0"

# На практике, при питании от батареи пользователи обычно работают через
# беспроводную сеть и ethenet адаптер не нужен. LMT может его автоматически
# отключать, при питании от батареи.
# Выберите 1 чтобы отключить ваш ethernet адаптер при питании от батареи.
DISABLE_ETHERNET_ON_BATTERY=0

```

### Аудио

`ac97-powersave.conf`

```
#
# Конфигурационный файл LMT для настройки модуля ac97-powersave.
#
# Для дополнительной информации ознакомьтесь со справкой (laptop-mode.conf(8) man page).
#

###############################################################################
# Энергосберегающие настройки AC97
# --------------------------------
#
# При включении этой опции, LMT будет автоматически включать режим энергосбережения
# для аудиочипсетов AC97\. Этот параметр не повредит, при питании ноутбука от батареи:
# если CONTROL_AC97_POWER=1, то режим энергосбережения всегда включён.
#
# Выберите 0, чтобы отключить.
#
###############################################################################

# Контролировать режим энергосбережения AC97?
CONTROL_AC97_POWER="auto"

# Включить режим отладки для модуля?
# Выберите 1, чтобы включить его для этого модуля
DEBUG=0

```

`intel-hda-powersave.conf`

```
#
# Конфигурационный файл LMT для настройки модуля intel-hda-powersave.
#
# Для дополнительной информации ознакомьтесь со справкой (laptop-mode.conf(8) man page).
#

###############################################################################
# Энергосбережение для чипсетов Intel HDA
# ---------------------------------------
#
# Настройки энергосбережения для чипсетов Intel HDA Audio.
#
###############################################################################

# Включить режим отладки для модуля?
# Выберите 1, чтобы включить его для этого модуля
DEBUG=0

# Управлять энергосберегающими функциями аудиочипсета INTEL HDA?
# Выберите 0, чтобы отключить.
CONTROL_INTEL_HDA_POWER="auto"

# Активность модуля, в зависимости от режима питания
BATT_INTEL_HDA_POWERSAVE=1
LM_AC_INTEL_HDA_POWERSAVE=0
NOLM_AC_INTEL_HDA_POWERSAVE=0

# Таймаут (в секундах) перед включением режима экономии энергии.
INTEL_HDA_DEVICE_TIMEOUT=10

# Полностью отключить контроллер после таймаута?
# Это экономичнее, однако при включениях/выключениях звуковой карты динамики
# могут щелкать. Это проблема усилителя. Если вас раздражают щелчки, то вы
# можете запретить полностью отключать звуковую карту, установив 0.
#
# Выберите 1, чтобы позволить LMT полностью отключать контроллер.
INTEL_HDA_DEVICE_CONTROLLER=0

```

### Батарея

`battery-level-polling.conf`

```
#
# Конфигурационный файл для модуля опроса батареи (battery-level-polling).
#
# Для дополнительной информации ознакомьтесь со справкой (laptop-mode.conf(8) man page).
#

###############################################################################
# Настройка опроса батареи о текущем уровне заряда
# ------------------------------
#
# Этот модуль позволяет LMT вовремя реагировать на изменение уровня заряда
# батареи, даже если батарея не выдает достаточно частых ACPI-событий,
# уведомляющих об уровне заряда.
#
# Работает только если ваше оборудование поддерживает ACPI.
###############################################################################

# Включить режим отладки для модуля?
# Выберите 1, чтобы включить его для этого модуля
DEBUG=0

#
# Включить опрос о заряде батареи?
#
ENABLE_BATTERY_LEVEL_POLLING=0

# Контроль над чёрным списком flock
# Это обходной путь (костыль) чтобы демона, осуществляющего опрос батареи не заблокировало.
BLACKLIST_IN_FLOCK=1

```

### Пользовательские методы

#### Настройка перехода в спящий режим (гибернация)

`auto-hibernate.conf`

```
#
# Конфигурационный файл LMT для настройки модуля автоматической гибернации (auto-hibernate).
#
# Для дополнительной информации ознакомьтесь со справкой (laptop-mode.conf(8) man page).
#

###############################################################################
# Настройки автоматической гибернации
# -----------------------------------
#
# С помощью этих настроек можно настроить автоматический переход в режим 
# гибернации если ваша батарея садится. Данная функция доступна только на
# устройствах с поддержкой ACPI, и работает корректно только в том случае, если
# ваша батарея достаточно часто сообщает об уровне заряда.
#
# Обратите внимание: если ваша батарея НЕ выдает частых ACPI-событий, сообщающих
# об уровне заряда, вы можете включить модуль *battery-level-polling*, чтобы
# заставить ее это делать.
# См. файл `/etc/laptop-mode/conf.d/battery-level-polling.conf`.
#
#
# ВАЖНО: В версиях LMT 1.36 и более ранних, эти настройки были включены в основной
# конфигурационных файл `laptop-mode.conf`. Опции, указанные в этом
# файле имеют более высокий приоритет. Если они ещё присутствуют, просто удалите их.
#
###############################################################################

# Включить режим отладки для модуля?
# Выберите 1, чтобы включить его для этого модуля
DEBUG=0

#
# Должен ли LMT переводить ваш ноутбук в режим гибернации?
#
ENABLE_AUTO_HIBERNATION=0

#
# Скрипт, который запускается для перехода в режим гибернации (предоставляется
# сторонними утилитами)
#
HIBERNATE_COMMAND=/usr/sbin/pm-hibernate

#
# Пороговый уровень заряда (в процентах), при достижении которого компьютер будет
# переведён в режим гибернации.
#
AUTO_HIBERNATION_BATTERY_CHARGE_PERCENT=4

#
# Включить автоматическую гибернацию, если батарея сообщает о критическом
# уровне заряда.
AUTO_HIBERNATION_ON_CRITICAL_BATTERY_LEVEL=1

```

`configuration-file-control.conf`

**Важно:** Вам придется самостоятельно следить за актуальностью ваших конфигурационных файлов!

Laptop-mode не позволит обновить ваши конфигурационные файлы. Останавливаем соответствубщих демонов (в наше примере это syslog-ng):

 `# /etc/rc.d/laptop-mode stop`  `# /etc/rc.d/syslog-ng stop` 

Удаляем пакет вместе с настройками:

 `# pacman -Rn syslog-ng` 

Удалим оставшиеся конфигурационные файлы, созданных на основе "родных" файлов suslog-ng, которые подменяет LMT, что и создает проблему.

 `# rm /etc/syslog-ng/*` 

И устанавливаем его заново:

 `# pacman -S syslog-ng` 

После чего можно опять запустить LMT и syslog-ng:

 `# /etc/rc.d/laptop-mode start`  `# /etc/rc.d/syslog-ng start` 

LMT создаст новые конфигурационные файлы, взамен удаленных устаревших. Разумеется, можно было не останавливать полностью LMT, а только отключить функцию подмены файлов (в файле ниже) и перезагрузить демона для подхвата новых настроек. Кроме того, вероятно, можно было просто перенести содержимое новых конфигурационных файлов в старые, но для этого их нужно достать из пакета в кеше pacman'а `/var/cache/pacman/pkg/`. Указанный способ проще, если вы не использовали собственных настроек syslog-ng.

```
#
# Конфигурационный файл LMT для настройки модуля configuration-file-control.
#
# Для дополнительной информации ознакомьтесь со справкой (laptop-mode.conf(8) man page).
#

###############################################################################
# Управление конфигурационными файлами
# ------------------------------------
#
# LMT может автоматически менять конфигурационные файлы в зависимости от
# источника питания.
#
# В основном эта функция применяется для контроля за конфигурационными файлами
# демона syslog. Он имеет тенденцию обновлять отчёты на диске, при поступлении
# новых данных. Это вызывает раскручивание дисков, что вызывает дополнительные
# расходы электроэнергии. syslog.conf может быть настроен так, чтобы он НЕ
# синхронизировал данный файл, путём добавления к имени лог файла дефисом. Например:
#
#     mail.*        -/var/log/mail/mail.log
#
# Используя следующие опции, вы можете настроить автоматическое переключение
# между несколькими конфигурациями, в зависимости от источника питания.
#
#
# ВАЖНОЕ ЗАМЕЧАНИЕ
# ----------------
#
# Эта функция не будет работать, если CONTROL_SYSLOG_CONF настраивается в
# файле laptop-mode.conf. В новых версиях LMT часть настроек перенесена в
# отдельные конфигурационные файлы в `/etc/laptop-mode/conf.d/`
# Чтобы использовать эту функцию, удалите секцию опции `CONTROL_SYSLOG_CONF`
# в `laptop-mode.conf` и перезапустите демон laptop-mode.
#
# Обратите внимание, что имена старых и новых конфигурационных файлов различаются.
# Кроме того, ваши настройки НЕ переносятся в новый конфигурационный файл.
# Вам придётся перенести их вручную.
#
###############################################################################

# Включить режим отладки для модуля?
# Выберите 1, чтобы включить его для этого модуля
DEBUG=0

#
# Должен ли LMT контролировать, какие файлы конфигурации следует использовать?
CONTROL_CONFIG_FILES=0

#
# Выберите конфигурационные файлы, которые вы хотите контролировать. Укажите
# их в строке, отделяя друг от друга пробелами.
#
# Файлы конфигурации будет называться следующим образом:
#     <config file>-nolm-ac
#     <config file>-lm-ac
#     <config file>-batt
#
# Первый файл будет использоваться, когда система работает от сети и LMT не
# активен. Второй файл будет использован, когда система работает от сети и LMT
# активен. Третий файл используется, при работе от батареи.
#
# Во время своей работы LMT будет заменять конфигурационные файлы символической
# ссылкой на один из трёх конфигурационных файлов (см. выше) в зависимости от
# состояния. Оригинальный файл будет сохранен как <конфигурационный_файл>.lmbackup
# и возвращается на место, когда LMT неактивен.
#
# Когда вы добавите файлы в список, удостоверьтесь, что добавили соответствующую
# программу или сервис в список ниже. Вы можете создать альтернативные
# конфигурационные файлы самостоятельно. Если вы их не создали, они будут
# сгенерированы автоматически при следующей перезагрузке LMT. Чтобы принудительно
# перезагрузить LMT и заставить его создать эти файлы, запустите
# `/etc/rc.d/laptop-mode restart`.
#
CONFIG_FILES="/etc/syslog.conf /etc/syslog-ng/syslog-ng.conf /etc/rsyslog.conf"

# После замены конфигурационных файлов их должны подхватить соответствующие
# программы. Существует два способа это сделать:
# Программы в CONFIG_FILE_SIGNAL_PROGRAMS принимают сигнал SIGHUP после того,
# как конфигурационные файлы были заменены. Большинство стандартных демонов
# syslog воспринимает это как сигнал к перезагрузке конфигурационных файлов.
# Метод может работать и с другими демонами, но не всегда.
# Для сервисов, перечисленных в CONFIG_FILE_RELOAD_SERVICES, LMT вызывает скрипт
# *init* с параметром *reload*. Демон перезагружается, считывая параметры
# уже из нового файла конфигурации.
#
CONFIG_FILE_SIGNAL_PROGRAMS="syslogd syslog-ng rsyslogd"
CONFIG_FILE_RELOAD_SERVICES=""

```

В состав LMT включена программа lm-profiler. Наблюдая за вашей системой в течение 10 минут, она выведет статистику чтения/записи:

```
# lm-profiler

```

За 10 минут syslog-ng вызывал запись на диск в течение 40 раз. Соответственно модуль `configuration-file-control` весьма полезен.

`start-stop-programs.conf`

```
#
# Конфигурационный файл LMT для настройки модуля start-stop-programs.
#
# Для дополнительной информации ознакомьтесь со справкой (laptop-mode.conf(8) man page).

###############################################################################
# Настойки запуска/остановки программ
# -----------------------------------
#
# LMT может автоматически запускать или завершать работу программ в зависимости
# от источника питания. Поместите скрипты, понимающие параметры "start" и "stop"
# в директории:
#    /etc/laptop-mode/batt-stop
#    /etc/laptop-mode/batt-start
#    /etc/laptop-mode/lm-ac-stop
#    /etc/laptop-mode/lm-ac-start
#    /etc/laptop-mode/nolm-ac-stop
#    /etc/laptop-mode/nolm-ac-start
#
# LMT будет контролировать запуск/остановку скриптов, в зависимости от текущего
# состояния. В случае если вы просто хотите запускать/останавливать сервисы,
# вы можете поместить названия этих сервисов в соответствующие значения опций
# ..._STOP и ..._START, указанных ниже.
#
# ВАЖНО: В версиях LMT 1.36 и более ранних, эти настройки были включены в основной
# конфигурационный файл `laptop-mode.conf`. Опции, указанные в этом файле
# имеют более высокий приоритет. Если они ещё присутствуют, просто удалите их.
#
###############################################################################

# Включить режим отладки для модуля?
# Выберите 1, чтобы включить его для этого модуля
DEBUG=0

#
# Должен ли LMT запускать/останавливать программы?
#
CONTROL_START_STOP=1

#
# Запуск/остановка сервисов определяется типом питания и активностью LMT.
#
# Эти сервисы запускаются/останавливаются с помощью их собственных сценариев
# (init scripts), вместе с пользовательскими скриптами (см. выше). Укажите ниже
# необходимые сервисы, разделяя их пробелами.
#
BATT_STOP=""
BATT_START=""
LM_AC_STOP=""
LM_AC_START=""
NOLM_AC_STOP=""
NOLM_AC_START=""

```

`exec-commands.conf`

```
#
# Конфигурационный файл LMT для настройки модуля exec-commands
#
# Для дополнительной информации ознакомьтесь со справкой (laptop-mode.conf(8) man page).
#

###############################################################################
# Выполнение пользовательских команд для энергосбережения
# -------------------------------------------------------
#
# При использовании данной опции, LMT будет выполнять ваши специфические
# команды, в зависимости от активности LMT и источника питания.
# Пожалуйста, дважды проверьте ваши команды, прежде чем использовать их здесь.
#
###############################################################################

# Включить модуль exec-commands?
CONTROL_EXEC_COMMANDS="auto"

# Включить режим отладки для модуля?
# Выберите 1, чтобы включить его для этого модуля
DEBUG=0

# Список команд
# Команды будут запускаться в ответ на указанные события (активность LMT,
# смена источника питания).
# Пожалуйста, хорошо проверяйте свои команды, ведь они запускаются от root.
# Вы можете использовать не более 10  команд (нумерация с нуля).
#
BATT_EXEC_COMMAND_0="" # Добавте здесь свою команду №0 для энергосбережения
LM_AC_EXEC_COMMAND_0="" # Enable power saving feature 0 here
NOLM_AC_EXEC_COMMAND_0="" # Disable power saving feature 0 here

BATT_EXEC_COMMAND_1="" # Enable power saving feature 1 here
LM_AC_EXEC_COMMAND_1="" # Enable power saving feature 1 here
NOLM_AC_EXEC_COMMAND_1="" # Disable power saving feature 1 here

BATT_EXEC_COMMAND_2="" # Enable power saving feature 2 here
LM_AC_EXEC_COMMAND_2="" # Enable power saving feature 2 here
NOLM_AC_EXEC_COMMAND_2="" # Disable power saving feature 2 here

BATT_EXEC_COMMAND_3="" # Enable power saving feature 3 here
LM_AC_EXEC_COMMAND_3="" # Enable power saving feature 3 here
NOLM_AC_EXEC_COMMAND_3="" # Disable power saving feature 3 here

BATT_EXEC_COMMAND_4="" # Enable power saving feature 4 here
LM_AC_EXEC_COMMAND_4="" # Enable power saving feature 4 here
NOLM_AC_EXEC_COMMAND_4="" # Disable power saving feature 4 here

BATT_EXEC_COMMAND_5="" # Enable power saving feature 5 here
LM_AC_EXEC_COMMAND_5="" # Enable power saving feature 5 here
NOLM_AC_EXEC_COMMAND_5="" # Disable power saving feature 5 here

BATT_EXEC_COMMAND_6="" # Enable power saving feature 6 here
LM_AC_EXEC_COMMAND_6="" # Enable power saving feature 6 here
NOLM_AC_EXEC_COMMAND_6="" # Disable power saving feature 6 here

BATT_EXEC_COMMAND_7="" # Enable power saving feature 7 here
LM_AC_EXEC_COMMAND_7="" # Enable power saving feature 7 here
NOLM_AC_EXEC_COMMAND_7="" # Disable power saving feature 7 here

BATT_EXEC_COMMAND_8="" # Enable power saving feature 8 here
LM_AC_EXEC_COMMAND_8="" # Enable power saving feature 8 here
NOLM_AC_EXEC_COMMAND_8="" # Disable power saving feature 8 here

BATT_EXEC_COMMAND_9="" # Enable power saving feature 9 here
LM_AC_EXEC_COMMAND_9="" # Enable power saving feature 9 here
NOLM_AC_EXEC_COMMAND_9="" # Disable power saving feature 9 here

```

## Хитрости

Используя `exec-commands.conf` можно заставить вашу видеокарту ATI потреблять меньше энергии. См. [ATI Powersawing](/index.php/ATI#Powersaving "ATI") за пояснениями по коммандам. Данный способ предполагает, что вы используете [KMS](/index.php/KMS "KMS"). Пример части файла `exec-commands.conf`. Перед тем как добавить эти команды в ваш файл, убедитесь, что на вашей системе они работают корректно.

```
CONTROL_EXEC_COMMANDS="1"

BATT_EXEC_COMMAND_0="echo low > /sys/class/drm/card0/device/power_profile"
LM_AC_EXEC_COMMAND_0="echo default > /sys/class/drm/card0/device/power_profile"
NOLM_AC_EXEC_COMMAND_0="echo default > /sys/class/drm/card0/device/power_profile"

```

При переключении между режимами питания дисплей может мигнуть. Чтобы посмотреть, работает ли масштабирование частоты видеокарты, выполните:

 `$ watch cat /sys/kernel/debug/dri/0/radeon_pm_info` 

Пример вывода:

```
state: PM_STATE_ENABLED
default engine clock: 300000 kHz
current engine clock: 300720 kHz
default memory clock: 200000 kHz

```

Если `/sys/kernel/debug` пуст, выполните команду:

 `# mount -t debugfs none /sys/kernel/debug` 

Вы можете включить автоматическое монтирования этой файловой системы при загрузке. Для этого добавьте следующую строку в `/etc/fstab`:

```
debugfs   /sys/kernel/debug   debugfs   defaults   0   0

```

## См. также

*   [Статья об энергосбережении на Habrahabr](http://habrahabr.ru/blogs/linux/115451/)
*   [Официальный сайт Laptop Mode Tools](http://samwel.tk/laptop_mode/)
*   [http://mailman.samwel.tk/pipermail/laptop-mode/](http://mailman.samwel.tk/pipermail/laptop-mode/) Архив списков рассылок]