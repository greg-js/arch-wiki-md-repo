## Contents

*   [1 Настройки для ноутбуков](#.D0.9D.D0.B0.D1.81.D1.82.D1.80.D0.BE.D0.B9.D0.BA.D0.B8_.D0.B4.D0.BB.D1.8F_.D0.BD.D0.BE.D1.83.D1.82.D0.B1.D1.83.D0.BA.D0.BE.D0.B2)
*   [2 Менеджер питания](#.D0.9C.D0.B5.D0.BD.D0.B5.D0.B4.D0.B6.D0.B5.D1.80_.D0.BF.D0.B8.D1.82.D0.B0.D0.BD.D0.B8.D1.8F)
    *   [2.1 Утилиты для мониторинга заряда батареи](#.D0.A3.D1.82.D0.B8.D0.BB.D0.B8.D1.82.D1.8B_.D0.B4.D0.BB.D1.8F_.D0.BC.D0.BE.D0.BD.D0.B8.D1.82.D0.BE.D1.80.D0.B8.D0.BD.D0.B3.D0.B0_.D0.B7.D0.B0.D1.80.D1.8F.D0.B4.D0.B0_.D0.B1.D0.B0.D1.82.D0.B0.D1.80.D0.B5.D0.B8)
    *   [2.2 Настройка батареи на Thinkpad](#.D0.9D.D0.B0.D1.81.D1.82.D1.80.D0.BE.D0.B9.D0.BA.D0.B0_.D0.B1.D0.B0.D1.82.D0.B0.D1.80.D0.B5.D0.B8_.D0.BD.D0.B0_Thinkpad)
    *   [2.3 TLP для Thinkpad](#TLP_.D0.B4.D0.BB.D1.8F_Thinkpad)
    *   [2.4 Cpufrequtils](#Cpufrequtils)
    *   [2.5 Pm-utils](#Pm-utils)
    *   [2.6 Lapsus](#Lapsus)
    *   [2.7 Установка PowerTOP](#.D0.A3.D1.81.D1.82.D0.B0.D0.BD.D0.BE.D0.B2.D0.BA.D0.B0_PowerTOP)
    *   [2.8 Laptop mode tools](#Laptop_mode_tools)
    *   [2.9 Powernowd](#Powernowd)
    *   [2.10 PCIe ASPM](#PCIe_ASPM)
    *   [2.11 Предложения для экономии энергии](#.D0.9F.D1.80.D0.B5.D0.B4.D0.BB.D0.BE.D0.B6.D0.B5.D0.BD.D0.B8.D1.8F_.D0.B4.D0.BB.D1.8F_.D1.8D.D0.BA.D0.BE.D0.BD.D0.BE.D0.BC.D0.B8.D0.B8_.D1.8D.D0.BD.D0.B5.D1.80.D0.B3.D0.B8.D0.B8)
        *   [2.11.1 Беспроводные устройства](#.D0.91.D0.B5.D1.81.D0.BF.D1.80.D0.BE.D0.B2.D0.BE.D0.B4.D0.BD.D1.8B.D0.B5_.D1.83.D1.81.D1.82.D1.80.D0.BE.D0.B9.D1.81.D1.82.D0.B2.D0.B0)
        *   [2.11.2 Остальное](#.D0.9E.D1.81.D1.82.D0.B0.D0.BB.D1.8C.D0.BD.D0.BE.D0.B5)
            *   [2.11.2.1 Настройки для жёсткого диска](#.D0.9D.D0.B0.D1.81.D1.82.D1.80.D0.BE.D0.B9.D0.BA.D0.B8_.D0.B4.D0.BB.D1.8F_.D0.B6.D1.91.D1.81.D1.82.D0.BA.D0.BE.D0.B3.D0.BE_.D0.B4.D0.B8.D1.81.D0.BA.D0.B0)
            *   [2.11.2.2 Проблемы с понижением скорости вращения жёсткого диска](#.D0.9F.D1.80.D0.BE.D0.B1.D0.BB.D0.B5.D0.BC.D1.8B_.D1.81_.D0.BF.D0.BE.D0.BD.D0.B8.D0.B6.D0.B5.D0.BD.D0.B8.D0.B5.D0.BC_.D1.81.D0.BA.D0.BE.D1.80.D0.BE.D1.81.D1.82.D0.B8_.D0.B2.D1.80.D0.B0.D1.89.D0.B5.D0.BD.D0.B8.D1.8F_.D0.B6.D1.91.D1.81.D1.82.D0.BA.D0.BE.D0.B3.D0.BE_.D0.B4.D0.B8.D1.81.D0.BA.D0.B0)
            *   [2.11.2.3 Тонкая настройка планировщика](#.D0.A2.D0.BE.D0.BD.D0.BA.D0.B0.D1.8F_.D0.BD.D0.B0.D1.81.D1.82.D1.80.D0.BE.D0.B9.D0.BA.D0.B0_.D0.BF.D0.BB.D0.B0.D0.BD.D0.B8.D1.80.D0.BE.D0.B2.D1.89.D0.B8.D0.BA.D0.B0)
*   [3 Яркость экрана](#.D0.AF.D1.80.D0.BA.D0.BE.D1.81.D1.82.D1.8C_.D1.8D.D0.BA.D1.80.D0.B0.D0.BD.D0.B0)
*   [4 Тачпад](#.D0.A2.D0.B0.D1.87.D0.BF.D0.B0.D0.B4)
*   [5 Горячие кнопки](#.D0.93.D0.BE.D1.80.D1.8F.D1.87.D0.B8.D0.B5_.D0.BA.D0.BD.D0.BE.D0.BF.D0.BA.D0.B8)
*   [6 Защита жёсткого диска от от ударов](#.D0.97.D0.B0.D1.89.D0.B8.D1.82.D0.B0_.D0.B6.D1.91.D1.81.D1.82.D0.BA.D0.BE.D0.B3.D0.BE_.D0.B4.D0.B8.D1.81.D0.BA.D0.B0_.D0.BE.D1.82_.D0.BE.D1.82_.D1.83.D0.B4.D0.B0.D1.80.D0.BE.D0.B2)

## Настройки для ноутбуков

Эта страница содержит ссылки на страницы, необходимых настроек для улучшения работы ноутбука. Существует много способов настройки ноутбука, так же как и рабочего окружения. Однако есть несколько ключевых отличий. При настройке ноутбука с Arch Linux, следующие моменты должны быть учтены:

*   Потребляемая мощность: как сделать чтоб батареи хватало на больший промежуток времени? Что делает менеджер питания:
    *   Замедление жёсткого диска. Через сколько минут бездействия жёсткий диск должен быть остановлен?
    *   Управление яркостью экрана и его полное выключение при бездействии.
    *   Изменение частоты процессора. Как следует изменять частоту процессора в зависимости от нагрузки, чтобы уменьшить потребление энергии?
    *   Настройка перехода в режим ожидания и режим сна.

*   Настройка режимов энергосбережения для адаптеров беспроводных сетей.
*   Использование мультимедийных кнопок.
*   Конфигурирование тачпада: настройка чувствительности, ускорения, функций кнопок и прокрутки границ для Synaptics или Alps.

Все эти моменты важно принимать во внимание при выборе ноутбука для настройки по своему вкусу. К счастью, Arch Linux предоставляет все инструменты и программы, необходимые для полного контроля вашего ноутбука. Эти программы и утилиты представлены ниже, с соответствующими советами и инструкциями.

Примечание: Следующие ссылки могут быть полезными:

*   [http://www.linux-on-laptops.com/](http://www.linux-on-laptops.com/)
*   [http://www.linlap.com/](http://www.linlap.com/)

## Менеджер питания

Управление питанием - это очень важно для любого, кто хочет использовать ёмкость батареи по максимуму. Следующие инструменты и программы помогают увеличить срок службы аккумуляторов и сохранить ваш ноутбук прохладным и тихим.

### Утилиты для мониторинга заряда батареи

Состояние зарядки аккумулятора можно узнать в терминале с помощью acpi. Acpi можно установить командой:

```
# pacman -S acpi

```

Простой монитор аккумулятора, который сидит в системной панели [batterymon](https://aur.archlinux.org/packages.php?ID=24694) можно найти в [AUR](/index.php/AUR "AUR").

### Настройка батареи на Thinkpad

Пожалуйста прочитайте статью [tp_smapi](/index.php/Tp_smapi "Tp smapi").

### TLP для Thinkpad

[TLP](/index.php/TLP "TLP") это набор скриптов, которые экономят энергию в соответствии с действующим источником питания. [TLP](/index.php/TLP "TLP") предназначен для использования на ноутбуках Thinkpad, но большинство настроек, должны работать на других ноутбуках.

### Cpufrequtils

[Cpufrequtils](/index.php/Cpufrequtils "Cpufrequtils") обеспечивает изменение частоты процессора, технология, используемая в основном в ноутбуках, которая позволяет операционной системе занижать или повышать скорость работы процессора, в зависимости от текущей загрузки системы или схемы питания. Для быстрой и простой установки и настройки, пожалуйста, посмотрите на статью [CPU frequency scaling](/index.php/CPU_frequency_scaling "CPU frequency scaling").

### Pm-utils

[Pm-utils](/index.php/Pm-utils "Pm-utils") обеспечивает приостановку питания и настройку системы. Pm-utils должны использоваться с cpufrequtils для того чтобы обеспечить полное управление питанием.

### Lapsus

[Lapsus](/index.php/ASUS_G1#The_Lapsus_daemon_.26_KDE_applet "ASUS G1") это набор программ, обеспечивающий легкий доступ к специфичекским возможностям различных ноутбуков. В настоящее время он поддерживает большинство функций, предоставляемых ноутбуками ASUS, модуль ядра от ACPI4Asus проекта, дополнительные светодиоды, горячие клавиши, подсветка управления и т.д. Он также поддерживает некоторые модели ноутбуков IBM, предоставляемые IBM ThinkPad ACPI дополнительные драйвера и устройства NVRAM.

### Установка PowerTOP

[PowerTOP](http://www.lesswatts.org/projects/powertop/) удобная утилита от Intel, которая показывает, какие аппаратные средства / процессы используют энергию в вашей системе, и даёт инструкции о том, как остановить или удалить процессы использующие энергию. Прекрасно работает для мобильных процессоров Intel, обеспечивает текущее состояние процессора и предложения для экономии энергии. Также работает на системах AMD, но не обеспечивает обьёмной информацией о состоянии процессора. Устанавливается с помощью команды:

```
# pacman -S powertop

```

### Laptop mode tools

Смотрите статью [Laptop Mode Tools](/index.php/Laptop_Mode_Tools_(%D0%A0%D1%83%D1%81%D1%81%D0%BA%D0%B8%D0%B9) "Laptop Mode Tools (Русский)").

### Powernowd

[Powernowd](/index.php/Powernowd "Powernowd") - это программа для отключения процессора динамически, которая может быть использована на системах AMD или [Intel](/index.php/Intel_graphics_(%D0%A0%D1%83%D1%81%D1%81%D0%BA%D0%B8%D0%B9) "Intel graphics (Русский)"). Тем не менее, _cpufrequtils_, описанный выше, обеспечивает более современную альтернативу, о чем свидетельствует тот факт, что _powernowd_ был создан до существования регулятора _OnDemand_.

Для его использования установите пакет [powernowd](https://aur.archlinux.org/packages/powernowd/).

Чтобы настроить его, просто отредактируйте ваш `/etc/conf.d/powernowd`:

```
OPTIONS="-q -u 15 -l 5"

```

### PCIe ASPM

На некоторых ноутбуках, powertop предполагает включение CONFIG_PCIEASPM в параметр ядра. Он может быть найден "Bus options (PCI etc.)"->"PCI Express ASPM support". Эта опция помечена как экспериментальная в ядре (2.6.35) и позволяет PCIe входить в состояние энергосбережения.

В соответствии с [[1]](http://www.lesswatts.org/projects/devices-power-management/pcie.php), эта опция может привести к снижению производительности бит, а в ноутбуке Acer 3820TG, это может уменьшить потребление энергии примерно на одну треть или даже больше.

Большой опыт работы с этой настройкой очень ценен, поэтому, пожалуйста, поделитесь им здесь [here](https://bbs.archlinux.org/viewtopic.php?id=107173)!

Похоже, что опция будет включена по умолчанию в ядро 2.6.36; если это так, то информация здесь скоро станет устаревшей.

### Предложения для экономии энергии

#### Беспроводные устройства

Когда вы часто в пути и не пользуетесь возможностью беспроводной сети вашего ноутбука, целесообразно добавить небольшой скрипт в авто запуск вашей системы, который будет автоматически выключать WIFI адаптер.Ваш адаптер не будет искать доступные точки доступа, тем самым экономя энергию:

```
 #!/bin/bash

essid="`iwconfig wlan0 | grep ESSID | awk {'print $4'}`"
	if [ "$essid" == "ESSID:off/any" ] ; then
		sudo iwconfig wlan0 txpower off
	fi

```

[edit, if wlan0 ain't your WLAN-device]

Запустите скрипт в соответствии с вашими опциями DE/WM '(sleep xx && /path/to/script)' в зависимости от того сколько времени обычно требуется для подключения к вашей точке доступа, 60 секунд-хорошее значение по умолчанию.Он будет проверять ваше соединение и если его нет выключать устройство.

sudo iwconfig wlan0 txpower on

Команда включения, но возможно потребуется перезагрузка.

#### Остальное

**Обратите внимание:** Мало того, что следующие хитрости не требуются при использовании ноутбука с laptop-mode-tools,но, использование laptopmode также даёт вам преимущество применять их только при необходимости (то есть, в то время как СЕТЕВОЙ кабель отключён.)

##### Настройки для жёсткого диска

Отключить время доступа к файлам: каждый раз, когда вы получаете доступ на (чтение) файлов файловой системы, пишется время доступа к файлу метаданных. Вы можете отключить это для определённых файлов командой chattr, или вы можете отключить его на весь диск, установив опцию _noatime_ в файле fstab, следующим образом:

```
/dev/sda1          /          ext3          defaults,noatime          1  2

```

[Source](http://www.faqs.org/docs/securing/chap6sec73.html)

**Обратите внимание:** отключение atime вызывает проблемы с [mutt](/index.php/Mutt "Mutt") а так же у приложений, которые используют временные метки файлов. Учитывайте ущерб между производительностью и совместимостью с помощью параметра монтирования relatime , или загляните в [mutt work-around for noatime](http://wiki.mutt.org/?MaildirFormat)

Чтобы разрешить CD / DVD-ROM замедлить вращение через некоторое время, выполните следующее:

```
/usr/bin/hal-disable-polling --device /dev/scd0

```

##### Проблемы с понижением скорости вращения жёсткого диска

Документировано [here](https://bugs.launchpad.net/ubuntu/+source/acpi-support/+bug/59695)

Для предотвращения слишком частой остановки жёсткого диска вашего ноутбука (результат работы слишком агрессивной APM по умолчанию ) сделайте следующее:

Добавьте в _/etc/rc.local_

```
hdparm -B 254 /dev/sdX _где X-это ваш жесткий диск_

```

Вы можете также установить его до 255, чтобы полностью отключить остановку. Вы можете установить меньшее значение при перемещении ноутбука, более низкие значения парковки головок снижают вероятность повреждения жёсткого диска во время его перемещения. Если вы не перемещаете ваш ноутбук вообще, когда вы его используете, то 255 или 254, лучшее значение. Если вы так делаете, то возможно, захотите попробовать меньшее значение. Значение, к примеру, 128 может быть хорошим средним значением.

Добавьте в _/etc/pm/sleep.d/50-hdparm_pm_

```
#!/bin/sh

if [ -n "$1" ] && ([ "$1" = "resume" ] || [ "$1" = "thaw" ]); then
	hdparm -B 254 /dev/your-hard-drive > /dev/null
fi

```

and run "chmod +x /etc/pm/sleep.d/50-hdparm_pm" убедитесь, что он сбрасывается после приостановки. Опять же, вы можете изменить значение 254, так как считаете нужным.

Теперь APM уровни должны быть установлены на вашем жёстком диске.

Для некоторых ноутбуков, опция -S в hdparm может быть необходимой (устанавливает время остановки для жёсткого диска). Обратите внимание, что все эти опции также могут быть настроены с помощью [laptop-mode tools](/index.php/Laptop_Mode_Tools "Laptop Mode Tools"). Это позволит вам установить высокое значение, когда работаете от сети переменного тока и низкое значение, когда вы работаете от батареи.

##### Тонкая настройка планировщика

Для многоядерных и с hyperthreading поддержкой процессоров вы можете использовать sched_mc_power_savings и sched_smt_power_savings опции, соответственно, чтобы планировщик сдерживал бездействие, стольких ядер, скольких возможно. Чтобы включить эти опции вы можете сделать

```
echo 1 > /sys/devices/system/cpu/sched_mc_power_savings

```

или

```
echo 1 > /sys/devices/system/cpu/sched_smt_power_savings

```

Поставив 0 отключите их. Так же laptop-mode может быть использован для управления shed_mc_power_savings (см. соответствующий конфигурационный файл в /etc/laptop-mode/conf.d). --[Kasbah](/index.php?title=User:Kasbah&action=edit&redlink=1 "User:Kasbah (page does not exist)") 16:14, 14 Август 2009 (EDT)

## Яркость экрана

Смотрите страницу [Backlight (Русский)](/index.php/Backlight_(%D0%A0%D1%83%D1%81%D1%81%D0%BA%D0%B8%D0%B9) "Backlight (Русский)").

## Тачпад

Чтобы ваш тачпад работал должным образом, смотрите страницу [Touchpad Synaptics](/index.php/Touchpad_Synaptics "Touchpad Synaptics"). Обратите внимание, ваш ноутбук может иметь ALPS тачпад (такой как у DELL Inspiron 6000), он отличается от Synaptics тачпад. В любом случае, см. ссылку выше.

## Горячие кнопки

Для настройки специальных клавиш или кнопок на вашем ноутбуке, пожалуйста, обратитесь к странице [Extra keyboard keys](/index.php/Extra_keyboard_keys_(%D0%A0%D1%83%D1%81%D1%81%D0%BA%D0%B8%D0%B9) "Extra keyboard keys (Русский)").

## Защита жёсткого диска от от ударов

Есть несколько ноутбуков от разных производителей с возможностью защиты от ударов. Производители отказываются поддерживать разработки необходимых компонентов программного обеспечения с открытым кодом до сих пор, по этому в Linux поддержка защиты от ударов значительно различается между разными аппаратными реализациями.

В настоящее время два проекта, под названием HDAPS и hpfall, поддерживают данный вид защиты. HDAPS для IBM/Lenovo Thinkpads и hpfall для ноутбуков HP/Compaq.

Просто проверьте [Hard Disk Active Protection System](/index.php/HDAPS "HDAPS"). Hpfall может быть установлен из AUR [https://aur.archlinux.org/packages.php?ID=45093](https://aur.archlinux.org/packages.php?ID=45093)