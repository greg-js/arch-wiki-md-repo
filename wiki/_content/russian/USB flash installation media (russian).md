**Состояние перевода:** На этой странице представлен перевод статьи [USB flash installation media](/index.php/USB_flash_installation_media "USB flash installation media"). Дата последней синхронизации: 16 декабря 2018\. Вы можете [помочь](/index.php/ArchWiki_Translation_Team_(%D0%A0%D1%83%D1%81%D1%81%D0%BA%D0%B8%D0%B9) "ArchWiki Translation Team (Русский)") синхронизировать перевод, если в английской версии произошли [изменения](https://wiki.archlinux.org/index.php?title=USB_flash_installation_media&diff=0&oldid=559198).

Related articles

*   [Оптический привод#Запись](/index.php/%D0%9E%D0%BF%D1%82%D0%B8%D1%87%D0%B5%D1%81%D0%BA%D0%B8%D0%B9_%D0%BF%D1%80%D0%B8%D0%B2%D0%BE%D0%B4#Запись "Оптический привод")
*   [Archiso (Русский)](/index.php/Archiso_(%D0%A0%D1%83%D1%81%D1%81%D0%BA%D0%B8%D0%B9) "Archiso (Русский)")
*   [Multiboot USB drive](/index.php/Multiboot_USB_drive "Multiboot USB drive")

На этой странице описаны различные способы создания загрузочной флешки с Arch Linux как для загрузки в системах с BIOS, так и с UEFI. Результатом будет система LiveUSB (подобная LiveCD), которую можно будет использовать для установки Arch Linux, обслуживания системы или в целях восстановления. Обратите внимание, что после выключения все изменения на носителе будут отмены из-за особенностей [SquashFS](https://en.wikipedia.org/wiki/ru:Squashfs "wikipedia:ru:Squashfs").

Если вам нужно запускать Arch Linux с USB-накопителя с сохранением изменений, посмотрите статью [Installing Arch Linux on a USB key](/index.php/Installing_Arch_Linux_on_a_USB_key "Installing Arch Linux on a USB key"). Если вы хотите использовать загрузочный USB-носитель Arch Linux в целях восстановления, посмотрите статью [Cмена суперпользователя](/index.php/Chroot_(%D0%A0%D1%83%D1%81%D1%81%D0%BA%D0%B8%D0%B9) "Chroot (Русский)").

## Contents

*   [1 Создание загрузочного USB для BIOS и UEFI](#Создание_загрузочного_USB_для_BIOS_и_UEFI)
    *   [1.1 Используя автоматические инструменты](#Используя_автоматические_инструменты)
        *   [1.1.1 В GNU/Linux](#В_GNU/Linux)
            *   [1.1.1.1 Через dd](#Через_dd)
            *   [1.1.1.2 Через etcher](#Через_etcher)
        *   [1.1.2 В Windows](#В_Windows)
            *   [1.1.2.1 Через Rufus](#Через_Rufus)
            *   [1.1.2.2 Через USBwriter](#Через_USBwriter)
            *   [1.1.2.3 Через win32diskimager](#Через_win32diskimager)
            *   [1.1.2.4 Через Cygwin](#Через_Cygwin)
            *   [1.1.2.5 через dd для Windows](#через_dd_для_Windows)
        *   [1.1.3 В macOS](#В_macOS)
    *   [1.2 Используя ручное форматирование](#Используя_ручное_форматирование)
        *   [1.2.1 В GNU/Linux](#В_GNU/Linux_2)
        *   [1.2.2 В Windows](#В_Windows_2)

## Создание загрузочного USB для BIOS и UEFI

### Используя автоматические инструменты

#### В GNU/Linux

##### Через dd

**Примечание:** Этот способ рекомендуется из-за своей простоты. Если через него не получилось, попробуйте альтернативный метод [#Используя ручное форматирование](#Используя_ручное_форматирование) ниже.

**Важно:** Это уничтожит безвозвратно все файлы на `/dev/**sdx**`. Чтобы восстановить USB-накопитель как пустое, пригодное для использования запоминающее устройство после использования ISO-образа Arch, необходимо удалить подпись файловой системы ISO 9660, выполнив `wipefs --all /dev/**sdx**` от суперпользователя, перед [разметкой](/index.php/%D0%A0%D0%B0%D0%B7%D0%BC%D0%B5%D1%82%D0%BA%D0%B0_%D0%B4%D0%B8%D1%81%D0%BA%D0%B0 "Разметка диска") и [форматированием](/index.php/%D0%A4%D0%B0%D0%B9%D0%BB%D0%BE%D0%B2%D1%8B%D0%B5_%D1%81%D0%B8%D1%81%D1%82%D0%B5%D0%BC%D1%8B#Создание_файловой_системы "Файловые системы").

**Совет:** Узнать имя вашей флешки можно с помощью `lsblk`. Убедитесь что она **не** подключена.

Выполните следующую команду, заменив `/dev/**sdx**` на ваше устройство, например, на `/dev/sdb`. (**Не** добавляйте номер раздела, т.е. **не** используйте что-то вроде `/dev/sdb**1**`)

```
# dd bs=4M if=/путь/до/archlinux.iso of=/dev/**sdx** status=progress oflag=sync

```

Для получения дополнительной информации о [dd](/index.php/Dd "Dd") смотрите [dd(1)](https://jlk.fjfi.cvut.cz/arch/manpages/man/dd.1). А для получения дополнительной информации о `oflag=sync` смотрите [dd(1)](https://jlk.fjfi.cvut.cz/arch/manpages/man/dd.1#DESCRIPTION).

##### Через etcher

[Etcher](https://etcher.io/) - утилита для записи образов ОС, написанная с помощью node.js и Electron. Она умеет записывать на SDCard и USB-носитель. Etcher защищает вас от случайной записи на жесткий диск и гарантирует, что каждый байт данных был записан правильно. В AUR есть 6 связанных пакетов.

#### В Windows

##### Через Rufus

[Rufus](https://rufus.akeo.ie/) - универсальная утилита для записи ISO на USB-накопители. Просто выберите образ Arch Linux, USB-накопитель, который вы хотите сделать загрузочным, и нажмите *СТАРТ*.

Поскольку Rufus не проверяет правильно ли отформатировано устройство и предоставляет GUI, его можно посчитать самым простым и надежным инструментом для использования.

**Примечание:** Образ должен быть записан в режиме **DD Image mode**.

*   Для версий Rufus ≥ 3.0 выберите *GPT* в *Схема раздела*. После нажатия *СТАРТ* вы получите диалоговое окно для выбора режима, выберите *DD Image mode*.
*   Для версий Rufus < 3.0 выберите режим *DD Image* из выпадающего меню внизу.

##### Через USBwriter

Этот способ не требует каких-либо обходных решений и прост как `dd` в Linux. Вам нужно только скачать образ Arch Linux и использовать утилиту [USBwriter](https://sourceforge.net/p/usbwriter/wiki/Documentation/) с локальными правами администратора для записи USB флешки.

##### Через win32diskimager

[win32diskimager](https://sourceforge.net/projects/win32diskimager/) - инструмент для записи iso на USB с GUI для Windows. Просто выберите ваш iso образ и букву USB-носителя (вам может потребоваться сначала отформатировать его для назначения буквы), потом нажмите Write.

##### Через Cygwin

Убедитесь, что установка [Cygwin](https://www.cygwin.com/) содержит пакет `dd`.

**Совет:** Если вы не хотите устанавливать Cygwin, вы можете скачать `dd` для Windows [здесь](http://www.chrysocome.net/dd). Для получения дополнительной информации смотрите следующий раздел.

Положите образ в ваш домашний каталог:

```
C:\cygwin\home\John\

```

Запустите cygwin от администратора (это необходимо cygwin'y для доступа к железу). Для записи на USB-носитель выполните следующую команду:

```
dd if=образ.iso of=\\.\**x**: bs=4M

```

где image.iso - путь до образа iso без директории `cygwin`, а `\\.\**x**:` - ваша флешка, где `**x**` это буква, присвоенная устройству windows, например, `\\.\d:`.

В Cygwin 6.0 узнайте имя устройства с помощью:

```
cat /proc/partitions

```

и запишите образ ISO, согласно выходной информации предыдущей команды. Например:

**Важно:** Это уничтожит безвозвратно все файлы на USB-накопителе, поэтому убедитесь, что на нем нет важных файлов перед этим.

```
dd if=образ.iso of=/dev/sdb bs=4M

```

##### через dd для Windows

GPL версия dd для Windows доступна на сайте [http://www.chrysocome.net/dd](http://www.chrysocome.net/dd). Преимуществом над Cygwin является меньший размер. Используйте его, как показано в инструкциях для Cygwin выше.

Для начала скачайте последнюю версию dd для Windows. После загрузки распакуйте содержимое архива в каталог Загрузки или в другое место.

Теперь запустите `командную строку` от администратора. Далее смените директорию с помощью (`cd`) на Загрузки.

Если ISO Arch Linux в другом месте, укажите полный путь до него. Для удобства вы можете поместить образ Arch Linux в ту же папку, что и исполняемый файл dd. Основной формат команды будет выглядеть следующим образом.

```
# dd if=*archlinux-2017-XX-YY-x86_64.iso* od=\\.\*x*: bs=4M

```

**Примечание:** Буквы дисков в Windows связаны с разделами. Чтобы разрешить выбор всего диска, *dd для Windows* имеет параметр `od`, который используется в приведенных выше командах. Однако обратите внимание, что этот параметр относится к версии *dd для Windows* и может отсутствовать в других реализациях *dd*.

**Важно:** Из-за использования параметра `od` все разделы на выбранном диске будут уничтожены. Перед выполнением убедитесь, что вы ввели правильное имя устройства.

Замените все различные пустые места (обозначенные "x") правильной датой и правильной буквой диска. Вот полный пример.

```
# dd if=ISOs\archlinux-2017.04.01-x86_64.iso od=\\.\d: bs=4M

```

**Примечание:** Альтернативно, замените букву устройства на `\\.\PhysicalDrive*X*`, где `*X*` - физический номер устройства (начинается с 0). Например: `# dd if=ISOs\archlinux-2017.04.01-x86_64.iso of=\\.\PhysicalDrive1 bs=4M` 

Вы можете узнать физический номер вводом `wmic diskdrive list brief` в комадную строку или с `dd --list`.

Любые окна Проводника должны быть закрыты или dd сообщит об ошибке.

#### В macOS

Сначала, вам нужно идентифицировать USB-устройство. Откройте `/Applications/Utilities/Terminal` и перечислите все устройства хранения с помощью команды:

```
$ diskutil list

```

Ваше USB-устройство появится, как `/dev/disk2 (external, physical)`. Убедитесь, что это устройство, которое вы хотите использовать, проверив его имя и размер, а затем используйте его идентификатор для приведенных ниже команд вместо /dev/diskX.

USB-устройства обычно автомонтируются в macOS, и вам необходимо отключить его (не извлечь) перед записью через `dd`. В Терминале выполните:

```
$ diskutil unmountDisk /dev/diskX

```

Теперь скопируйте ISO образ на устройство. Команда `dd` похожа на версию dd в Linux, но заметьте, что 'r' перед 'disk' обозначает режим raw, который делает процесс намного быстрее:

```
# dd if=path/to/arch.iso of=/dev/**r**diskX bs=1m

```

Обратите внимание, что в `diskX` здесь не включается суффикс `s1`, иначе USB-носитель будет загружаться только в режиме UEFI, а не в legacy. После завершения macOS может жаловаться, что "The disk you inserted was not readable by this computer" ("Вставленный диск не читается этим компьютером"). Выберите 'Игнорировать'. Устройство USB будет загрузочным.

### Используя ручное форматирование

#### В GNU/Linux

Это способ сложнее, чем запись напрямую через `dd`. Но преимуществом этого способа - сохранение возможности хранение прочей информации на флешки (ISO образ устанавливается в определенный раздел уже [размеченного устройства](/index.php/%D0%A0%D0%B0%D0%B7%D0%BC%D0%B5%D1%82%D0%BA%D0%B0_%D0%B4%D0%B8%D1%81%D0%BA%D0%B0 "Разметка диска") без изменения оставшихся).

**Примечание:** Здесь мы будем обозначать нужный раздел как `/dev/sd**Xn**`. Во всех следующих командах заменяйте **X** и **n** на необходимые вам.

*   Убедитесь, что пакет [syslinux](https://www.archlinux.org/packages/?name=syslinux) установлен.
*   Если вы еще не разметили накопитель, то создайте таблицу разделов и/или разделы прежде чем продолжить. Раздел `/dev/sd**Xn**` должен быть отформатирован в [FAT32](/index.php/FAT_(%D0%A0%D1%83%D1%81%D1%81%D0%BA%D0%B8%D0%B9) "FAT (Русский)").
*   Смонтируйте ISO-образ, файловую систему FAT32, расположенную на USB-носителе, а потом скопируйте содержимое ISO образа на накопитель. Затем отмонтируйте образ ISO. Раздел FAT32 должен остаться примонтированным (он будет использоваться в последующих шагах). Например:

```
# mkdir -p /mnt/{iso,usb}
# mount -o loop archlinux-2017.04.01-x86_64.iso /mnt/iso
# mount /dev/sd**Xn** /mnt/usb
# cp -a /mnt/iso/* /mnt/usb
# sync
# umount /mnt/iso

```

Для загрузки требуется либо метка, либо [UUID](/index.php/Persistent_block_device_naming_(%D0%A0%D1%83%D1%81%D1%81%D0%BA%D0%B8%D0%B9) "Persistent block device naming (Русский)") для выбора раздела для загрузки. По умолчанию используется метка `ARCH_2017**XX**` (с соответствующим месяцем). Поэтому необходимо правильно установить метку раздела, например, используя *gparted*. Кроме того, вы можете изменить это поведение, отредактировав строки, заканчивающиеся на `archisolabel=ARCH_2017**XX**` в файле `/mnt/usb/arch/boot/syslinux/archiso_sys.cfg` (для загрузки с BIOS) и в `/mnt/usb/loader/entries/archiso-x86_64.conf` (для загрузки с UEFI). Для использования UUID замените эти части строк на `archiso*device*=/dev/disk/by-uuid/**ВАШ-UUID**`. UUID можно узнать с помощью `blkid -o value -s UUID /dev/sd**Xn**`.

**Важно:** Несоответствие метки или неправильный UUID препятствует загрузке с созданного носителя.

Syslinux уже предустановлен в `/mnt/usb/arch/boot/syslinux`. Установите его полностью в эту папку, следуя инструкциям в [Syslinux#Ручная установка](/index.php/Syslinux_(%D0%A0%D1%83%D1%81%D1%81%D0%BA%D0%B8%D0%B9)#Ручная_установка "Syslinux (Русский)").

#### В Windows

**Примечание:**

*   При ручном форматирование не используйте **утилиты для создания загрузочных USB** для UEFI. Также не используйте *dd для Windows*, чтобы записать ISO на USB.
*   В командах ниже **X:** предполагает USB-носитель в Windows.
*   Windows использует обратную косую черту {ic

для разделения пути, поэтому она в командах ниже.*   Все команды следует выполнять в командной строке Windows **от администратора**.*   `>` обозначает командную строку Windows.

}}

*   Разметку и форматирование USB-устройства выполните, используя [Rufus](https://rufus.akeo.ie/). Выберите схему разделов **MBR для BIOS и UEFI** и файловую систему **FAT32**. Уберите галку с "Create a bootable disk using ISO image" и с "Create extended label and icon files" options.
*   Измените **Метку устройства** USB-носителя `X:` на МЕТКУ `archisolabel=`, находящейся в `<ISO>\loader\entries\archiso-x86_64.conf`. Этот шаг необходим для официального ISO ([Archiso](/index.php/Archiso_(%D0%A0%D1%83%D1%81%D1%81%D0%BA%D0%B8%D0%B9) "Archiso (Русский)")). Этот шаг также можно было выполнить через Rufus, на предыдущем шаге "разбиение и форматирование".
*   Распакуйте ISO (похоже на распаковку архива ZIP) на флешку, используя [7-Zip](https://www.7-zip.org/).
*   Скачайте официальный бинарник Syslinux 6.xx (архив zip) с [https://www.kernel.org/pub/linux/utils/boot/syslinux/](https://www.kernel.org/pub/linux/utils/boot/syslinux/) и извлеките его. Версия Syslinux желательно должна совпадать с версией в образе ISO.

*   Запустите следующие команды (в cmd Windows от администратора):

```
> cd bios\
> for /r %Y in (*.c32) do copy "%Y" "X:\arch\boot\syslinux\" /y
> copy mbr\*.bin X:\arch\boot\syslinux\ /y

```

*   Установите Syslinux на USB (используйте `win64\syslinux64.exe` для x64 Windows):

```
> cd bios\
> win32\syslinux.exe -d /arch/boot/syslinux -i -a -m X:

```

**Примечание:**

*   Приведенный выше шаг устанавливает `ldlinux.sys` Syslinux'а в VBR раздела USB, устанавливает раздел как "активный/загрузочный" в таблице разделов MBR и записывает код загрузки MBR в 1-й 440-байтовый загрузочный код USB.
*   Параметр `-d` ожидает путь с разделителем пути косой черты, как в *unix системах.