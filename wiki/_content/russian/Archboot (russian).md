**Состояние перевода:** На этой странице представлен перевод статьи [Archboot](/index.php/Archboot "Archboot"). Дата последней синхронизации: 11 января 2017\. Вы можете [помочь](/index.php/ArchWiki_Translation_Team_(%D0%A0%D1%83%D1%81%D1%81%D0%BA%D0%B8%D0%B9) "ArchWiki Translation Team (Русский)") синхронизировать перевод, если в английской версии произошли [изменения](https://wiki.archlinux.org/index.php?title=Archboot&diff=0&oldid=463642).

Образ работает только в оперативной памяти, без каких-либо специальных файловых систем, таких как SquashFS, таким образом ограничиваясь только объёмом оперативной памяти, установленной в Вашей системе.

## Contents

*   [1 Установка](#Установка)
*   [2 Отличия от установочного образа archiso](#Отличия_от_установочного_образа_archiso)
*   [3 Релизы Archboot ISO](#Релизы_Archboot_ISO)
    *   [3.1 Гибридный образ](#Гибридный_образ)
    *   [3.2 Загрузка PXE / Восстановление системы](#Загрузка_PXE_/_Восстановление_системы)
    *   [3.3 Поддерживаемые режимы загрузки Archboot](#Поддерживаемые_режимы_загрузки_Archboot)
    *   [3.4 Как сделать удаленную установку через SSH?](#Как_сделать_удаленную_установку_через_SSH?)
    *   [3.5 Возможности интерактивной настройки](#Возможности_интерактивной_настройки)
    *   [3.6 FAQ, известные проблемы и ограничения](#FAQ,_известные_проблемы_и_ограничения)
    *   [3.7 История](#История)
    *   [3.8 Баги](#Баги)
*   [4 Релиз Archboot BETA ISO](#Релиз_Archboot_BETA_ISO)
*   [5 Ссылки](#Ссылки)
*   [6 Руководство по созданию образов](#Руководство_по_созданию_образов)
    *   [6.1 Требования](#Требования)
    *   [6.2 Создание archboot chroots](#Создание_archboot_chroots)
    *   [6.3 Установка archboot и обновление пакетов](#Установка_archboot_и_обновление_пакетов)
    *   [6.4 Сборка образа](#Сборка_образа)

## Установка

[Установите](/index.php/%D0%A3%D1%81%D1%82%D0%B0%D0%BD%D0%BE%D0%B2%D0%B8%D1%82%D0%B5 "Установите") пакет [archboot](https://www.archlinux.org/packages/?name=archboot).

## Отличия от установочного образа archiso

*   Он предоставляет дополнительную интерактивную настройку и быстрый скрипт.
*   Он содержит [core] репозиторий на носителях.
*   Он запускает модифицированную систему Arch Linux в initramfs.
*   Он ограничен использованием ОЗУ, все, что не нужно, как

	man или информационные страницы и т.д. не предоставляются.

*   Во время загрузки он ничего не монтирует.
*   Он поддерживает удаленную установку через ssh.

## Релизы Archboot ISO

*   Предоставляются гибридные образы и торренты, в том числе i686/x86_64 и [core] репозиторий,

	сетевые помеченные образы не включают [основной] репозиторий.

*   Пожалуйста, проверьте md5sum перед его использованием.
*   [Скачать 2016.12 „2k16-R3“](https://downloads.archlinux.de/iso/archboot/2016.12) / [Изменения](ftp://ftp.archlinux.org/iso/archboot/Changelog-2016.12-1.txt) / [Тема на форуме](https://bbs.archlinux.org/viewtopic.php?id=182439)

	ядро: 4.8.13-1

	pacman: 5.0.1-4

	systemd: 232-6

	рекомендации по ОЗУ: 800 МБ

### Гибридный образ

Файл гибридного образа можно прожечь на CD или использовать raw образ диска.

*   Может записываться на CD(RW) с использованием большинства утилит для записи компакт-дисков.
*   Может быть raw-written на диск с использованием 'dd' или подобных утилит. Этот способ предназначен для использования с флэш-накопителем USB.

 `'dd if=<imagefile> of=/dev/<yourdevice> bs=1M'` 

### Загрузка PXE / Восстановление системы

[Загрузите 2016.12 „2k16-R3“](https://downloads.archlinux.de/iso/archboot/2016.12/boot) необходимые файлы из каталога.

*   vmlinuz_i686 + initramfs_i686.img (i686)
*   vmlinuz_x86_64 + initramfs_x86_64.img(x86_64)
*   intel-ucode.img (x86_64/i686)
*   Для загрузки PXE добавьте ядро и initrd в настройку tftp, и вы получите запущенную систему установки/восстановления.
*   Для восстановления добавьте запись в ваш загрузчик, указывающий на ядро и initrd.

### Поддерживаемые режимы загрузки Archboot

*   Он поддерживает загрузку BIOS с помощью syslinux.
*   Он поддерживает загрузку UEFI/UEFI_CD с помощью [systemd-boot](/index.php/Systemd-boot_(%D0%A0%D1%83%D1%81%D1%81%D0%BA%D0%B8%D0%B9) "Systemd-boot (Русский)") и [EFISTUB](/index.php/EFISTUB_(%D0%A0%D1%83%D1%81%D1%81%D0%BA%D0%B8%D0%B9) "EFISTUB (Русский)").
*   Он поддерживает загрузку UEFI_MIX_MODE с помощью grub.
*   Он поддерживает безопасную загрузку с помощью prebootloader.
*   Он поддерживает grub(2)'s iso loopback поддержку.

	используемые переменные (ниже, например):

	iso_loop_dev=PARTUUID=XXXX

	iso_loop_path=/blah/archboot.iso

```
menuentry "Archboot" --class iso {
loopback loop (hdX,X)/<archboot.iso>
linux (loop)/boot/vmlinuz_x86_64 iso_loop_dev=/dev/sdXX iso_loop_path=/<archboot.iso>
initrd (loop)/boot/initramfs_x86_64.img
}
```

*   Он поддерживает загрузку с использованием syslinux's memdisk (только в режиме BIOS).

```
menuentry "Archboot Memdisk" {
   linux16 /memdisk iso
   initrd16 hd(X,X)/<archboot.iso>
}
```

### Как сделать удаленную установку через SSH?

*   Во время загрузки все сетевые интерфейсы попытаются получить IP-адрес через DHCP.
*   Пароль суперпользователя по умолчанию не установлен! Если вам нужна конфиденциальность во время установки, установите пароль.

 `'ssh root@<yourip>'` 

### Возможности интерактивной настройки

*   Режим установки мультимедиа и сети
*   Изменение раскладки клавиатуры и фона консоли
*   Изменение времени и даты
*   Настройка сети с netctl
*   Подготовка диска для хранения, например, автоматическая подготовка, разбиение на разделы,поддержка GUID (gpt), поддержка 4K секторов диска и т.д.
*   Создание программных raid/raid разделов, устройств lvm2 и зашифрованных устройств luks
*   Поддерживает стандартный linux, raid/raid_разделы, dmraid/fakeraid, lvm2 и зашифрованные устройства
*   Поддержка файловых систем ext2/3/4, btrfs, f2fs, nilfs2, reiserfs, xfs, jfs, ntfs-3g, vfat
*   Поддержка схемы имен: PARTUUID, PARTLABEL, FSUUID, FSLABEL и KERNEL
*   Поддержка монтирования установочных носителей grub (2) loopback и memdisk
*   Поддержка выбора пакетов
*   Скрипт hwdetect используется для предварительной настройки
*   Автоматическая/Предварительная конфигурация fstab, режима kms, ssd, mkinitcpio.conf, systemd, crypttab и mdadm.conf
*   Конфигурация основных системных файлов
*   Настройка пароля суперпользователя
*   Поддержка загрузчиков: grub(2) (BIOS и UEFI), refind-efi, systemd-boot, syslinux (BIOS и UEFI)

### FAQ, известные проблемы и ограничения

*   Релиз определенных известных проблем и обходных путей публикуются в файлах изменений.
*   Проверьте также темы форума для опубликованных исправлений и обходных решений.
*   Почему экран остается пустым или возникают другие странные проблемы с экраном?

	Некоторым аппаратным средствам не нравится активация KMS, используйте radeon.modeset=0, i915.modeset=0 или nouveau.modeset=0 в приглашении загрузки.

*   dmraid/fakeraid может быть сломан на некоторых платах, поддержка здесь не идеальна.

	Причина в том, что существует так много различных аппаратных компонентов. В настоящий момент включен 1.0.0rc16, с последним набором патчей fedora, разработка была остановлена.

	Mdadm поддерживает некоторые чипсеты isw и ddf fakeraid, но сборка во время загрузки отключится в /etc/mdadm.conf!

*   Grub2 не может определить правильный порядок загрузки BIOS:

	Может случиться, что записи hd(x,x) неверны, поэтому первая перезагрузка может не работать.

	Исправление: либо изменить порядок загрузки BIOS, либо изменить menu.lst для исправления записей после успешной загрузки. Это не может быть исправлено, это ограничение в grub2!

*   Почему parted используются в установки, вместо cfdisk в режиме таблицы разделов msdos?

	parted - единственная программа разделов Linux, которая может обрабатывать все типы вещей, предлагаемые программой настройки.

	cfdisk не может обрабатывать GPT/GUID, а также не может разрешать разделы с 1 МБ пространствами для 4k секторных дисков.

	cfdisk - хороший инструмент, но он слишком ограничен, чтобы быть стандартным расширителем.

	cfdisk по-прежнему включен, но должен быть запущен в другом терминале.

### История

Историю старых релизов можно найти [здесь](ftp://ftp.archlinux.org/iso/archboot/history).

### Баги

[Arch Linux Bugtracker](https://bugs.archlinux.org)

## Релиз Archboot BETA ISO

*   Предоставляется файл гибридного образа, который поддерживает только сетевую установку.
*   Пожалуйста, прочитайте соответствующие файлы Changelog для ограничений RAM.
*   Пожалуйста, проверьте md5sum перед его использованием.
*   На данный момент нет доступных бета-версий ISO.

## Ссылки

*   [Репозиторий GIT](https://projects.archlinux.org/archboot.git/)

## Руководство по созданию образов

(Быстрая генерация установочного носителя с последними доступными версиями базовых пакетов)

### Требования

*   Архитектура x86_64
*   ~ 3GB свободного дискового пространства

### Создание archboot chroots

*   Установка archboot:

```
# pacman -S archboot
# mkdir -p *x86_64_chroot*/var/lib/pacman
# pacman --root "*x86_64_chroot*" -Sy base --noconfirm --noprogressbar

```

*   Для контейнера i686:

```
# mkdir -p *i686_chroot*/var/lib/pacman
# linux32 pacman --root "*i686_chroot*" -Sy base --noconfirm --noprogressbar

```

*   Вход в контейнер archboot x86_64:

```
# systemd-nspawn --capability=CAP_MKNOD --register=no -M $(uname -m) -D *x86_64_chroot*

```

*   Вход в контейнер archboot i686:

```
# linux32 systemd-nspawn --capability=CAP_MKNOD --register=no -M $(uname -m) -D *i686_chroot*

```

### Установка archboot и обновление пакетов

Установка в chroot-окружении archboot:

```
# pacman -S archboot

```

Обновление в chroot-окружений до последних доступных пакетов:

```
# pacman -Syu

```

### Сборка образа

```
# run in both chroots (needs quite some time ...)
archboot-allinone.sh -t
# put the generated tarballs in one directory and run (needs quite some time ...)
archboot-allinone.sh -g

```

*   Закончено, вы получите кучу образов

Повеселись! tpowa (Разработчик Archboot)