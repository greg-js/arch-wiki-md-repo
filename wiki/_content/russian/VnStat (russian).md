[vnStat](http://humdi.net/vnstat/) это легковесная программа для мониторинга сетевого трафика. Лог ведется по выбранному сетевому интерфейсу, а статистику можно посмотреть используя командную строку.

<input type="checkbox" role="button" id="toctogglecheckbox" class="toctogglecheckbox" style="display:none">

## Contents

<label class="toctogglelabel" for="toctogglecheckbox"></label>

*   [1 Установка](#Установка)
*   [2 Настройка](#Настройка)
    *   [2.1 Установка интерфейса](#Установка_интерфейса)
    *   [2.2 Обновление базы данных](#Обновление_базы_данных)
        *   [2.2.1 Cron](#Cron)
        *   [2.2.2 Service](#Service)
    *   [2.3 Глобальные настройки](#Глобальные_настройки)
*   [3 Использование](#Использование)
*   [4 Смотрите также](#Смотрите_также)

## Установка

[Установите](/index.php/Pacman_(%D0%A0%D1%83%D1%81%D1%81%D0%BA%D0%B8%D0%B9)#Установка_отдельных_пакетов "Pacman (Русский)") пакет [vnstat](https://www.archlinux.org/packages/?name=vnstat) из официального репозитория.

## Настройка

### Установка интерфейса

Для ведения лога необходимо сначала создать базу данных нужного интерфейса. Например, для проводного соединения:

```
# vnstat -u -i enp6s0

```

Или для беспроводного:

```
# vnstat -u -i wlp2s0

```

При первой установке интерфейса вы увидите сообщение 'unable to read database'. Если вместе в ним вы видите 'a new database has been created', значит настройка интерфейса прошла успешно. Иначе следует проверить, корректно ли указан интерфейс.

### Обновление базы данных

После настройки интерфейсов нужно выбрать способ обновления базы данных.

**Важно:** Используйте только один из представленных методов, но не оба сразу!

#### Cron

Первый метод предполагает использование [Cron](/index.php/Cron "Cron"). Пример можно найти в файле `/usr/share/doc/vnstat/examples/vnstat.cron`.

#### Service

Также можно использовать [systemd](/index.php/Systemd_(%D0%A0%D1%83%D1%81%D1%81%D0%BA%D0%B8%D0%B9) "Systemd (Русский)") (и предоставляемую службу):

```
# systemctl start vnstat.service

```

### Глобальные настройки

Иные настройки, такие как управление демоном, можно найти в `/etc/vnstat.conf`.

## Использование

Показать статистику:

```
# vnstat -q

```

Или просто

```
# vnstat

```

Показать статистику в реальнм времени:

```
# vnstat -l

```

**Примечание:** По умолчанию осуществляется попытка показать статистику интерфейса `eth0`. Чтобы указать нужный интерфейс, используйте ключ `-i`.

Посмотреть доступные опции:

```
# vnstat --help

```

Или, для полного текста справки:

```
# vnstat --longhelp

```

## Смотрите также

[VnStat Custom WebUI](http://gotux.net/arch-linux/vnstat-network-monitor/)