[vnStat](http://humdi.net/vnstat/) это легковесная программа для мониторинга сетевого трафика. Лог ведется по выбранному сетевому интерфейсу, а статистику можно посмотреть используя командную строку.

## Contents

*   [1 Установка](#.D0.A3.D1.81.D1.82.D0.B0.D0.BD.D0.BE.D0.B2.D0.BA.D0.B0)
*   [2 Настройка](#.D0.9D.D0.B0.D1.81.D1.82.D1.80.D0.BE.D0.B9.D0.BA.D0.B0)
    *   [2.1 Установка интерфейса](#.D0.A3.D1.81.D1.82.D0.B0.D0.BD.D0.BE.D0.B2.D0.BA.D0.B0_.D0.B8.D0.BD.D1.82.D0.B5.D1.80.D1.84.D0.B5.D0.B9.D1.81.D0.B0)
    *   [2.2 Обновление базы данных](#.D0.9E.D0.B1.D0.BD.D0.BE.D0.B2.D0.BB.D0.B5.D0.BD.D0.B8.D0.B5_.D0.B1.D0.B0.D0.B7.D1.8B_.D0.B4.D0.B0.D0.BD.D0.BD.D1.8B.D1.85)
        *   [2.2.1 Cron](#Cron)
        *   [2.2.2 Service](#Service)
    *   [2.3 Глобальные настройки](#.D0.93.D0.BB.D0.BE.D0.B1.D0.B0.D0.BB.D1.8C.D0.BD.D1.8B.D0.B5_.D0.BD.D0.B0.D1.81.D1.82.D1.80.D0.BE.D0.B9.D0.BA.D0.B8)
*   [3 Использование](#.D0.98.D1.81.D0.BF.D0.BE.D0.BB.D1.8C.D0.B7.D0.BE.D0.B2.D0.B0.D0.BD.D0.B8.D0.B5)
*   [4 Смотрите также](#.D0.A1.D0.BC.D0.BE.D1.82.D1.80.D0.B8.D1.82.D0.B5_.D1.82.D0.B0.D0.BA.D0.B6.D0.B5)

## Установка

[Установите](/index.php/Pacman_(%D0%A0%D1%83%D1%81%D1%81%D0%BA%D0%B8%D0%B9)#.D0.A3.D1.81.D1.82.D0.B0.D0.BD.D0.BE.D0.B2.D0.BA.D0.B0_.D0.BE.D0.BF.D1.80.D0.B5.D0.B4.D0.B5.D0.BB.D0.B5.D0.BD.D0.BD.D1.8B.D1.85_.D0.BF.D0.B0.D0.BA.D0.B5.D1.82.D0.BE.D0.B2 "Pacman (Русский)") пакет [vnstat](https://www.archlinux.org/packages/?name=vnstat) из официального репозитория.

## Настройка

### Установка интерфейса

Для ведения лога необходимо сначала создать базу данных нужного интерфейса. Например, для проводного соединения:

```
# vnstat -u -i enp6s0

```

Или для беспроводного:

```
# vnstat -u -i wlp2s0

```

При первой установке интерфейса вы увидите сообщение 'unable to read database'. Если вместе в ним вы видите 'a new database has been created', значит настройка интерфейса прошла успешно. Иначе следует проверить, корректно ли указан интерфейс.

### Обновление базы данных

После настройки интерфейсов нужно выбрать способ обновления базы данных.

**Важно:** Используйте только один из представленных методов, но не оба сразу!

#### Cron

Первый метод предполагает использование [Cron](/index.php/Cron "Cron"). Пример можно найти в файле `/usr/share/doc/vnstat/examples/vnstat.cron`.

#### Service

Также можно использовать [systemd](/index.php/Systemd_(%D0%A0%D1%83%D1%81%D1%81%D0%BA%D0%B8%D0%B9) "Systemd (Русский)") (и предоставляемую службу):

```
# systemctl start vnstat.service

```

### Глобальные настройки

Иные настройки, такие как управление демоном, можно найти в `/etc/vnstat.conf`.

## Использование

Показать статистику:

```
# vnstat -q

```

Или просто

```
# vnstat

```

Показать статистику в реальнм времени:

```
# vnstat -l

```

**Примечание:** По умолчанию осуществляется попытка показать статистику интерфейса `eth0`. Чтобы указать нужный интерфейс, используйте ключ `-i`.

Посмотреть доступные опции:

```
# vnstat --help

```

Или, для полного текста справки:

```
# vnstat --longhelp

```

## Смотрите также

[VnStat Custom WebUI](http://gotux.net/arch-linux/vnstat-network-monitor/)