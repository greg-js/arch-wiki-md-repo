**Состояние перевода:** На этой странице представлен перевод статьи [Compton](/index.php/Compton "Compton"). Дата последней синхронизации: 19 сентября 2015\. Вы можете [помочь](/index.php/ArchWiki_Translation_Team_(%D0%A0%D1%83%D1%81%D1%81%D0%BA%D0%B8%D0%B9) "ArchWiki Translation Team (Русский)") синхронизировать перевод, если в английской версии произошли [изменения](https://wiki.archlinux.org/index.php?title=Compton&diff=0&oldid=400530).

Compton - это легкий, автономный композитный менеджер. Он подходит для использования с [оконными менеджерами](/index.php/Window_manager_(%D0%A0%D1%83%D1%81%D1%81%D0%BA%D0%B8%D0%B9) "Window manager (Русский)"), которые изначально не обеспечивают функциональность композитинга. Compton является форком [xcompmgr-dana](https://aur.archlinux.org/packages/xcompmgr-dana/), который, в свою очередь, является форком [xcompmgr](https://www.archlinux.org/packages/?name=xcompmgr). Для дополнительной информации смотрите [страницу compton на github](https://github.com/chjj/compton).

В Compton исправлены многочисленные ошибки, найденные у его предшественников, и, как следствие, он является популярным из-за своей надежности и стабильности. Были реализованы многочисленные улучшения и опции настройки, в том числе быстрый бакэнд GLX (OpenGL) (отключен по умолчанию), непрозрачность активного/неактивного окна, прозрачность рамки окна, размытие фона окна, цветная инверсия окна, painting rate throttling, VSync, "из коробки" хорошо настраиваемое управление, чтение файла настроек и управление D-Bus.

## Contents

*   [1 Установка](#Установка)
*   [2 Использование](#Использование)
    *   [2.1 Автозапуск](#Автозапуск)
    *   [2.2 Только по команде](#Только_по_команде)
    *   [2.3 Использование файла настроек](#Использование_файла_настроек)
        *   [2.3.1 Отключение затенения conky](#Отключение_затенения_conky)
*   [3 Многоэкранный](#Многоэкранный)
*   [4 Решение проблем](#Решение_проблем)
    *   [4.1 Slock (Затухание)](#Slock_(Затухание))
    *   [4.2 Двойная тень на некоторых GTK3 приложениях](#Двойная_тень_на_некоторых_GTK3_приложениях)
    *   [4.3 Невозможно изменить цвет фона с xsetroot](#Невозможно_изменить_цвет_фона_с_xsetroot)
    *   [4.4 Экранные артефакты/снимки экрана при использовании драйвера AMD's Catalyst](#Экранные_артефакты/снимки_экрана_при_использовании_драйвера_AMD's_Catalyst)
    *   [4.5 Высокая загрузка CPU с драйвером nvidia](#Высокая_загрузка_CPU_с_драйвером_nvidia)
*   [5 Смотрите также](#Смотрите_также)

## Установка

Установите [compton](https://www.archlinux.org/packages/?name=compton) или его [git](/index.php/Git "Git") версию, [compton-git](https://aur.archlinux.org/packages/compton-git/).

## Использование

Compton может быть вручную включен или отключен в любое время в течение сессии, или автоматически запущен в качестве фона ([демона](/index.php/Daemon "Daemon")) сессии. Предусмотрено также несколько дополнительных аргументов, которые могут быть использованы для настройки эффектов композитинга. К ним относятся:

*   `-b`: Запуск в качестве фона ([демона](/index.php/Daemon "Daemon")) процесса сессии (например когда используется автозапуск для [оконного менеджера](/index.php/Window_manager_(%D0%A0%D1%83%D1%81%D1%81%D0%BA%D0%B8%D0%B9) "Window manager (Русский)") такого как [Openbox](/index.php/Openbox_(%D0%A0%D1%83%D1%81%D1%81%D0%BA%D0%B8%D0%B9) "Openbox (Русский)"))
*   `-c`: Включить эффект тени
*   `-C`: Отключить эффекты тени на панелях и доках
*   `-G`: Отключить эффекты тени для окон приложений и объектов "перетащить-и-бросить" (drag-and-drop)
*   `--config`: Использовать указанный файл настроек

Доступно много других опций, в том числе установка тайминга, управление отображением, и непрозрачностью меню, границами окна, и неактивным меню приложения. Для большей информации, смотите [страницу руководства Compton](https://github.com/chjj/compton/blob/master/man/compton.1.asciidoc).

### Автозапуск

То, каким образом *compton* будет запущен в качестве [демона](/index.php/Daemons_(%D0%A0%D1%83%D1%81%D1%81%D0%BA%D0%B8%D0%B9) "Daemons (Русский)"), будет зависеть от используемого [окружения рабочего стола](/index.php/Desktop_environment_(%D0%A0%D1%83%D1%81%D1%81%D0%BA%D0%B8%D0%B9) "Desktop environment (Русский)") или [оконного менеджера](/index.php/Window_manager_(%D0%A0%D1%83%D1%81%D1%81%D0%BA%D0%B8%D0%B9) "Window manager (Русский)"). Например, в случае с [Openbox](/index.php/Openbox_(%D0%A0%D1%83%D1%81%D1%81%D0%BA%D0%B8%D0%B9) "Openbox (Русский)") должен быть отредактирован файл `~/.config/openbox/autostart`, в то время как для [i3](/index.php/I3_(%D0%A0%D1%83%D1%81%D1%81%D0%BA%D0%B8%D0%B9) "I3 (Русский)") это будет `~/.i3/config`. При необходимости *compton* также может быть автоматически запущен из [xprofile](/index.php/Xprofile_(%D0%A0%D1%83%D1%81%D1%81%D0%BA%D0%B8%D0%B9) "Xprofile (Русский)") или [xinitrc](/index.php/Xinitrc_(%D0%A0%D1%83%D1%81%D1%81%D0%BA%D0%B8%D0%B9) "Xinitrc (Русский)"). Для получения дополнительной информации смотрите статью [Автозапуск](/index.php/%D0%90%D0%B2%D1%82%D0%BE%D0%B7%D0%B0%D0%BF%D1%83%D1%81%D0%BA "Автозапуск").

### Только по команде

Чтобы включать эффекты композитинга по умолчанию, вручную во время сеанса, используйте следующую команду:

```
$ compton

```

В качестве альтернативы, чтобы отключить все эффекты тени во время сессии, должны быть добавлены аргументы `-C` и `-G`:

```
$ compton -CG

```

Для автозапуска compton в качестве фонового ([Daemon](/index.php/Daemon "Daemon")) процесса для сессии, используйте аргумент `-b`:

```
compton -b

```

Чтобы отключить все эффекты теней, при использовании фонового процесса ([Daemon](/index.php/Daemon "Daemon")), добавьте аргументы: `-C` и `-G`:

```
compton -CGb

```

Наконец, это пример, в котором будут установлены и использованы дополнительные аргументы, которые требуют установки значений:

```
compton -cCGfF -o 0.38 -O 200 -I 200 -t 0 -l 0 -r 3 -D2 -m 0.88

```

### Использование файла настроек

Чтобы использовать файл пользовательских настроек compton во время сеанса, используйте следующую команду:

```
compton --config <path/to/compton.conf>

```

Для автоматического старта compton в качестве фонового ([Daemon](/index.php/Daemon "Daemon")) процесса сессии, воспользуйтесь аргументом `-b`:

```
compton --config <path/to/compton.conf> -b

```

Рекомендуется создать файл настроек в скрытом каталоге `~/.config` (`~/.config/compton.conf`) или скрытый файл в домашнем каталоге `Home` (`~/.compton.conf`). Образец файла настроек можно найти здесь: [Compton Sample Config](https://github.com/chjj/compton/blob/master/compton.sample.conf)

#### Отключение затенения conky

Чтобы отключить тени вокруг окна [conky](/index.php/Conky "Conky") - где используется - сначала измените в файле настроек `~/.conkyrc` следующее:

```
own_window_class conky

```

Затем измените в файле настроек compton следующее:

```
shadow-exclude = "class_g = 'conky'";

```

## Многоэкранный

Если [многоэкранная](/index.php/Multihead "Multihead") настройка используется без xinerama - это означает что сервер X запустится с более чем одним экраном - тогда compton будет запущен только на экране по умолчанию. Compton можно запустить на всех экранах, используя аргумент`-d`. Например, запуск на 4 мониторах командой:

```
seq 0 3 | xargs -l1 -I@ compton -b -d :0.@

```

## Решение проблем

Использование композитных эффектов может привести в некоторых случаях к появлению визуальных глюков. Это случается когда compton не настроен правильно для использования с другими приложениями и программами.

### Slock (Затухание)

Включение прозрачности для неактивного окна (запуск с ключом `-i`), может вызвать проблемы при совместным использованием со [slock](/index.php/Slock "Slock"). Решением может являться установка значения прозрачности `0.2`. Например, при запуске compton из командной строки:

```
compton <any other arguments> -i 0.2

```

Либо с помощью файла настроек:

```
inactive-dim = 0.2;

```

Другим спосбом является исключение slock по его идентификатору окна, или исключение всех окон без имени.

**Примечание:** Некоторые программы изменяют id своего окна при каждом новом выполнении, однако slock, похоже, имеет статический идентификатор. Требуется подтверждение, что slock имеет постоянный идентификатор. До тех пор вы используете данное решение на свой страх и риск.

Для исключения всех безымянных окон из обработки compton используйте следующие параметры:

```
$ compton <other arguments> --focus-exclude "! name~=*"*

```

Узнать идентификатор окна slock можно при помощи следующей комманды:

```
$ xwininfo & slock

```

Немедленно кликните где-либо на экране (до того, как slock завершится), затем введите свой пароль для разблокировки. Вы должны получить идентификатор окна в выводе терминала:

```
xwininfo: Window id: 0x1800001 (has no name)

```

Скопируйте идентификатор и исключите его из обработки compton как указано:

```
$ compton <any other arguments> --focus-exclude 'id = 0x1800001'

```

Либо, используя конфигурационный файл:

```
focus-exclude = "id = 0x1800001";

```

### Двойная тень на некоторых GTK3 приложениях

Так как [gtk3](https://www.archlinux.org/packages/?name=gtk3) версия 3.12.1, некоторые окна GTK+ 3 и диалоги, отображают двойную тень при использовании Compton. Это происходит потому что [применяются одновременно](https://github.com/chjj/compton/issues/189) две тени: GTK+ 3 и Compton. Смотрите [GTK+#Client-side decorations](/index.php/GTK%2B#Client-side_decorations "GTK+").

Чтобы отключить тени Compton на всех GTK +3 окнах, добавьте новое правило в `compton.conf`:

 `shadow-exclude = [ "_GTK_FRAME_EXTENTS@:c" ]` 

или запустите `compton` со следующими аргументами: `--shadow-exclude 'argb && _NET_WM_OPAQUE_REGION@:c'`

### Невозможно изменить цвет фона с xsetroot

В настоящее время, compton не совместим с `xsetroot`'s опцией `-solid`, это можно обойти, воспользовавшись [hsetroot](https://www.archlinux.org/packages/?name=hsetroot) чтобы установить цвет фона:

```
$ hsetroot -solid '#000000'

```

Для получения подробных объяснений, пожалуйста смотрите [https://github.com/chjj/compton/issues/162](https://github.com/chjj/compton/issues/162).

### Экранные артефакты/снимки экрана при использовании драйвера AMD's Catalyst

Попробуйте запустить compton с

```
--backend xrender

```

или добавьте

```
backend = "xrender";

```

в ваш файл compton.conf.

Для большей информации, смотрите: [https://github.com/chjj/compton/issues/208](https://github.com/chjj/compton/issues/208)

### Высокая загрузка CPU с драйвером nvidia

Когда сталкиваетесь с высокой загрузкой CPU с `--backend glx` или тирингом с включенным `--vsync`, [установите](/index.php/Install "Install") [nvidia-libgl](https://www.archlinux.org/packages/?name=nvidia-libgl) как описано в [NVIDIA](/index.php/NVIDIA "NVIDIA").

## Смотрите также

*   [Howto: Использование Compton для устранения тиринга в XFCE или LXDE](http://ubuntuforums.org/showthread.php?t=2144468&p=12644745#post12644745)