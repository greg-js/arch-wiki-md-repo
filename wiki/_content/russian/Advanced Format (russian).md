**Состояние перевода:** На этой странице представлен перевод статьи [Advanced Format](/index.php/Advanced_Format "Advanced Format"). Дата последней синхронизации: 3 июня 2017\. Вы можете [помочь](/index.php/ArchWiki_Translation_Team_(%D0%A0%D1%83%D1%81%D1%81%D0%BA%D0%B8%D0%B9) "ArchWiki Translation Team (Русский)") синхронизировать перевод, если в английской версии произошли [изменения](https://wiki.archlinux.org/index.php?title=Advanced_Format&diff=0&oldid=479186).

[Расширенный формат](https://en.wikipedia.org/wiki/ru:Advanced_Format "w:ru:Advanced Format") - это общий термин, относящийся к любому формату сектора диска, используемому для хранения данных на магнитных дисках на [жестких дисках](https://en.wikipedia.org/wiki/ru:%D0%96%D1%91%D1%81%D1%82%D0%BA%D0%B8%D0%B9_%D0%B4%D0%B8%D1%81%D0%BA "w:ru:Жёсткий диск"), которые используют 4 килобайтные сектора вместо традиционных 512-байтовых секторов. Основная идея использования 4096-байтовых секторов заключается в увеличении плотности битов на каждой дорожке за счет уменьшения количества пробелов, которые содержат информацию о синхронизации / DAM и ECC (Error Correction Code) между секторами данных. Старый формат дал формат эффективности 88,7%, в то время как расширенный формат приводит к эффективности формата 97,3%.

## Contents

*   [1 Как определить, использует ли HDD сектор 4k](#.D0.9A.D0.B0.D0.BA_.D0.BE.D0.BF.D1.80.D0.B5.D0.B4.D0.B5.D0.BB.D0.B8.D1.82.D1.8C.2C_.D0.B8.D1.81.D0.BF.D0.BE.D0.BB.D1.8C.D0.B7.D1.83.D0.B5.D1.82_.D0.BB.D0.B8_HDD_.D1.81.D0.B5.D0.BA.D1.82.D0.BE.D1.80_4k)
*   [2 Выравнивание разделов](#.D0.92.D1.8B.D1.80.D0.B0.D0.B2.D0.BD.D0.B8.D0.B2.D0.B0.D0.BD.D0.B8.D0.B5_.D1.80.D0.B0.D0.B7.D0.B4.D0.B5.D0.BB.D0.BE.D0.B2)
    *   [2.1 Проверка выравнивания разделов](#.D0.9F.D1.80.D0.BE.D0.B2.D0.B5.D1.80.D0.BA.D0.B0_.D0.B2.D1.8B.D1.80.D0.B0.D0.B2.D0.BD.D0.B8.D0.B2.D0.B0.D0.BD.D0.B8.D1.8F_.D1.80.D0.B0.D0.B7.D0.B4.D0.B5.D0.BB.D0.BE.D0.B2)
    *   [2.2 GPT (рекомендуется)](#GPT_.28.D1.80.D0.B5.D0.BA.D0.BE.D0.BC.D0.B5.D0.BD.D0.B4.D1.83.D0.B5.D1.82.D1.81.D1.8F.29)
*   [3 Смотрите также](#.D0.A1.D0.BC.D0.BE.D1.82.D1.80.D0.B8.D1.82.D0.B5_.D1.82.D0.B0.D0.BA.D0.B6.D0.B5)

## Как определить, использует ли HDD сектор 4k

Размер физического и логического сектора жесткого диска /dev/sd*X* можно определить, прочитав следующие записи sysfs:

```
$ cat /sys/class/block/sd*X*/queue/physical_block_size
$ cat /sys/class/block/sd*X*/queue/logical_block_size

```

Инструменты, которые будут сообщать о физическом секторе диска (при условии, что диск сообщит об этом правильно) включает

*   smartmontools (начиная с 5.41 ; <tt>smartmontools -a</tt>, в разделе информации)
*   hdparm (начиная с 9.12 ; <tt>hdparm -I</tt>, в разделе конфигурации)

Обратите внимание, что оба они работают даже для USB-подключенных дисков (если USB-мост поддерживает SAT aka SCSI/ATA Translation, ANSI INCITS 431-2007).

## Выравнивание разделов

**Примечание:** Это больше не требует ручного вмешательства. Любые инструменты, использующие последние версии libblkid, могут автоматически обрабатывать расширенный формат.

Версии с этой поддержкой включают:

*   fdisk, с util-linux >= 2.15\. Вы должны запускать с ‘-c -u’ , чтобы отключить совместимость с DOS и использовать сектора вместо цилиндров.
*   parted, с parted >= 2.1.
*   mdadm, с util-linux >= 2.15
*   lvm2, с util-linux >= 2.15
*   mkfs.{ext,xfs,gfs2,ocfs2} полная поддержка libblkid напрямую.

Для получения дополнительной информации смотрите [эту страницу](https://www.tolaris.com/2011/07/21/libblkid-or-why-you-dont-need-to-worry-about-4k-disk-format/).

### Проверка выравнивания разделов

**Примечание:** Это работает только с [MBR](/index.php/MBR_(%D0%A0%D1%83%D1%81%D1%81%D0%BA%D0%B8%D0%B9) "MBR (Русский)"), а не с [GPT](/index.php/GPT_(%D0%A0%D1%83%D1%81%D1%81%D0%BA%D0%B8%D0%B9) "GPT (Русский)").

```
# fdisk -lu /dev/sda
...
# Device     Boot      Start   End         Blocks      Id System
# /dev/sda1            2048    46876671    23437312    7  HPFS/NTFS

```

2048 (по умолчанию, так как fdisk 2.17.2) означает, что ваш жесткий диск правильно выровнен. Любое другое значение, делящееся на 8, также хорошо.

### GPT (рекомендуется)

При использовании таблиц разделов [GPT](/index.php/GPT_(%D0%A0%D1%83%D1%81%D1%81%D0%BA%D0%B8%D0%B9) "GPT (Русский)") необходимо использовать gdisk для создания разделов, которые по умолчанию выравниваются. Пример смотрите в [SSD#Detailed Usage Example](/index.php/SSD#Detailed_Usage_Example "SSD").

## Смотрите также

*   [Расширенный формат Western Digital: начинается переход на сектора 4K](http://www.anandtech.com/Show/Index/2888)
*   [Белая книга под названием "Advanced Format Technology."](http://www.wdc.com/wdproducts/library/WhitePapers/ENG/2579-771430.pdf)
*   Несоблюдение правил обращения с жестким диском приводит к ухудшению производительности чтения/записи. Смотрите [эту статью](http://www.linuxconfig.org/linux-wd-ears-advanced-format) для конкретных примеров.