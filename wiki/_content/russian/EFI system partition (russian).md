**Состояние перевода:** На этой странице представлен перевод статьи [EFI System Partition](/index.php/EFI_System_Partition "EFI System Partition"). Дата последней синхронизации: 16 августа 2017\. Вы можете [помочь](/index.php/ArchWiki_Translation_Team_(%D0%A0%D1%83%D1%81%D1%81%D0%BA%D0%B8%D0%B9) "ArchWiki Translation Team (Русский)") синхронизировать перевод, если в английской версии произошли [изменения](https://wiki.archlinux.org/index.php?title=EFI_System_Partition&diff=0&oldid=485489).

[Системный раздел EFI](https://en.wikipedia.org/wiki/EFI_System_partition "w:EFI System partition") (также называемый ESP или EFISYS) представляет собой физический раздел в формате FAT32 (в основной таблице разделов диска, а не под LVM или программным RAID и т.д.), откуда прошивка [UEFI](/index.php/Unified_Extensible_Firmware_Interface_(%D0%A0%D1%83%D1%81%D1%81%D0%BA%D0%B8%D0%B9) "Unified Extensible Firmware Interface (Русский)") запускает загрузчик и приложение UEFI.

Это независимый от ОС раздел, который служит местом хранения загрузочных устройств EFI и приложений, которые будут запускаться с помощью прошивки EFI. Это необходимо для загрузки UEFI.

**Важно:** Если вы выполняете [двойную загрузку](/index.php/Dual_boot_with_Windows_(%D0%A0%D1%83%D1%81%D1%81%D0%BA%D0%B8%D0%B9) "Dual boot with Windows (Русский)") с существующей установкой Windows в системе UEFI/GPT, не форматируйте раздел UEFI, так как это включает в себя файл Windows *.efi*, необходимый для ее загрузки. Другими словами, используйте существующий раздел как есть и просто [монтируйте его](#Монтирование_раздела).

<input type="checkbox" role="button" id="toctogglecheckbox" class="toctogglecheckbox" style="display:none">

## Contents

<label class="toctogglelabel" for="toctogglecheckbox"></label>

*   [1 Создание раздела](#Создание_раздела)
    *   [1.1 Разметка дисков GPT](#Разметка_дисков_GPT)
    *   [1.2 Разметка дисков MBR](#Разметка_дисков_MBR)
*   [2 Форматирование раздела](#Форматирование_раздела)
*   [3 Монтирование раздела](#Монтирование_раздела)
*   [4 Известные вопросы](#Известные_вопросы)
    *   [4.1 ESP на RAID](#ESP_на_RAID)
*   [5 Советы и хитрости](#Советы_и_хитрости)
    *   [5.1 Использование bind монтирования](#Использование_bind_монтирования)
*   [6 Смотрите также](#Смотрите_также)

## Создание раздела

В следующих двух разделах показано, как создать системный раздел EFI (ESP).

**Примечание:** Рекомендуется использовать [GPT](/index.php/GPT_(%D0%A0%D1%83%D1%81%D1%81%D0%BA%D0%B8%D0%B9) "GPT (Русский)") для загрузки UEFI, потому что некоторые прошивки UEFI не позволяют загружать UEFI-MBR.

Рекомендуется сохранять размер ESP на 512 Мбайт, хотя меньшие/большие размеры тоже приветствуются. [[1]](http://www.rodsbooks.com/efi-bootloaders/principles.html)

Согласно примечанию Microsoft[[2]](http://technet.microsoft.com/en-us/library/hh824839.aspx#DiskPartitionRules), минимальный размер для системного раздела EFI (ESP) будет составлять 100 МБ, хотя это не указано в спецификации UEFI. Обратите внимание, что для дисков расширенный формат 4K Native drives (4 КБ на сектор) размер составляет не менее 256 Мбайт, поскольку это минимальный размер раздела дисков FAT32 (рассчитанный как размер сектора (4 КБ) x 65527 = 256 Мбайт), из-за ограничений файловой системы FAT32.

### Разметка дисков GPT

**Выберите один** из следующих способов создания ESP для диска GPT с разделами:

*   [fdisk/gdisk](/index.php/Fdisk_(%D0%A0%D1%83%D1%81%D1%81%D0%BA%D0%B8%D0%B9) "Fdisk (Русский)"): Создайте раздел с типом раздела EFI System (`EFI System` в *fdisk* или `EF00` в *gdisk*). Перейдите к разделу [#Форматирование раздела](#Форматирование_раздела) ниже.
*   [GNU Parted](/index.php/GNU_Parted_(%D0%A0%D1%83%D1%81%D1%81%D0%BA%D0%B8%D0%B9) "GNU Parted (Русский)"): Создайте раздел FAT32 и в Parted установите/активируйте флаг `boot` (**не** флаг `legacy_boot`) на этом разделе. Перейдите к разделу [#Монтирование раздела](#Монтирование_раздела) ниже.

### Разметка дисков MBR

Создайте раздел с типом раздела *EFI System*, используя fdisk. Перейдите к [#Форматирование раздела](#Форматирование_раздела).

## Форматирование раздела

После создания ESP вы **должны** [форматировать](/index.php/File_systems_(%D0%A0%D1%83%D1%81%D1%81%D0%BA%D0%B8%D0%B9)#Создание_файловой_системы "File systems (Русский)") его как FAT32:

```
# mkfs.fat -F32 /dev/sd*xY*

```

Если вы использовали GNU Parted выше, тогда раздел уже должен быть отформатирован.

Если вы получили сообщение `WARNING: Not enough clusters for a 32 bit FAT!`, уменьшите размер кластера с помощью команды `mkfs.fat -s2 -F32 ...` или `-s1`; иначе раздел может быть нечитаемым UEFI.

## Монтирование раздела

В случае [EFISTUB](/index.php/EFISTUB_(%D0%A0%D1%83%D1%81%D1%81%D0%BA%D0%B8%D0%B9) "EFISTUB (Русский)") файлы ядра и initramfs должны храниться в системном разделе EFI. Для простоты вы также можете использовать ESP в качестве самого раздела `/boot` вместо отдельного раздела `/boot` для загрузки EFISTUB. Другими словами, после создания и форматирования системного раздела EFI, как указано выше, просто [смонтируйте](/index.php/%D0%A1%D0%BC%D0%BE%D0%BD%D1%82%D0%B8%D1%80%D1%83%D0%B9%D1%82%D0%B5 "Смонтируйте") на `/boot`.

Также смотрите [#Использование bind монтирования](#Использование_bind_монтирования).

## Известные вопросы

### ESP на RAID

Можно сделать часть ESP массива RAID1, но при этом возникает риск повреждения данных, и при создании ESP необходимо учитывать дополнительные соображения. Для получения допольнительной информации смотрите [[3]](https://bbs.archlinux.org/viewtopic.php?pid=1398710#p1398710) и [[4]](https://bbs.archlinux.org/viewtopic.php?pid=1390741#p1390741).

## Советы и хитрости

### Использование bind монтирования

Вместо того, чтобы устанавливать ESP на `/boot`, вы можете подключить каталог ESP к `/boot` с помощью bind [монтирова](/index.php/%D0%9C%D0%BE%D0%BD%D1%82%D0%B8%D1%80%D0%BE%D0%B2%D0%B0 "Монтирова")ния (смотрите [mount(8)](https://jlk.fjfi.cvut.cz/arch/manpages/man/mount.8)). Это позволяет [pacman](/index.php/Pacman_(%D0%A0%D1%83%D1%81%D1%81%D0%BA%D0%B8%D0%B9) "Pacman (Русский)") обновлять ядро напрямую, сохраняя при этом организацию ESP по своему вкусу.

**Примечание:**

*   Для этого требуется, чтобы ядро и загрузчик были совместимы с FAT32\. Это не является проблемой для обычной установки Arch, но может быть проблематичным для других дистрибутивов (а именно тех, которые требуют символических ссылок в `/boot`). Смотрите сообщение на форуме [здесь](https://bbs.archlinux.org/viewtopic.php?pid=1331867#p1331867).
*   Для загрузки с помощью этого способа вы *должны* использовать `root=` [параметр ядра](/index.php/Kernel_parameters_(%D0%A0%D1%83%D1%81%D1%81%D0%BA%D0%B8%D0%B9)#Список_параметров "Kernel parameters (Русский)").

Как и в [EFISTUB#Альтернативные точки монтирования для ESP](/index.php/EFISTUB_(%D0%A0%D1%83%D1%81%D1%81%D0%BA%D0%B8%D0%B9)#Альтернативные_точки_монтирования_для_ESP "EFISTUB (Русский)"), скопируйте все загрузочные файлы в каталог вашего ESP, но смонтируйте ESP **вне** `/boot` (например, `/esp`). Затем привяжите смонтированный раздел к каталогу:

```
# mount --bind /esp/EFI/arch/ /boot

```

После проверки успеха отредактируйте свой [Fstab](/index.php/Fstab_(%D0%A0%D1%83%D1%81%D1%81%D0%BA%D0%B8%D0%B9) "Fstab (Русский)"), чтобы изменения были постоянными:

 `/etc/fstab` 
```
/esp/EFI/arch /boot none defaults,bind 0 0

```

## Смотрите также

*   [Системный раздел EFI и поведение загрузки по умолчанию](http://blog.uncooperative.org/blog/2014/02/06/the-efi-system-partition/)