Compton - это легкий, автономный композитный менеджер. Он подходит для использования с [оконными менеджерами](/index.php/Window_manager_(%D0%A0%D1%83%D1%81%D1%81%D0%BA%D0%B8%D0%B9) "Window manager (Русский)"), которые изначально не обеспечивают функциональность композитинга. Compton является форком [xcompmgr-dana](https://aur.archlinux.org/packages/xcompmgr-dana/), который, в свою очередь, является форком [xcompmgr](https://www.archlinux.org/packages/?name=xcompmgr). Для дополнительной информации смотрите [страницу compton на github](https://github.com/chjj/compton).

В Compton исправлены многочисленные ошибки, найденные у его предшественников, и, как следствие, он является популярным из-за своей надежности и стабильности. Были реализованы многочисленные улучшения и опции настройки, в том числе быстрый бакэнд GLX (OpenGL) (отключен по умолчанию), непрозрачность активного/неактивного окна, прозрачность рамки окна, размытие фона окна, цветная инверсия окна, painting rate throttling, VSync, "из коробки" хорошо настраиваемое управление, чтение файла настроек и управление D-Bus.

## Contents

*   [1 Установка](#.D0.A3.D1.81.D1.82.D0.B0.D0.BD.D0.BE.D0.B2.D0.BA.D0.B0)
*   [2 Использование](#.D0.98.D1.81.D0.BF.D0.BE.D0.BB.D1.8C.D0.B7.D0.BE.D0.B2.D0.B0.D0.BD.D0.B8.D0.B5)
    *   [2.1 Автозапуск](#.D0.90.D0.B2.D1.82.D0.BE.D0.B7.D0.B0.D0.BF.D1.83.D1.81.D0.BA)
    *   [2.2 Только по команде](#.D0.A2.D0.BE.D0.BB.D1.8C.D0.BA.D0.BE_.D0.BF.D0.BE_.D0.BA.D0.BE.D0.BC.D0.B0.D0.BD.D0.B4.D0.B5)
    *   [2.3 Использование файла настроек](#.D0.98.D1.81.D0.BF.D0.BE.D0.BB.D1.8C.D0.B7.D0.BE.D0.B2.D0.B0.D0.BD.D0.B8.D0.B5_.D1.84.D0.B0.D0.B9.D0.BB.D0.B0_.D0.BD.D0.B0.D1.81.D1.82.D1.80.D0.BE.D0.B5.D0.BA)
        *   [2.3.1 Отключение затенения conky](#.D0.9E.D1.82.D0.BA.D0.BB.D1.8E.D1.87.D0.B5.D0.BD.D0.B8.D0.B5_.D0.B7.D0.B0.D1.82.D0.B5.D0.BD.D0.B5.D0.BD.D0.B8.D1.8F_conky)
*   [3 Многоэкранный](#.D0.9C.D0.BD.D0.BE.D0.B3.D0.BE.D1.8D.D0.BA.D1.80.D0.B0.D0.BD.D0.BD.D1.8B.D0.B9)
*   [4 Решение проблем](#.D0.A0.D0.B5.D1.88.D0.B5.D0.BD.D0.B8.D0.B5_.D0.BF.D1.80.D0.BE.D0.B1.D0.BB.D0.B5.D0.BC)
    *   [4.1 Slock (Затухание)](#Slock_.28.D0.97.D0.B0.D1.82.D1.83.D1.85.D0.B0.D0.BD.D0.B8.D0.B5.29)
    *   [4.2 Двойная тень на некоторых GTK3 приложениях](#.D0.94.D0.B2.D0.BE.D0.B9.D0.BD.D0.B0.D1.8F_.D1.82.D0.B5.D0.BD.D1.8C_.D0.BD.D0.B0_.D0.BD.D0.B5.D0.BA.D0.BE.D1.82.D0.BE.D1.80.D1.8B.D1.85_GTK3_.D0.BF.D1.80.D0.B8.D0.BB.D0.BE.D0.B6.D0.B5.D0.BD.D0.B8.D1.8F.D1.85)
    *   [4.3 Невозможно изменить цвет фона с xsetroot](#.D0.9D.D0.B5.D0.B2.D0.BE.D0.B7.D0.BC.D0.BE.D0.B6.D0.BD.D0.BE_.D0.B8.D0.B7.D0.BC.D0.B5.D0.BD.D0.B8.D1.82.D1.8C_.D1.86.D0.B2.D0.B5.D1.82_.D1.84.D0.BE.D0.BD.D0.B0_.D1.81_xsetroot)
    *   [4.4 Экранные артефакты/снимки экрана при использовании драйвера AMD's Catalyst](#.D0.AD.D0.BA.D1.80.D0.B0.D0.BD.D0.BD.D1.8B.D0.B5_.D0.B0.D1.80.D1.82.D0.B5.D1.84.D0.B0.D0.BA.D1.82.D1.8B.2F.D1.81.D0.BD.D0.B8.D0.BC.D0.BA.D0.B8_.D1.8D.D0.BA.D1.80.D0.B0.D0.BD.D0.B0_.D0.BF.D1.80.D0.B8_.D0.B8.D1.81.D0.BF.D0.BE.D0.BB.D1.8C.D0.B7.D0.BE.D0.B2.D0.B0.D0.BD.D0.B8.D0.B8_.D0.B4.D1.80.D0.B0.D0.B9.D0.B2.D0.B5.D1.80.D0.B0_AMD.27s_Catalyst)
    *   [4.5 Высокая загрузка CPU с драйвером nvidia](#.D0.92.D1.8B.D1.81.D0.BE.D0.BA.D0.B0.D1.8F_.D0.B7.D0.B0.D0.B3.D1.80.D1.83.D0.B7.D0.BA.D0.B0_CPU_.D1.81_.D0.B4.D1.80.D0.B0.D0.B9.D0.B2.D0.B5.D1.80.D0.BE.D0.BC_nvidia)
*   [5 Смотрите также](#.D0.A1.D0.BC.D0.BE.D1.82.D1.80.D0.B8.D1.82.D0.B5_.D1.82.D0.B0.D0.BA.D0.B6.D0.B5)

## Установка

Установите [compton](https://www.archlinux.org/packages/?name=compton) или его [git](/index.php/Git "Git") версию, [compton-git](https://aur.archlinux.org/packages/compton-git/).

## Использование

Compton может быть вручную включен или отключен в любое время в течение сессии, или автоматически запущен в качестве фона ([демона](/index.php/Daemon "Daemon")) сессии. Предусмотрено также несколько дополнительных аргументов, которые могут быть использованы для настройки эффектов композитинга. К ним относятся:

*   `-b`: Запуск в качестве фона ([демона](/index.php/Daemon "Daemon")) процесса сессии (например когда используется автозапуск для [оконного менеджера](/index.php/Window_manager_(%D0%A0%D1%83%D1%81%D1%81%D0%BA%D0%B8%D0%B9) "Window manager (Русский)") такого как [Openbox](/index.php/Openbox_(%D0%A0%D1%83%D1%81%D1%81%D0%BA%D0%B8%D0%B9) "Openbox (Русский)"))
*   `-c`: Включить эффект тени
*   `-C`: Отключить эффекты тени на панелях и доках
*   `-G`: Отключить эффекты тени для окон приложений и объектов "перетащить-и-бросить" (drag-and-drop)
*   `--config`: Использовать указанный файл настроек

Доступно много других опций, в том числе установка тайминга, управление отображением, и непрозрачностью меню, границами окна, и неактивным меню приложения. Для большей информации, смотите [страницу руководства Compton](https://github.com/chjj/compton/blob/master/man/compton.1.asciidoc).

### Автозапуск

То, каким образом *compton* будет запущен в качестве [демона](/index.php/Daemons_(%D0%A0%D1%83%D1%81%D1%81%D0%BA%D0%B8%D0%B9) "Daemons (Русский)"), будет зависеть от используемого [окружения рабочего стола](/index.php/Desktop_environment_(%D0%A0%D1%83%D1%81%D1%81%D0%BA%D0%B8%D0%B9) "Desktop environment (Русский)") или [оконного менеджера](/index.php/Window_manager_(%D0%A0%D1%83%D1%81%D1%81%D0%BA%D0%B8%D0%B9) "Window manager (Русский)"). Например, в случае с [Openbox](/index.php/Openbox_(%D0%A0%D1%83%D1%81%D1%81%D0%BA%D0%B8%D0%B9) "Openbox (Русский)") должен быть отредактирован файл `~/.config/openbox/autostart`, в то время как для [i3](/index.php/I3_(%D0%A0%D1%83%D1%81%D1%81%D0%BA%D0%B8%D0%B9) "I3 (Русский)") это будет `~/.i3/config`. При необходимости *compton* также может быть автоматически запущен из [xprofile](/index.php/Xprofile_(%D0%A0%D1%83%D1%81%D1%81%D0%BA%D0%B8%D0%B9) "Xprofile (Русский)") или [xinitrc](/index.php/Xinitrc_(%D0%A0%D1%83%D1%81%D1%81%D0%BA%D0%B8%D0%B9) "Xinitrc (Русский)"). Для получения дополнительной информации смотрите статью [Автозапуск](/index.php/%D0%90%D0%B2%D1%82%D0%BE%D0%B7%D0%B0%D0%BF%D1%83%D1%81%D0%BA "Автозапуск").

### Только по команде

Чтобы включать эффекты композитинга по умолчанию, вручную во время сеанса, используйте следующую команду:

```
$ compton

```

В качестве альтернативы, чтобы отключить все эффекты тени во время сессии, должны быть добавлены аргументы `-C` и `-G`:

```
$ compton -CG

```

Для автозапуска compton в качестве фонового ([Daemon](/index.php/Daemon "Daemon")) процесса для сессии, используйте аргумент `-b`:

```
compton -b

```

Чтобы отключить все эффекты теней, при использовании фонового процесса ([Daemon](/index.php/Daemon "Daemon")), добавьте аргументы: `-C` и `-G`:

```
compton -CGb

```

Наконец, это пример, в котором будут установлены и использованы дополнительные аргументы, которые требуют установки значений:

```
compton -cCGfF -o 0.38 -O 200 -I 200 -t 0 -l 0 -r 3 -D2 -m 0.88

```

### Использование файла настроек

Чтобы использовать файл пользовательских настроек compton во время сеанса, используйте следующую команду:

```
compton --config <path/to/compton.conf>

```

Для автоматического старта compton в качестве фонового ([Daemon](/index.php/Daemon "Daemon")) процесса сессии, воспользуйтесь аргументом `-b`:

```
compton --config <path/to/compton.conf> -b

```

Рекомендуется создать файл настроек в скрытом каталоге `~/.config` (`~/.config/compton.conf`) или скрытый файл в домашнем каталоге `Home` (`~/.compton.conf`). Образец файла настроек можно найти здесь: [Compton Sample Config](https://github.com/chjj/compton/blob/master/compton.sample.conf)

#### Отключение затенения conky

Чтобы отключить тени вокруг окна [conky](/index.php/Conky "Conky") - где используется - сначала измените в файле настроек `~/.conkyrc` следующее:

```
own_window_class conky

```

Затем измените в файле настроек compton следующее:

```
shadow-exclude = "class_g = 'conky'";

```

## Многоэкранный

Если [многоэкранная](/index.php/Multihead "Multihead") настройка используется без xinerama - это означает что сервер X запустится с более чем одним экраном - тогда compton будет запущен только на экране по умолчанию. Compton можно запустить на всех экранах, используя аргумент`-d`. Например, запуск на 4 мониторах командой:

```
seq 0 3 | xargs -l1 -I@ compton -b -d :0.@

```

## Решение проблем

Использование композитных эффектов может привести в некоторых случаях к появлению визуальных глюков. Это случается когда compton не настроен правильно для использования с другими приложениями и программами.

### Slock (Затухание)

**Обратите внимание:** Чистое решение, используя аргумент `--focus-exclude`.

Где для неактивного окна прозрачность была включен (запущено с командным аргументом `-i`), это может вызвать проблемы, когда также используется [slock](/index.php/Slock "Slock"). Решение заключается внесением изменений в прозрачности `0.2`. Например, когда работает compton аргументы в команде:

```
compton <any other arguments> -i 0.2

```

В другом случае, с помощью файла настроек:

```
inactive-dim = 0.2;

```

### Двойная тень на некоторых GTK3 приложениях

Так как [gtk3](https://www.archlinux.org/packages/?name=gtk3) версия 3.12.1, некоторые окна GTK+ 3 и диалоги, отображают двойную тень при использовании Compton. Это происходит потому что [применяются одновременно](https://github.com/chjj/compton/issues/189) две тени: GTK+ 3 и Compton. Смотрите [GTK+#Client-side decorations](/index.php/GTK%2B#Client-side_decorations "GTK+").

Чтобы отключить тени Compton на всех GTK +3 окнах, добавьте новое правило в `compton.conf`:

 `shadow-exclude = [ "_GTK_FRAME_EXTENTS@:c" ]` 

или запустите `compton` со следующими аргументами: `--shadow-exclude 'argb && _NET_WM_OPAQUE_REGION@:c'`

### Невозможно изменить цвет фона с xsetroot

В настоящее время, compton не совместим с `xsetroot`'s опцией `-solid`, это можно обойти, воспользовавшись [hsetroot](https://aur.archlinux.org/packages/hsetroot/) чтобы установить цвет фона:

```
$ hsetroot -solid '#000000'

```

Для получения подробных объяснений, пожалуйста смотрите [https://github.com/chjj/compton/issues/162](https://github.com/chjj/compton/issues/162).

### Экранные артефакты/снимки экрана при использовании драйвера AMD's Catalyst

Попробуйте запустить compton с

```
--backend xrender

```

или добавьте

```
backend = "xrender";

```

в ваш файл compton.conf.

Для большей информации, смотрите: [https://github.com/chjj/compton/issues/208](https://github.com/chjj/compton/issues/208)

### Высокая загрузка CPU с драйвером nvidia

Когда сталкиваетесь с высокой загрузкой CPU с `--backend glx` или тирингом с включенным `--vsync`, [установите](/index.php/Install "Install") [nvidia-libgl](https://www.archlinux.org/packages/?name=nvidia-libgl) как описано в [NVIDIA](/index.php/NVIDIA "NVIDIA").

## Смотрите также

*   [Howto: Использование Compton для устранения тиринга в XFCE или LXDE](http://ubuntuforums.org/showthread.php?t=2144468&p=12644745#post12644745)