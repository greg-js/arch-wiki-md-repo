Ссылки по теме

*   [Модули ядра](/index.php/%D0%9C%D0%BE%D0%B4%D1%83%D0%BB%D0%B8_%D1%8F%D0%B4%D1%80%D0%B0 "Модули ядра")
*   [Compile kernel module](/index.php/Compile_kernel_module "Compile kernel module")
*   [Kernel Panics](/index.php/Kernel_Panics "Kernel Panics")
*   [sysctl](/index.php/Sysctl "Sysctl")

**Состояние перевода:** На этой странице представлен перевод статьи [Kernels](/index.php/Kernels "Kernels"). Дата последней синхронизации: 29 марта 2016\. Вы можете [помочь](/index.php/ArchWiki_Translation_Team_(%D0%A0%D1%83%D1%81%D1%81%D0%BA%D0%B8%D0%B9) "ArchWiki Translation Team (Русский)") синхронизировать перевод, если в английской версии произошли [изменения](https://wiki.archlinux.org/index.php?title=Kernels&diff=0&oldid=428531).

Из Википедии:

	[Ядро Linux](https://en.wikipedia.org/wiki/ru:%D0%AF%D0%B4%D1%80%D0%BE_Linux "wikipedia:ru:Ядро Linux") — монолитное [ядро](https://en.wikipedia.org/wiki/ru:%D0%AF%D0%B4%D1%80%D0%BE_%D0%BE%D0%BF%D0%B5%D1%80%D0%B0%D1%86%D0%B8%D0%BE%D0%BD%D0%BD%D0%BE%D0%B9_%D1%81%D0%B8%D1%81%D1%82%D0%B5%D0%BC%D1%8B "wikipedia:ru:Ядро операционной системы") Unix-подобной операционной системы с открытым исходным кодом.

Дистрибутив [Arch Linux](/index.php/Arch_Linux_(%D0%A0%D1%83%D1%81%D1%81%D0%BA%D0%B8%D0%B9) "Arch Linux (Русский)") основан на ядре Linux. Помимо основной стабильной (stable) версии в Arch Linux можно использовать некоторые альтернативные ядра. В статье описываются доступные в официальных репозиториях версии ядер, возможные патчи, а также способы, которыми пользователи могут скомпилировать собственное ядро.

Пакет ядра [устанавливается](/index.php/%D0%A3%D1%81%D1%82%D0%B0%D0%BD%D0%BE%D0%B2%D0%B8%D1%82%D0%B5 "Установите") на файловую систему в разделе `/boot/`. Для загрузки нужного ядра при запуске системы небходимо соответствующим образом настроить [загрузчик](/index.php/Boot_loader "Boot loader").

<input type="checkbox" role="button" id="toctogglecheckbox" class="toctogglecheckbox" style="display:none">

## Contents

<label class="toctogglelabel" for="toctogglecheckbox"></label>

*   [1 Официально поддерживаемые пакеты](#Официально_поддерживаемые_пакеты)
*   [2 Компиляция](#Компиляция)
*   [3 Ядра с сайта kernel.org](#Ядра_с_сайта_kernel.org)
*   [4 Патчи и наборы патчей (патчсеты)](#Патчи_и_наборы_патчей_(патчсеты))
    *   [4.1 Как установить](#Как_установить)
    *   [4.2 Основные патчи и патчсеты](#Основные_патчи_и_патчсеты)
        *   [4.2.1 -ck](#-ck)
        *   [4.2.2 -rt](#-rt)
        *   [4.2.3 -bld](#-bld)
        *   [4.2.4 -grsecurity](#-grsecurity)
        *   [4.2.5 Tiny-Патчи](#Tiny-Патчи)
        *   [4.2.6 -pf](#-pf)
    *   [4.3 Индивидуальные патчи](#Индивидуальные_патчи)
        *   [4.3.1 Reiser4](#Reiser4)
*   [5 Смотрите также](#Смотрите_также)

## Официально поддерживаемые пакеты

*   **Stable** — "Ванильное" ядро Linux с модулями и некоторыми патчами.

	[https://www.kernel.org/](https://www.kernel.org/) || [linux](https://www.archlinux.org/packages/?name=linux)

*   **Hardened** — Ориентированная на безопасность версия с набором патчей, защищающих от эксплойтов ядра и пространства пользователя. Внедрение защитных возможностей в этом ядре происходит быстрее, чем в [linux](https://www.archlinux.org/packages/?name=linux).

	[https://github.com/anthraxx/linux-hardened](https://github.com/anthraxx/linux-hardened) || [linux-hardened](https://www.archlinux.org/packages/?name=linux-hardened)

*   **Longterm** — Версия ядра и модулей с долгосрочной поддержкой (Long Term Support, LTS).

	[https://www.kernel.org/](https://www.kernel.org/) || [linux-lts](https://www.archlinux.org/packages/?name=linux-lts)

*   **Zen Kernel** — Результат коллективных усилий исследователей с целью создать лучшее из возможных ядер Linux для систем общего назначения. Подробности проекта можно найти на сайте [liquorix.net](https://liquorix.net/) (там же можно скачать двоичные файлы Zen-ядра для Debian).

	[https://github.com/zen-kernel/zen-kernel](https://github.com/zen-kernel/zen-kernel) || [linux-zen](https://www.archlinux.org/packages/?name=linux-zen)

## Компиляция

В Arch Linux есть два способа компиляции собственного ядра.

	[/Arch Build System](/index.php/Kernel_(%D0%A0%D1%83%D1%81%D1%81%D0%BA%D0%B8%D0%B9)/Arch_Build_System_(%D0%A0%D1%83%D1%81%D1%81%D0%BA%D0%B8%D0%B9) "Kernel (Русский)/Arch Build System (Русский)")

	Преимущества — наличие готового [PKGBUILD](/index.php/PKGBUILD_(%D0%A0%D1%83%D1%81%D1%81%D0%BA%D0%B8%D0%B9) "PKGBUILD (Русский)") для пакета [linux](https://www.archlinux.org/packages/?name=linux) и удобство использования системы [управления пакетами](https://en.wikipedia.org/wiki/ru:%D0%A1%D0%B8%D1%81%D1%82%D0%B5%D0%BC%D0%B0_%D1%83%D0%BF%D1%80%D0%B0%D0%B2%D0%BB%D0%B5%D0%BD%D0%B8%D1%8F_%D0%BF%D0%B0%D0%BA%D0%B5%D1%82%D0%B0%D0%BC%D0%B8 "wikipedia:ru:Система управления пакетами").

	[Традиционная компиляция](/index.php/Kernel/Traditional_compilation "Kernel/Traditional compilation")

	Ручная загрузка архива файлов с исходными кодами ядра и их компиляция.

## Ядра с сайта kernel.org

*   **Git** — Ядро Linux, собранное из файлов с исходным кодом из git-репозитория Линуса Торвальдса.

	[https://git.kernel.org/cgit/linux/kernel/git/torvalds/linux.git](https://git.kernel.org/cgit/linux/kernel/git/torvalds/linux.git) || [linux-git](https://aur.archlinux.org/packages/linux-git/)

*   **Mainline** — Версии ядра с добавлением новых функций. Выходят каждые 2-3 месяца.

	[https://www.kernel.org/](https://www.kernel.org/) || [linux-mainline](https://aur.archlinux.org/packages/linux-mainline/)

*   **Next** — Новейшие версии ядра, с улучшениями, которые будут добавлены в следующий mainline-выпуск.

	[https://www.kernel.org/doc/man-pages/linux-next.html](https://www.kernel.org/doc/man-pages/linux-next.html) || [linux-next-git](https://aur.archlinux.org/packages/linux-next-git/)

*   **Longterm 3.16** — LTS-ядро версии 3.16.

	[https://www.kernel.org/](https://www.kernel.org/) || [linux-lts316](https://aur.archlinux.org/packages/linux-lts316/)

*   **Longterm 4.4** — LTS-ядро версии 4.4.

	[https://www.kernel.org/](https://www.kernel.org/) || [linux-lts44](https://aur.archlinux.org/packages/linux-lts44/)

*   **Longterm 4.9** — LTS-ядро версии 4.9.

	[https://www.kernel.org/](https://www.kernel.org/) || [linux-lts49](https://aur.archlinux.org/packages/linux-lts49/)

*   **Longterm 4.14** — LTS-ядро версии 4.14.

	[https://www.kernel.org/](https://www.kernel.org/) || [linux-lts414](https://aur.archlinux.org/packages/linux-lts414/)

*   **Longterm 4.19** — LTS-ядро версии 4.19.

	[https://www.kernel.org/](https://www.kernel.org/) || [linux-lts419](https://aur.archlinux.org/packages/linux-lts419/)

## Патчи и наборы патчей (патчсеты)

Есть много причин, чтобы пропатчить ядро, основные из них для работы или для поддержки не-магистральных функций, таких как поддержка файловой системы Reiser4\. Другие причины могут включать в себя забаву и посмотреть, как это делается и какие улучшения при этом появляются.

Однако, важно отметить, что лучшим способом увеличить скорость работы вашей системы будет сконфигурированное ядро именно для вашей системы, особенно под конкретную архитектуру и тип процессора. По этой причине использовать заранее упакованные версии пользовательских ядер с общими настройками архитектуры не рекомендуется, или не стоит. Еще одним приемуществом является то, что вы можете уменьшить размер вашего ядра (и, следовательно время сборки). Для этого не включая поддержку тех модулей, которыми вы не пользуетесь. Например вы можете убрать поддержку bluetooth, video4linux, 1000Mbit ethernet и т.д. Т.е. убрать тот ненужный для вас функционал и/или поддержку того оборудования которого у вас нет. Хотя эта статья не о конфигурации ядра, тем не менее рекомендуется в качестве первого шага, основы, чтобы понять какой набор патчей использовать.

Конфигурационные файлы для пакетов ядра Arch можно использовать в качестве отправной точки. Они находятся в Arch исходных файлов пакета, например[[1]](https://projects.archlinux.org/svntogit/packages.git/tree/trunk?h=packages/linux) связано с [linux](https://www.archlinux.org/packages/?name=linux). Файл конфигурации вашего текущего ядра также всегда доступны в файловой системе в `/proc/config.gz`.

### Как установить

Процесс установки пользовательских пакетов ядра опирается на систему сборки Arch (ABS). Если вы не собирали какие-либо пользовательские пакеты самостоятельно, вы можете обратиться к следующим статьям: [Arch Build System (Русский)](/index.php/Arch_Build_System_(%D0%A0%D1%83%D1%81%D1%81%D0%BA%D0%B8%D0%B9) "Arch Build System (Русский)") и [Creating packages (Русский)](/index.php/Creating_packages_(%D0%A0%D1%83%D1%81%D1%81%D0%BA%D0%B8%D0%B9) "Creating packages (Русский)").

Если вы не патчили или настраивали ядро ранее, то это не так сложно, и есть много PKGBUILD’ов на форуме для отдельных пакетов. Тем не менее, мы советуем вам начать с нуля, с некоторым исследованием преимуществах каждого набора патчей, а не просто произвольной выборки из всего множества. Таким образом, вы узнаете гораздо больше о том, что вы делаете, а не просто выберите ядро при запуске, а потом будите гадать, что же там изменилось.

Смотрите [#Compilation](#Compilation).

**Примечание:** Не забудьте изменить параметры загрузки в загрузчике [GRUB](/index.php/GRUB "GRUB"), чтобы использовать новое ядро.

### Основные патчи и патчсеты

Прежде всего важно отметить, что патчи и патчсеты разработаны различными людьми. Некоторые из этих людей на самом деле участвует в производстве ядра Linux. Но есть и любители, которые могут поменять функции ядра надежности и стабильности в лучшую/худшую сторону.

Стоит также отметить, что некоторые патчи строятся на старых версиях ядра и (или) патчах (которые могут или не могут быть отражены в названии патча). Патчсеты (и обновления ядра) часто и зачастую не идут в ногу со временем. Так что не стоит сходить с ума, если это не ваше хобби.

Вы можете воспользоваться поиском Google для поиска других видов патчей.

**Примечание:** Этот раздел **только для ознакомления** - никаких гарантий о надёжности или стабильности на этой странице.

#### -ck

[Linux-ck](/index.php/Linux-ck "Linux-ck") содержит патчи, предназначенные для улучшения отклика системы с особым упором на рабочем столе, подходят для любой нагрузки. Патчи создаются и поддерживаются Коном Коливасом (Con Kolivas). Его сайт [http://users.on.net/~ckolivas/kernel/](http://users.on.net/~ckolivas/kernel/). Кон поддерживает полный набор патчей, но также обеспечивает одиночные патчи, так что вы можете добавить только те, которые Вы предпочитаете.

-ck можно найти на [http://ck.kolivas.org/patches/4.0/](http://ck.kolivas.org/patches/4.0/)

#### -rt

Это набор патчей поддерживается небольшой группой разработчиков ядра, во главе с Инго Молнар (Ingo Molnar). Позволяет превратить обычный Linux в ОС реального времени. Главное применение такой системы – промышленные и встроенные системы, но на обычном компьютере она тоже может быть интересна. Например тем, кто часто занимается обработкой звука и видео или постоянно грузит систему какими-нибудь ресурсоемкими вычислениями. Также есть положительный эффект от применения этого ядра на highload-серверах.

Патч на [https://www.kernel.org/pub/linux/kernel/projects/rt/](https://www.kernel.org/pub/linux/kernel/projects/rt/)

#### -bld

**Важно:** Этот патч находится в разработке.

[BLD](https://code.google.com/p/bld/) (Barbershop Load Distribution) лучше всего описывается как O(1) техника сортировки процессов. Это реализация альтернативного алгоритма планирования задач. BLD ограничивается решением задачи по корректному распределению нагрузки путем отслеживания не всех привязанных к CPU очередей, а только наиболее и наименее загруженных очередей выполнения (rq, runqueue). BLD не пытается балансировать нагрузку на систему в контексте отслеживания бездействующих idle-процессов, а акцентирует внимание на распределении всей нагрузки между имеющимися процессорами наиболее простым путём с минимальным числом усложнений. Главным достоинством BLD является сам подход, показывающий что достаточно простыми методами можно добиться равномерного распределения нагрузки, не заботясь особенно о том сколько CPU используется в системе и соответственно без лавинообразного падения производительности на накладные расходы при увеличении числа CPU (BLD обеспечивает уровень производительности O(i), где i - число CPU).

По материалам [этой новости](http://www.opennet.ru/opennews/art.shtml?num=33070%7C)

#### -grsecurity

[Grsecurity](/index.php/Grsecurity "Grsecurity") Из [[2]](https://ru.wikipedia.org/wiki/Grsecurity) Это проект для Linux, который включает в себя некоторые улучшения связанные с безопасностью, включая принудительный контроль доступа, рандомизацию ключевых локальных и сетевых информативных данных, ограничения /proc и chroot() jail, контроль сетевых сокетов, контроль возможностей, и добавочные функции аудита. Типичной областью применения являются web-сервера и системы, которые принимают удалённые соединения из сомнительных мест, такие как сервера, которые обеспечивают shell-доступ для пользователей. Патч grsecurity выпущен под GPL, является свободным ПО и включает в себя набор патчей PaX. Создатель и ведущий разработчик grsecurity — Brad Spengler aka. Spender.

Grsecurity патчи можно посмотреть на [https://grsecurity.net](https://grsecurity.net)

#### Tiny-Патчи

Цель[Linux Tiny](http://elinux.org/Linux_Tiny) использование минимального дискового пространства и оперативной памяти, а также облегчение труда маломощных компьютеров. Целевые пользователи являются разработчиками встраиваемых систем и пользователями маломощных или устаревших машин, таких как 386/

Патч-релизы против господствующего Linux ядра были прекращены. Разработчики решили сосредоточиться на нескольких патчах и попытках поставить их в официальное ядро.

#### -pf

[linux-pf](https://aur.archlinux.org/packages/linux-pf/) Это набор патчей, поверх официального ядра, обеспечивающих повышенную отзывчивость системы, предоставляющих альтернативную подсистему гибернации (более быстрая, по сравнению с основной), а также уменьшают использование памяти с помощью техники объединения одинаковых страниц. Набор патчей включает в себя: планировщик процессов BFS от Кона Коливаса (Con Kolivas) с дополнительными исправлениями от Альфреда Чена (Alfred Chen), планировщик ввода-вывода BFQ Паоло Валенте (Paolo Valente), Арианны Аванзини (Arianna Avanzini) и Мауро Маринони (Mauro Marinoni), подсистема гибернации TuxOnIce от Найджела Каннингема (Nigel Cunningham), реализация техники слияния одинаковых страниц в памяти UKSM от Най Ся (Nai Xia), патч от Graysky, расширяющий список процессоров для оптимизации ядра компилятором.

Смотрите [linux-pf](/index.php/Linux-pf "Linux-pf") для большей информации.

### Индивидуальные патчи

Эти патчи могут быть просто включены в любую сборку ванильного ядра или включены (возможно, с какой-то крупной тонкой настройки) в другой набор патчей.

#### Reiser4

[Reiser4](/index.php/Reiser4 "Reiser4")

## Смотрите также

*   [O'Reilly — Linux Kernel in a Nutshell](http://www.kroah.com/lkn/) — электронная книга "Ядро Linux в двух словах".
*   [Какую из stable-версий ядра лучше использовать?](http://kroah.com/log/blog/2018/08/24/what-stable-kernel-should-i-use/) от Greg Kroah-Hartman.